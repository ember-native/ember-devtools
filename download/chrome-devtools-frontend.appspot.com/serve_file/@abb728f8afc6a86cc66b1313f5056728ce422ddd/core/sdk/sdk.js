import*as e from"../common/common.js";import*as t from"../../models/cpu_profile/cpu_profile.js";import*as r from"../../models/text_utils/text_utils.js";import*as n from"../i18n/i18n.js";import*as s from"../platform/platform.js";import{assertNotNullOrUndefined as i}from"../platform/platform.js";import*as o from"../root/root.js";import*as a from"../host/host.js";import*as l from"../protocol_client/protocol_client.js";import*as d from"../../third_party/codemirror.next/codemirror.next.js";const c=new Map;class h extends e.ObjectWrapper.ObjectWrapper{#e;constructor(e){super(),this.#e=e}target(){return this.#e}async preSuspendModel(e){}async suspendModel(e){}async resumeModel(){}async postResumeModel(){}dispose(){}static register(e,t){if(t.early&&!t.autostart)throw new Error(`Error registering model ${e.name}: early models must be autostarted.`);c.set(e,t)}static get registeredModels(){return c}}var u=Object.freeze({__proto__:null,SDKModel:h});const g=[{longhands:["animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state","animation-name","animation-timeline","animation-range-start","animation-range-end"],name:"-alternative-animation-with-timeline"},{longhands:["position-try-order","position-try-fallbacks"],name:"-alternative-position-try"},{inherited:!0,name:"-webkit-border-horizontal-spacing"},{name:"-webkit-border-image"},{inherited:!0,name:"-webkit-border-vertical-spacing"},{keywords:["stretch","start","center","end","baseline"],name:"-webkit-box-align"},{keywords:["slice","clone"],name:"-webkit-box-decoration-break"},{keywords:["normal","reverse"],name:"-webkit-box-direction"},{name:"-webkit-box-flex"},{name:"-webkit-box-ordinal-group"},{keywords:["horizontal","vertical"],name:"-webkit-box-orient"},{keywords:["start","center","end","justify"],name:"-webkit-box-pack"},{name:"-webkit-box-reflect"},{longhands:["break-after"],name:"-webkit-column-break-after"},{longhands:["break-before"],name:"-webkit-column-break-before"},{longhands:["break-inside"],name:"-webkit-column-break-inside"},{inherited:!0,name:"-webkit-font-smoothing"},{inherited:!0,keywords:["auto","loose","normal","strict","after-white-space","anywhere"],name:"-webkit-line-break"},{name:"-webkit-line-clamp"},{inherited:!0,name:"-webkit-locale"},{longhands:["-webkit-mask-box-image-source","-webkit-mask-box-image-slice","-webkit-mask-box-image-width","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat"],name:"-webkit-mask-box-image"},{name:"-webkit-mask-box-image-outset"},{name:"-webkit-mask-box-image-repeat"},{name:"-webkit-mask-box-image-slice"},{name:"-webkit-mask-box-image-source"},{name:"-webkit-mask-box-image-width"},{name:"-webkit-mask-position-x"},{name:"-webkit-mask-position-y"},{name:"-webkit-perspective-origin-x"},{name:"-webkit-perspective-origin-y"},{inherited:!0,keywords:["economy","exact"],name:"-webkit-print-color-adjust"},{inherited:!0,keywords:["logical","visual"],name:"-webkit-rtl-ordering"},{inherited:!0,name:"-webkit-ruby-position"},{inherited:!0,name:"-webkit-tap-highlight-color"},{inherited:!0,name:"-webkit-text-combine"},{inherited:!0,name:"-webkit-text-decorations-in-effect"},{inherited:!0,name:"-webkit-text-fill-color"},{inherited:!0,name:"-webkit-text-orientation"},{inherited:!0,keywords:["none","disc","circle","square"],name:"-webkit-text-security"},{inherited:!0,longhands:["-webkit-text-stroke-width","-webkit-text-stroke-color"],name:"-webkit-text-stroke"},{inherited:!0,name:"-webkit-text-stroke-color"},{inherited:!0,name:"-webkit-text-stroke-width"},{name:"-webkit-transform-origin-x"},{name:"-webkit-transform-origin-y"},{name:"-webkit-transform-origin-z"},{keywords:["auto","none","element"],name:"-webkit-user-drag"},{inherited:!0,keywords:["read-only","read-write","read-write-plaintext-only"],name:"-webkit-user-modify"},{inherited:!0,name:"-webkit-writing-mode"},{inherited:!0,keywords:["auto","currentcolor"],name:"accent-color"},{name:"additive-symbols"},{name:"align-content"},{name:"align-items"},{name:"align-self"},{keywords:["auto","baseline","alphabetic","ideographic","middle","central","mathematical","before-edge","text-before-edge","after-edge","text-after-edge","hanging"],name:"alignment-baseline"},{longhands:["-webkit-border-horizontal-spacing","-webkit-border-vertical-spacing","-webkit-box-align","-webkit-box-decoration-break","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-reflect","-webkit-font-smoothing","-webkit-line-break","-webkit-line-clamp","-webkit-locale","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat","-webkit-mask-box-image-slice","-webkit-mask-box-image-source","-webkit-mask-box-image-width","-webkit-mask-position-x","-webkit-mask-position-y","-webkit-print-color-adjust","-webkit-rtl-ordering","-webkit-ruby-position","-webkit-tap-highlight-color","-webkit-text-combine","-webkit-text-decorations-in-effect","-webkit-text-fill-color","-webkit-text-orientation","-webkit-text-security","-webkit-text-stroke-color","-webkit-text-stroke-width","-webkit-user-drag","-webkit-writing-mode","accent-color","additive-symbols","align-content","align-items","align-self","alignment-baseline","anchor-name","anchor-scope","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","app-region","appearance","ascent-override","aspect-ratio","backdrop-filter","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position-x","background-position-y","background-repeat","background-size","base-palette","baseline-shift","baseline-source","block-size","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start-color","border-block-start-style","border-block-start-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-start-end-radius","border-start-start-radius","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","buffered-rendering","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-width","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cursor","cx","cy","d","descent-override","display","dominant-baseline","dynamic-range-limit","empty-cells","fallback","field-sizing","fill","fill-opacity","fill-rule","filter","flex-basis","flex-direction","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","font-display","font-family","font-feature-settings","font-kerning","font-optical-sizing","font-palette","font-size","font-size-adjust","font-stretch","font-style","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column-end","grid-column-start","grid-row-end","grid-row-start","grid-template-areas","grid-template-columns","grid-template-rows","height","hyphenate-character","hyphenate-limit-chars","hyphens","image-orientation","image-rendering","inherits","initial-letter","initial-value","inline-size","inset-area","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","interpolate-size","isolation","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-clamp","line-gap-override","line-height","list-style-image","list-style-position","list-style-type","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marker-end","marker-mid","marker-start","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-repeat","mask-size","mask-type","masonry-template-tracks","masonry-track-end","masonry-track-start","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","navigation","negative","object-fit","object-position","object-view-box","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","origin-trial-test-property","orphans","outline-color","outline-offset","outline-style","outline-width","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","override-colors","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","pad","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-orientation","paint-order","perspective","perspective-origin","pointer-events","popover-hide-delay","popover-show-delay","position","position-anchor","position-area","position-try-fallbacks","position-try-options","position-try-order","position-visibility","prefix","quotes","r","range","reading-flow","resize","right","rotate","row-gap","ruby-align","ruby-position","rx","ry","scale","scroll-behavior","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-marker-group","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-start-block","scroll-start-inline","scroll-start-target-block","scroll-start-target-inline","scroll-start-target-x","scroll-start-target-y","scroll-start-x","scroll-start-y","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","size","size-adjust","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","suffix","symbols","syntax","system","tab-size","table-layout","text-align","text-align-last","text-anchor","text-autospace","text-box-edge","text-box-trim","text-combine-upright","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-spacing-trim","text-transform","text-underline-offset","text-underline-position","text-wrap","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","types","unicode-range","user-select","vector-effect","vertical-align","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-class","view-transition-group","view-transition-name","visibility","white-space-collapse","widows","width","will-change","word-break","word-spacing","writing-mode","x","y","z-index","zoom"],name:"all"},{keywords:["none"],name:"anchor-name"},{keywords:["none","all"],name:"anchor-scope"},{longhands:["animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state","animation-name"],name:"animation"},{keywords:["replace","add","accumulate"],name:"animation-composition"},{name:"animation-delay"},{keywords:["normal","reverse","alternate","alternate-reverse"],name:"animation-direction"},{name:"animation-duration"},{keywords:["none","forwards","backwards","both"],name:"animation-fill-mode"},{keywords:["infinite"],name:"animation-iteration-count"},{keywords:["none"],name:"animation-name"},{keywords:["running","paused"],name:"animation-play-state"},{longhands:["animation-range-start","animation-range-end"],name:"animation-range"},{name:"animation-range-end"},{name:"animation-range-start"},{keywords:["none","auto"],name:"animation-timeline"},{keywords:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"],name:"animation-timing-function"},{keywords:["none","drag","no-drag"],name:"app-region"},{name:"appearance"},{name:"ascent-override"},{keywords:["auto"],name:"aspect-ratio"},{keywords:["none"],name:"backdrop-filter"},{keywords:["visible","hidden"],name:"backface-visibility"},{longhands:["background-image","background-position-x","background-position-y","background-size","background-repeat","background-attachment","background-origin","background-clip","background-color"],name:"background"},{keywords:["scroll","fixed","local"],name:"background-attachment"},{keywords:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],name:"background-blend-mode"},{keywords:["border-box","padding-box","content-box","text"],name:"background-clip"},{keywords:["currentcolor"],name:"background-color"},{keywords:["auto","none"],name:"background-image"},{keywords:["border-box","padding-box","content-box"],name:"background-origin"},{longhands:["background-position-x","background-position-y"],name:"background-position"},{name:"background-position-x"},{name:"background-position-y"},{name:"background-repeat"},{keywords:["auto","cover","contain"],name:"background-size"},{name:"base-palette"},{keywords:["baseline","sub","super"],name:"baseline-shift"},{keywords:["auto","first","last"],name:"baseline-source"},{keywords:["auto"],name:"block-size"},{longhands:["border-top-color","border-top-style","border-top-width","border-right-color","border-right-style","border-right-width","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],name:"border"},{longhands:["border-block-start-color","border-block-start-style","border-block-start-width","border-block-end-color","border-block-end-style","border-block-end-width"],name:"border-block"},{longhands:["border-block-start-color","border-block-end-color"],name:"border-block-color"},{longhands:["border-block-end-width","border-block-end-style","border-block-end-color"],name:"border-block-end"},{name:"border-block-end-color"},{name:"border-block-end-style"},{name:"border-block-end-width"},{longhands:["border-block-start-width","border-block-start-style","border-block-start-color"],name:"border-block-start"},{name:"border-block-start-color"},{name:"border-block-start-style"},{name:"border-block-start-width"},{longhands:["border-block-start-style","border-block-end-style"],name:"border-block-style"},{longhands:["border-block-start-width","border-block-end-width"],name:"border-block-width"},{longhands:["border-bottom-width","border-bottom-style","border-bottom-color"],name:"border-bottom"},{keywords:["currentcolor"],name:"border-bottom-color"},{name:"border-bottom-left-radius"},{name:"border-bottom-right-radius"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"border-bottom-style"},{keywords:["thin","medium","thick"],name:"border-bottom-width"},{inherited:!0,keywords:["separate","collapse"],name:"border-collapse"},{longhands:["border-top-color","border-right-color","border-bottom-color","border-left-color"],name:"border-color"},{name:"border-end-end-radius"},{name:"border-end-start-radius"},{longhands:["border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],name:"border-image"},{name:"border-image-outset"},{keywords:["stretch","repeat","round","space"],name:"border-image-repeat"},{name:"border-image-slice"},{keywords:["none"],name:"border-image-source"},{keywords:["auto"],name:"border-image-width"},{longhands:["border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-end-color","border-inline-end-style","border-inline-end-width"],name:"border-inline"},{longhands:["border-inline-start-color","border-inline-end-color"],name:"border-inline-color"},{longhands:["border-inline-end-width","border-inline-end-style","border-inline-end-color"],name:"border-inline-end"},{name:"border-inline-end-color"},{name:"border-inline-end-style"},{name:"border-inline-end-width"},{longhands:["border-inline-start-width","border-inline-start-style","border-inline-start-color"],name:"border-inline-start"},{name:"border-inline-start-color"},{name:"border-inline-start-style"},{name:"border-inline-start-width"},{longhands:["border-inline-start-style","border-inline-end-style"],name:"border-inline-style"},{longhands:["border-inline-start-width","border-inline-end-width"],name:"border-inline-width"},{longhands:["border-left-width","border-left-style","border-left-color"],name:"border-left"},{keywords:["currentcolor"],name:"border-left-color"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"border-left-style"},{keywords:["thin","medium","thick"],name:"border-left-width"},{longhands:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],name:"border-radius"},{longhands:["border-right-width","border-right-style","border-right-color"],name:"border-right"},{keywords:["currentcolor"],name:"border-right-color"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"border-right-style"},{keywords:["thin","medium","thick"],name:"border-right-width"},{inherited:!0,longhands:["-webkit-border-horizontal-spacing","-webkit-border-vertical-spacing"],name:"border-spacing"},{name:"border-start-end-radius"},{name:"border-start-start-radius"},{keywords:["none"],longhands:["border-top-style","border-right-style","border-bottom-style","border-left-style"],name:"border-style"},{longhands:["border-top-width","border-top-style","border-top-color"],name:"border-top"},{keywords:["currentcolor"],name:"border-top-color"},{name:"border-top-left-radius"},{name:"border-top-right-radius"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"border-top-style"},{keywords:["thin","medium","thick"],name:"border-top-width"},{longhands:["border-top-width","border-right-width","border-bottom-width","border-left-width"],name:"border-width"},{keywords:["auto"],name:"bottom"},{keywords:["slice","clone"],name:"box-decoration-break"},{keywords:["none"],name:"box-shadow"},{keywords:["content-box","border-box"],name:"box-sizing"},{keywords:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"],name:"break-after"},{keywords:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"],name:"break-before"},{keywords:["auto","avoid","avoid-column","avoid-page"],name:"break-inside"},{keywords:["auto","dynamic","static"],name:"buffered-rendering"},{inherited:!0,keywords:["top","bottom"],name:"caption-side"},{inherited:!0,keywords:["auto","currentcolor"],name:"caret-color"},{keywords:["none","left","right","both","inline-start","inline-end"],name:"clear"},{keywords:["auto"],name:"clip"},{keywords:["border-box","padding-box","content-box","margin-box","fill-box","stroke-box","view-box","none"],name:"clip-path"},{inherited:!0,keywords:["nonzero","evenodd"],name:"clip-rule"},{inherited:!0,keywords:["currentcolor"],name:"color"},{inherited:!0,keywords:["auto","srgb","linearrgb"],name:"color-interpolation"},{inherited:!0,keywords:["auto","srgb","linearrgb"],name:"color-interpolation-filters"},{inherited:!0,keywords:["auto","optimizespeed","optimizequality"],name:"color-rendering"},{inherited:!0,name:"color-scheme"},{keywords:["auto"],name:"column-count"},{keywords:["balance","auto"],name:"column-fill"},{keywords:["normal"],name:"column-gap"},{longhands:["column-rule-width","column-rule-style","column-rule-color"],name:"column-rule"},{keywords:["currentcolor"],name:"column-rule-color"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"column-rule-style"},{keywords:["thin","medium","thick"],name:"column-rule-width"},{keywords:["none","all"],name:"column-span"},{keywords:["auto"],name:"column-width"},{longhands:["column-width","column-count"],name:"columns"},{keywords:["none","strict","content","size","layout","style","paint","inline-size","block-size"],name:"contain"},{name:"contain-intrinsic-block-size"},{keywords:["none"],name:"contain-intrinsic-height"},{name:"contain-intrinsic-inline-size"},{longhands:["contain-intrinsic-width","contain-intrinsic-height"],name:"contain-intrinsic-size"},{keywords:["none"],name:"contain-intrinsic-width"},{longhands:["container-name","container-type"],name:"container"},{keywords:["none"],name:"container-name"},{keywords:["normal","inline-size","size","scroll-state"],name:"container-type"},{name:"content"},{keywords:["visible","auto","hidden"],name:"content-visibility"},{keywords:["none"],name:"counter-increment"},{keywords:["none"],name:"counter-reset"},{keywords:["none"],name:"counter-set"},{inherited:!0,keywords:["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out","grab","grabbing"],name:"cursor"},{name:"cx"},{name:"cy"},{keywords:["none"],name:"d"},{name:"descent-override"},{inherited:!0,keywords:["ltr","rtl"],name:"direction"},{keywords:["inline","block","list-item","inline-block","table","inline-table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption","-webkit-box","-webkit-inline-box","flex","inline-flex","grid","inline-grid","contents","flow-root","none","flow","math","ruby","ruby-text","masonry","inline-masonry"],name:"display"},{inherited:!0,keywords:["auto","alphabetic","ideographic","middle","central","mathematical","hanging","use-script","no-change","reset-size","text-after-edge","text-before-edge"],name:"dominant-baseline"},{inherited:!0,keywords:["standard","high","constrained-high"],name:"dynamic-range-limit"},{inherited:!0,keywords:["show","hide"],name:"empty-cells"},{name:"fallback"},{keywords:["fixed","content"],name:"field-sizing"},{inherited:!0,name:"fill"},{inherited:!0,name:"fill-opacity"},{inherited:!0,keywords:["nonzero","evenodd"],name:"fill-rule"},{keywords:["none"],name:"filter"},{longhands:["flex-grow","flex-shrink","flex-basis"],name:"flex"},{keywords:["auto","fit-content","min-content","max-content","content"],name:"flex-basis"},{keywords:["row","row-reverse","column","column-reverse"],name:"flex-direction"},{longhands:["flex-direction","flex-wrap"],name:"flex-flow"},{name:"flex-grow"},{name:"flex-shrink"},{keywords:["nowrap","wrap","wrap-reverse"],name:"flex-wrap"},{keywords:["none","left","right","inline-start","inline-end"],name:"float"},{keywords:["currentcolor"],name:"flood-color"},{name:"flood-opacity"},{inherited:!0,longhands:["font-style","font-variant-ligatures","font-variant-caps","font-variant-numeric","font-variant-east-asian","font-variant-alternates","font-variant-position","font-variant-emoji","font-weight","font-stretch","font-size","line-height","font-family","font-optical-sizing","font-size-adjust","font-kerning","font-feature-settings","font-variation-settings"],name:"font"},{name:"font-display"},{inherited:!0,name:"font-family"},{inherited:!0,keywords:["normal"],name:"font-feature-settings"},{inherited:!0,keywords:["auto","normal","none"],name:"font-kerning"},{inherited:!0,keywords:["auto","none"],name:"font-optical-sizing"},{inherited:!0,keywords:["normal","light","dark"],name:"font-palette"},{inherited:!0,keywords:["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller","-webkit-xxx-large"],name:"font-size"},{inherited:!0,keywords:["none","ex-height","cap-height","ch-width","ic-width","ic-height","from-font"],name:"font-size-adjust"},{inherited:!0,keywords:["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"],name:"font-stretch"},{inherited:!0,keywords:["normal","italic","oblique"],name:"font-style"},{inherited:!0,longhands:["font-synthesis-weight","font-synthesis-style","font-synthesis-small-caps"],name:"font-synthesis"},{inherited:!0,keywords:["auto","none"],name:"font-synthesis-small-caps"},{inherited:!0,keywords:["auto","none"],name:"font-synthesis-style"},{inherited:!0,keywords:["auto","none"],name:"font-synthesis-weight"},{inherited:!0,longhands:["font-variant-ligatures","font-variant-caps","font-variant-alternates","font-variant-numeric","font-variant-east-asian","font-variant-position","font-variant-emoji"],name:"font-variant"},{inherited:!0,keywords:["normal"],name:"font-variant-alternates"},{inherited:!0,keywords:["normal","small-caps","all-small-caps","petite-caps","all-petite-caps","unicase","titling-caps"],name:"font-variant-caps"},{inherited:!0,keywords:["normal","jis78","jis83","jis90","jis04","simplified","traditional","full-width","proportional-width","ruby"],name:"font-variant-east-asian"},{inherited:!0,keywords:["normal","text","emoji","unicode"],name:"font-variant-emoji"},{inherited:!0,keywords:["normal","none","common-ligatures","no-common-ligatures","discretionary-ligatures","no-discretionary-ligatures","historical-ligatures","no-historical-ligatures","contextual","no-contextual"],name:"font-variant-ligatures"},{inherited:!0,keywords:["normal","lining-nums","oldstyle-nums","proportional-nums","tabular-nums","diagonal-fractions","stacked-fractions","ordinal","slashed-zero"],name:"font-variant-numeric"},{inherited:!0,keywords:["normal","sub","super"],name:"font-variant-position"},{inherited:!0,keywords:["normal"],name:"font-variation-settings"},{inherited:!0,keywords:["normal","bold","bolder","lighter"],name:"font-weight"},{inherited:!0,keywords:["auto","none","preserve-parent-color"],name:"forced-color-adjust"},{longhands:["row-gap","column-gap"],name:"gap"},{longhands:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-flow","grid-auto-rows","grid-auto-columns"],name:"grid"},{longhands:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],name:"grid-area"},{keywords:["auto","min-content","max-content"],name:"grid-auto-columns"},{keywords:["row","column"],name:"grid-auto-flow"},{keywords:["auto","min-content","max-content"],name:"grid-auto-rows"},{longhands:["grid-column-start","grid-column-end"],name:"grid-column"},{keywords:["auto"],name:"grid-column-end"},{keywords:["auto"],name:"grid-column-start"},{longhands:["grid-row-start","grid-row-end"],name:"grid-row"},{keywords:["auto"],name:"grid-row-end"},{keywords:["auto"],name:"grid-row-start"},{longhands:["grid-template-rows","grid-template-columns","grid-template-areas"],name:"grid-template"},{keywords:["none"],name:"grid-template-areas"},{keywords:["none"],name:"grid-template-columns"},{keywords:["none"],name:"grid-template-rows"},{keywords:["auto","fit-content","min-content","max-content"],name:"height"},{inherited:!0,name:"hyphenate-character"},{inherited:!0,keywords:["auto"],name:"hyphenate-limit-chars"},{inherited:!0,keywords:["none","manual","auto"],name:"hyphens"},{inherited:!0,name:"image-orientation"},{inherited:!0,keywords:["auto","optimizespeed","optimizequality","-webkit-optimize-contrast","pixelated"],name:"image-rendering"},{name:"inherits"},{inherited:!1,keywords:["drop","normal","raise"],name:"initial-letter"},{name:"initial-value"},{keywords:["auto"],name:"inline-size"},{longhands:["top","right","bottom","left"],name:"inset"},{keywords:["none","top","bottom","center","left","right","x-start","x-end","y-start","y-end","start","end","self-start","self-end","all"],name:"inset-area"},{longhands:["inset-block-start","inset-block-end"],name:"inset-block"},{name:"inset-block-end"},{name:"inset-block-start"},{longhands:["inset-inline-start","inset-inline-end"],name:"inset-inline"},{name:"inset-inline-end"},{name:"inset-inline-start"},{inherited:!0,keywords:["numeric-only","allow-keywords"],name:"interpolate-size"},{keywords:["auto","isolate"],name:"isolation"},{name:"justify-content"},{name:"justify-items"},{name:"justify-self"},{keywords:["auto"],name:"left"},{inherited:!0,keywords:["normal"],name:"letter-spacing"},{keywords:["currentcolor"],name:"lighting-color"},{inherited:!0,keywords:["auto","loose","normal","strict","anywhere"],name:"line-break"},{keywords:["none","auto"],name:"line-clamp"},{name:"line-gap-override"},{inherited:!0,keywords:["normal"],name:"line-height"},{inherited:!0,longhands:["list-style-position","list-style-image","list-style-type"],name:"list-style"},{inherited:!0,keywords:["none"],name:"list-style-image"},{inherited:!0,keywords:["outside","inside"],name:"list-style-position"},{inherited:!0,keywords:["disc","circle","square","disclosure-open","disclosure-closed","decimal","none"],name:"list-style-type"},{longhands:["margin-top","margin-right","margin-bottom","margin-left"],name:"margin"},{longhands:["margin-block-start","margin-block-end"],name:"margin-block"},{keywords:["auto"],name:"margin-block-end"},{keywords:["auto"],name:"margin-block-start"},{keywords:["auto"],name:"margin-bottom"},{longhands:["margin-inline-start","margin-inline-end"],name:"margin-inline"},{keywords:["auto"],name:"margin-inline-end"},{keywords:["auto"],name:"margin-inline-start"},{keywords:["auto"],name:"margin-left"},{keywords:["auto"],name:"margin-right"},{keywords:["auto"],name:"margin-top"},{inherited:!0,longhands:["marker-start","marker-mid","marker-end"],name:"marker"},{inherited:!0,keywords:["none"],name:"marker-end"},{inherited:!0,keywords:["none"],name:"marker-mid"},{inherited:!0,keywords:["none"],name:"marker-start"},{longhands:["mask-image","-webkit-mask-position-x","-webkit-mask-position-y","mask-size","mask-repeat","mask-origin","mask-clip","mask-composite","mask-mode"],name:"mask"},{name:"mask-clip"},{name:"mask-composite"},{name:"mask-image"},{name:"mask-mode"},{name:"mask-origin"},{longhands:["-webkit-mask-position-x","-webkit-mask-position-y"],name:"mask-position"},{name:"mask-repeat"},{name:"mask-size"},{keywords:["luminance","alpha"],name:"mask-type"},{name:"masonry-template-tracks"},{keywords:["auto"],name:"masonry-track-end"},{keywords:["auto"],name:"masonry-track-start"},{inherited:!0,name:"math-depth"},{inherited:!0,keywords:["normal","compact"],name:"math-shift"},{inherited:!0,keywords:["normal","compact"],name:"math-style"},{keywords:["none"],name:"max-block-size"},{keywords:["none"],name:"max-height"},{keywords:["none"],name:"max-inline-size"},{keywords:["none"],name:"max-width"},{name:"min-block-size"},{name:"min-height"},{name:"min-inline-size"},{name:"min-width"},{keywords:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],name:"mix-blend-mode"},{name:"navigation"},{name:"negative"},{keywords:["fill","contain","cover","none","scale-down"],name:"object-fit"},{name:"object-position"},{keywords:["none"],name:"object-view-box"},{longhands:["offset-position","offset-path","offset-distance","offset-rotate","offset-anchor"],name:"offset"},{keywords:["auto"],name:"offset-anchor"},{name:"offset-distance"},{keywords:["none"],name:"offset-path"},{keywords:["auto","normal"],name:"offset-position"},{keywords:["auto","reverse"],name:"offset-rotate"},{name:"opacity"},{name:"order"},{keywords:["normal","none"],name:"origin-trial-test-property"},{inherited:!0,name:"orphans"},{longhands:["outline-color","outline-style","outline-width"],name:"outline"},{keywords:["currentcolor"],name:"outline-color"},{name:"outline-offset"},{keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"],name:"outline-style"},{keywords:["thin","medium","thick"],name:"outline-width"},{longhands:["overflow-x","overflow-y"],name:"overflow"},{inherited:!1,keywords:["visible","none","auto"],name:"overflow-anchor"},{name:"overflow-block"},{keywords:["border-box","content-box","padding-box"],name:"overflow-clip-margin"},{name:"overflow-inline"},{inherited:!0,keywords:["normal","break-word","anywhere"],name:"overflow-wrap"},{keywords:["visible","hidden","scroll","auto","overlay","clip"],name:"overflow-x"},{keywords:["visible","hidden","scroll","auto","overlay","clip"],name:"overflow-y"},{keywords:["none","auto"],name:"overlay"},{name:"override-colors"},{longhands:["overscroll-behavior-x","overscroll-behavior-y"],name:"overscroll-behavior"},{name:"overscroll-behavior-block"},{name:"overscroll-behavior-inline"},{keywords:["auto","contain","none"],name:"overscroll-behavior-x"},{keywords:["auto","contain","none"],name:"overscroll-behavior-y"},{name:"pad"},{longhands:["padding-top","padding-right","padding-bottom","padding-left"],name:"padding"},{longhands:["padding-block-start","padding-block-end"],name:"padding-block"},{name:"padding-block-end"},{name:"padding-block-start"},{name:"padding-bottom"},{longhands:["padding-inline-start","padding-inline-end"],name:"padding-inline"},{name:"padding-inline-end"},{name:"padding-inline-start"},{name:"padding-left"},{name:"padding-right"},{name:"padding-top"},{keywords:["auto"],name:"page"},{longhands:["break-after"],name:"page-break-after"},{longhands:["break-before"],name:"page-break-before"},{longhands:["break-inside"],name:"page-break-inside"},{name:"page-orientation"},{inherited:!0,keywords:["normal","fill","stroke","markers"],name:"paint-order"},{keywords:["none"],name:"perspective"},{name:"perspective-origin"},{longhands:["align-content","justify-content"],name:"place-content"},{longhands:["align-items","justify-items"],name:"place-items"},{longhands:["align-self","justify-self"],name:"place-self"},{inherited:!0,keywords:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","bounding-box","all"],name:"pointer-events"},{name:"popover-hide-delay"},{name:"popover-show-delay"},{keywords:["static","relative","absolute","fixed","sticky"],name:"position"},{keywords:["auto"],name:"position-anchor"},{keywords:["none","top","bottom","center","left","right","x-start","x-end","y-start","y-end","start","end","self-start","self-end","all"],name:"position-area"},{longhands:["position-try-order","position-try-options"],name:"position-try"},{keywords:["none","flip-block","flip-inline","flip-start"],name:"position-try-fallbacks"},{name:"position-try-options"},{keywords:["normal","most-width","most-height","most-block-size","most-inline-size"],name:"position-try-order"},{keywords:["always","anchors-visible","no-overflow"],name:"position-visibility"},{name:"prefix"},{inherited:!0,keywords:["auto","none"],name:"quotes"},{name:"r"},{name:"range"},{keywords:["normal","flex-visual","flex-flow","grid-rows","grid-columns","grid-order"],name:"reading-flow"},{keywords:["none","both","horizontal","vertical","block","inline"],name:"resize"},{keywords:["auto"],name:"right"},{name:"rotate"},{keywords:["normal"],name:"row-gap"},{inherited:!0,keywords:["space-around","start","center","space-between"],name:"ruby-align"},{inherited:!0,keywords:["over","under"],name:"ruby-position"},{keywords:["auto"],name:"rx"},{keywords:["auto"],name:"ry"},{name:"scale"},{keywords:["auto","smooth"],name:"scroll-behavior"},{longhands:["scroll-margin-top","scroll-margin-right","scroll-margin-bottom","scroll-margin-left"],name:"scroll-margin"},{longhands:["scroll-margin-block-start","scroll-margin-block-end"],name:"scroll-margin-block"},{name:"scroll-margin-block-end"},{name:"scroll-margin-block-start"},{name:"scroll-margin-bottom"},{longhands:["scroll-margin-inline-start","scroll-margin-inline-end"],name:"scroll-margin-inline"},{name:"scroll-margin-inline-end"},{name:"scroll-margin-inline-start"},{name:"scroll-margin-left"},{name:"scroll-margin-right"},{name:"scroll-margin-top"},{keywords:["none","after","before"],name:"scroll-marker-group"},{longhands:["scroll-padding-top","scroll-padding-right","scroll-padding-bottom","scroll-padding-left"],name:"scroll-padding"},{longhands:["scroll-padding-block-start","scroll-padding-block-end"],name:"scroll-padding-block"},{keywords:["auto"],name:"scroll-padding-block-end"},{keywords:["auto"],name:"scroll-padding-block-start"},{keywords:["auto"],name:"scroll-padding-bottom"},{longhands:["scroll-padding-inline-start","scroll-padding-inline-end"],name:"scroll-padding-inline"},{keywords:["auto"],name:"scroll-padding-inline-end"},{keywords:["auto"],name:"scroll-padding-inline-start"},{keywords:["auto"],name:"scroll-padding-left"},{keywords:["auto"],name:"scroll-padding-right"},{keywords:["auto"],name:"scroll-padding-top"},{keywords:["none","start","end","center"],name:"scroll-snap-align"},{keywords:["normal","always"],name:"scroll-snap-stop"},{keywords:["none","x","y","block","inline","both","mandatory","proximity"],name:"scroll-snap-type"},{longhands:["scroll-start-block","scroll-start-inline"],name:"scroll-start"},{name:"scroll-start-block"},{name:"scroll-start-inline"},{longhands:["scroll-start-target-block","scroll-start-target-inline"],name:"scroll-start-target"},{name:"scroll-start-target-block"},{name:"scroll-start-target-inline"},{keywords:["none","auto"],name:"scroll-start-target-x"},{keywords:["none","auto"],name:"scroll-start-target-y"},{name:"scroll-start-x"},{name:"scroll-start-y"},{longhands:["scroll-timeline-name","scroll-timeline-axis"],name:"scroll-timeline"},{name:"scroll-timeline-axis"},{name:"scroll-timeline-name"},{inherited:!0,keywords:["auto"],name:"scrollbar-color"},{inherited:!1,keywords:["auto","stable","both-edges"],name:"scrollbar-gutter"},{inherited:!1,keywords:["auto","thin","none"],name:"scrollbar-width"},{name:"shape-image-threshold"},{keywords:["none"],name:"shape-margin"},{keywords:["none"],name:"shape-outside"},{inherited:!0,keywords:["auto","optimizespeed","crispedges","geometricprecision"],name:"shape-rendering"},{name:"size"},{name:"size-adjust"},{inherited:!0,keywords:["none","normal","spell-out","digits","literal-punctuation","no-punctuation"],name:"speak"},{name:"speak-as"},{name:"src"},{keywords:["currentcolor"],name:"stop-color"},{name:"stop-opacity"},{inherited:!0,name:"stroke"},{inherited:!0,keywords:["none"],name:"stroke-dasharray"},{inherited:!0,name:"stroke-dashoffset"},{inherited:!0,keywords:["butt","round","square"],name:"stroke-linecap"},{inherited:!0,keywords:["miter","bevel","round"],name:"stroke-linejoin"},{inherited:!0,name:"stroke-miterlimit"},{inherited:!0,name:"stroke-opacity"},{inherited:!0,name:"stroke-width"},{name:"suffix"},{name:"symbols"},{name:"syntax"},{name:"system"},{inherited:!0,name:"tab-size"},{keywords:["auto","fixed"],name:"table-layout"},{inherited:!0,keywords:["left","right","center","justify","-webkit-left","-webkit-right","-webkit-center","start","end"],name:"text-align"},{inherited:!0,keywords:["auto","start","end","left","right","center","justify"],name:"text-align-last"},{inherited:!0,keywords:["start","middle","end"],name:"text-anchor"},{inherited:!0,keywords:["normal","no-autospace"],name:"text-autospace"},{longhands:["text-box-trim","text-box-edge"],name:"text-box"},{inherited:!0,name:"text-box-edge"},{keywords:["none","trim-start","trim-end","trim-both"],name:"text-box-trim"},{inherited:!0,keywords:["none","all"],name:"text-combine-upright"},{longhands:["text-decoration-line","text-decoration-thickness","text-decoration-style","text-decoration-color"],name:"text-decoration"},{keywords:["currentcolor"],name:"text-decoration-color"},{keywords:["none","underline","overline","line-through","blink","spelling-error","grammar-error"],name:"text-decoration-line"},{inherited:!0,keywords:["none","auto"],name:"text-decoration-skip-ink"},{keywords:["solid","double","dotted","dashed","wavy"],name:"text-decoration-style"},{inherited:!1,keywords:["auto","from-font"],name:"text-decoration-thickness"},{inherited:!0,longhands:["text-emphasis-style","text-emphasis-color"],name:"text-emphasis"},{inherited:!0,keywords:["currentcolor"],name:"text-emphasis-color"},{inherited:!0,name:"text-emphasis-position"},{inherited:!0,name:"text-emphasis-style"},{inherited:!0,name:"text-indent"},{inherited:!0,keywords:["sideways","mixed","upright"],name:"text-orientation"},{keywords:["clip","ellipsis"],name:"text-overflow"},{inherited:!0,keywords:["auto","optimizespeed","optimizelegibility","geometricprecision"],name:"text-rendering"},{inherited:!0,keywords:["none"],name:"text-shadow"},{inherited:!0,keywords:["none","auto"],name:"text-size-adjust"},{inherited:!0,longhands:["text-autospace","text-spacing-trim"],name:"text-spacing"},{inherited:!0,keywords:["normal","space-all","space-first","trim-start"],name:"text-spacing-trim"},{inherited:!0,keywords:["capitalize","uppercase","lowercase","none","math-auto"],name:"text-transform"},{inherited:!0,keywords:["auto"],name:"text-underline-offset"},{inherited:!0,keywords:["auto","from-font","under","left","right"],name:"text-underline-position"},{inherited:!0,keywords:["wrap","nowrap","balance","pretty"],name:"text-wrap"},{name:"timeline-scope"},{keywords:["auto"],name:"top"},{keywords:["auto","none","pan-x","pan-left","pan-right","pan-y","pan-up","pan-down","pinch-zoom","manipulation"],name:"touch-action"},{keywords:["none"],name:"transform"},{keywords:["content-box","border-box","fill-box","stroke-box","view-box"],name:"transform-box"},{name:"transform-origin"},{keywords:["flat","preserve-3d"],name:"transform-style"},{longhands:["transition-property","transition-duration","transition-timing-function","transition-delay","transition-behavior"],name:"transition"},{keywords:["normal","allow-discrete"],name:"transition-behavior"},{name:"transition-delay"},{name:"transition-duration"},{keywords:["none"],name:"transition-property"},{keywords:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"],name:"transition-timing-function"},{name:"translate"},{name:"types"},{keywords:["normal","embed","bidi-override","isolate","plaintext","isolate-override"],name:"unicode-bidi"},{name:"unicode-range"},{inherited:!0,keywords:["auto","none","text","all","contain"],name:"user-select"},{keywords:["none","non-scaling-stroke"],name:"vector-effect"},{keywords:["baseline","sub","super","text-top","text-bottom","middle"],name:"vertical-align"},{longhands:["view-timeline-name","view-timeline-axis","view-timeline-inset"],name:"view-timeline"},{name:"view-timeline-axis"},{name:"view-timeline-inset"},{name:"view-timeline-name"},{keywords:["none"],name:"view-transition-class"},{keywords:["normal","contain","nearest"],name:"view-transition-group"},{keywords:["none"],name:"view-transition-name"},{inherited:!0,keywords:["visible","hidden","collapse"],name:"visibility"},{inherited:!0,longhands:["white-space-collapse","text-wrap"],name:"white-space"},{inherited:!0,keywords:["collapse","preserve","preserve-breaks","break-spaces"],name:"white-space-collapse"},{inherited:!0,name:"widows"},{keywords:["auto","fit-content","min-content","max-content"],name:"width"},{keywords:["auto"],name:"will-change"},{inherited:!0,keywords:["normal","break-all","keep-all","break-word","auto-phrase"],name:"word-break"},{inherited:!0,keywords:["normal"],name:"word-spacing"},{inherited:!0,keywords:["horizontal-tb","vertical-rl","vertical-lr","sideways-rl","sideways-lr"],name:"writing-mode"},{name:"x"},{name:"y"},{keywords:["auto"],name:"z-index"},{name:"zoom"}],p={"-webkit-box-align":{values:["stretch","start","center","end","baseline"]},"-webkit-box-decoration-break":{values:["slice","clone"]},"-webkit-box-direction":{values:["normal","reverse"]},"-webkit-box-orient":{values:["horizontal","vertical"]},"-webkit-box-pack":{values:["start","center","end","justify"]},"-webkit-line-break":{values:["auto","loose","normal","strict","after-white-space","anywhere"]},"-webkit-print-color-adjust":{values:["economy","exact"]},"-webkit-rtl-ordering":{values:["logical","visual"]},"-webkit-text-security":{values:["none","disc","circle","square"]},"-webkit-user-drag":{values:["auto","none","element"]},"-webkit-user-modify":{values:["read-only","read-write","read-write-plaintext-only"]},"accent-color":{values:["auto","currentcolor"]},"alignment-baseline":{values:["auto","baseline","alphabetic","ideographic","middle","central","mathematical","before-edge","text-before-edge","after-edge","text-after-edge","hanging"]},"anchor-name":{values:["none"]},"anchor-scope":{values:["none","all"]},"animation-composition":{values:["replace","add","accumulate"]},"animation-direction":{values:["normal","reverse","alternate","alternate-reverse"]},"animation-fill-mode":{values:["none","forwards","backwards","both"]},"animation-iteration-count":{values:["infinite"]},"animation-name":{values:["none"]},"animation-play-state":{values:["running","paused"]},"animation-timeline":{values:["none","auto"]},"animation-timing-function":{values:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"]},"app-region":{values:["none","drag","no-drag"]},"aspect-ratio":{values:["auto"]},"backdrop-filter":{values:["none"]},"backface-visibility":{values:["visible","hidden"]},"background-attachment":{values:["scroll","fixed","local"]},"background-blend-mode":{values:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},"background-clip":{values:["border-box","padding-box","content-box","text"]},"background-color":{values:["currentcolor"]},"background-image":{values:["auto","none"]},"background-origin":{values:["border-box","padding-box","content-box"]},"background-size":{values:["auto","cover","contain"]},"baseline-shift":{values:["baseline","sub","super"]},"baseline-source":{values:["auto","first","last"]},"block-size":{values:["auto"]},"border-bottom-color":{values:["currentcolor"]},"border-bottom-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-bottom-width":{values:["thin","medium","thick"]},"border-collapse":{values:["separate","collapse"]},"border-image-repeat":{values:["stretch","repeat","round","space"]},"border-image-source":{values:["none"]},"border-image-width":{values:["auto"]},"border-left-color":{values:["currentcolor"]},"border-left-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-left-width":{values:["thin","medium","thick"]},"border-right-color":{values:["currentcolor"]},"border-right-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-right-width":{values:["thin","medium","thick"]},"border-style":{values:["none"]},"border-top-color":{values:["currentcolor"]},"border-top-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-top-width":{values:["thin","medium","thick"]},bottom:{values:["auto"]},"box-decoration-break":{values:["slice","clone"]},"box-shadow":{values:["none"]},"box-sizing":{values:["content-box","border-box"]},"break-after":{values:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"]},"break-before":{values:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"]},"break-inside":{values:["auto","avoid","avoid-column","avoid-page"]},"buffered-rendering":{values:["auto","dynamic","static"]},"caption-side":{values:["top","bottom"]},"caret-color":{values:["auto","currentcolor"]},clear:{values:["none","left","right","both","inline-start","inline-end"]},clip:{values:["auto"]},"clip-path":{values:["border-box","padding-box","content-box","margin-box","fill-box","stroke-box","view-box","none"]},"clip-rule":{values:["nonzero","evenodd"]},color:{values:["currentcolor"]},"color-interpolation":{values:["auto","srgb","linearrgb"]},"color-interpolation-filters":{values:["auto","srgb","linearrgb"]},"color-rendering":{values:["auto","optimizespeed","optimizequality"]},"column-count":{values:["auto"]},"column-fill":{values:["balance","auto"]},"column-gap":{values:["normal"]},"column-rule-color":{values:["currentcolor"]},"column-rule-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"column-rule-width":{values:["thin","medium","thick"]},"column-span":{values:["none","all"]},"column-width":{values:["auto"]},contain:{values:["none","strict","content","size","layout","style","paint","inline-size","block-size"]},"contain-intrinsic-height":{values:["none"]},"contain-intrinsic-width":{values:["none"]},"container-name":{values:["none"]},"container-type":{values:["normal","inline-size","size","scroll-state"]},"content-visibility":{values:["visible","auto","hidden"]},"counter-increment":{values:["none"]},"counter-reset":{values:["none"]},"counter-set":{values:["none"]},cursor:{values:["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out","grab","grabbing"]},d:{values:["none"]},direction:{values:["ltr","rtl"]},display:{values:["inline","block","list-item","inline-block","table","inline-table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption","-webkit-box","-webkit-inline-box","flex","inline-flex","grid","inline-grid","contents","flow-root","none","flow","math","ruby","ruby-text","masonry","inline-masonry"]},"dominant-baseline":{values:["auto","alphabetic","ideographic","middle","central","mathematical","hanging","use-script","no-change","reset-size","text-after-edge","text-before-edge"]},"dynamic-range-limit":{values:["standard","high","constrained-high"]},"empty-cells":{values:["show","hide"]},"field-sizing":{values:["fixed","content"]},"fill-rule":{values:["nonzero","evenodd"]},filter:{values:["none"]},"flex-basis":{values:["auto","fit-content","min-content","max-content","content"]},"flex-direction":{values:["row","row-reverse","column","column-reverse"]},"flex-wrap":{values:["nowrap","wrap","wrap-reverse"]},float:{values:["none","left","right","inline-start","inline-end"]},"flood-color":{values:["currentcolor"]},"font-feature-settings":{values:["normal"]},"font-kerning":{values:["auto","normal","none"]},"font-optical-sizing":{values:["auto","none"]},"font-palette":{values:["normal","light","dark"]},"font-size":{values:["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller","-webkit-xxx-large"]},"font-size-adjust":{values:["none","ex-height","cap-height","ch-width","ic-width","ic-height","from-font"]},"font-stretch":{values:["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"]},"font-style":{values:["normal","italic","oblique"]},"font-synthesis-small-caps":{values:["auto","none"]},"font-synthesis-style":{values:["auto","none"]},"font-synthesis-weight":{values:["auto","none"]},"font-variant-alternates":{values:["normal"]},"font-variant-caps":{values:["normal","small-caps","all-small-caps","petite-caps","all-petite-caps","unicase","titling-caps"]},"font-variant-east-asian":{values:["normal","jis78","jis83","jis90","jis04","simplified","traditional","full-width","proportional-width","ruby"]},"font-variant-emoji":{values:["normal","text","emoji","unicode"]},"font-variant-ligatures":{values:["normal","none","common-ligatures","no-common-ligatures","discretionary-ligatures","no-discretionary-ligatures","historical-ligatures","no-historical-ligatures","contextual","no-contextual"]},"font-variant-numeric":{values:["normal","lining-nums","oldstyle-nums","proportional-nums","tabular-nums","diagonal-fractions","stacked-fractions","ordinal","slashed-zero"]},"font-variant-position":{values:["normal","sub","super"]},"font-variation-settings":{values:["normal"]},"font-weight":{values:["normal","bold","bolder","lighter"]},"forced-color-adjust":{values:["auto","none","preserve-parent-color"]},"grid-auto-columns":{values:["auto","min-content","max-content"]},"grid-auto-flow":{values:["row","column"]},"grid-auto-rows":{values:["auto","min-content","max-content"]},"grid-column-end":{values:["auto"]},"grid-column-start":{values:["auto"]},"grid-row-end":{values:["auto"]},"grid-row-start":{values:["auto"]},"grid-template-areas":{values:["none"]},"grid-template-columns":{values:["none"]},"grid-template-rows":{values:["none"]},height:{values:["auto","fit-content","min-content","max-content"]},"hyphenate-limit-chars":{values:["auto"]},hyphens:{values:["none","manual","auto"]},"image-rendering":{values:["auto","optimizespeed","optimizequality","-webkit-optimize-contrast","pixelated"]},"initial-letter":{values:["drop","normal","raise"]},"inline-size":{values:["auto"]},"inset-area":{values:["none","top","bottom","center","left","right","x-start","x-end","y-start","y-end","start","end","self-start","self-end","all"]},"interpolate-size":{values:["numeric-only","allow-keywords"]},isolation:{values:["auto","isolate"]},left:{values:["auto"]},"letter-spacing":{values:["normal"]},"lighting-color":{values:["currentcolor"]},"line-break":{values:["auto","loose","normal","strict","anywhere"]},"line-clamp":{values:["none","auto"]},"line-height":{values:["normal"]},"list-style-image":{values:["none"]},"list-style-position":{values:["outside","inside"]},"list-style-type":{values:["disc","circle","square","disclosure-open","disclosure-closed","decimal","none"]},"margin-block-end":{values:["auto"]},"margin-block-start":{values:["auto"]},"margin-bottom":{values:["auto"]},"margin-inline-end":{values:["auto"]},"margin-inline-start":{values:["auto"]},"margin-left":{values:["auto"]},"margin-right":{values:["auto"]},"margin-top":{values:["auto"]},"marker-end":{values:["none"]},"marker-mid":{values:["none"]},"marker-start":{values:["none"]},"mask-type":{values:["luminance","alpha"]},"masonry-track-end":{values:["auto"]},"masonry-track-start":{values:["auto"]},"math-shift":{values:["normal","compact"]},"math-style":{values:["normal","compact"]},"max-block-size":{values:["none"]},"max-height":{values:["none"]},"max-inline-size":{values:["none"]},"max-width":{values:["none"]},"mix-blend-mode":{values:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},"object-fit":{values:["fill","contain","cover","none","scale-down"]},"object-view-box":{values:["none"]},"offset-anchor":{values:["auto"]},"offset-path":{values:["none"]},"offset-position":{values:["auto","normal"]},"offset-rotate":{values:["auto","reverse"]},"origin-trial-test-property":{values:["normal","none"]},"outline-color":{values:["currentcolor"]},"outline-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"outline-width":{values:["thin","medium","thick"]},"overflow-anchor":{values:["visible","none","auto"]},"overflow-clip-margin":{values:["border-box","content-box","padding-box"]},"overflow-wrap":{values:["normal","break-word","anywhere"]},"overflow-x":{values:["visible","hidden","scroll","auto","overlay","clip"]},"overflow-y":{values:["visible","hidden","scroll","auto","overlay","clip"]},overlay:{values:["none","auto"]},"overscroll-behavior-x":{values:["auto","contain","none"]},"overscroll-behavior-y":{values:["auto","contain","none"]},page:{values:["auto"]},"paint-order":{values:["normal","fill","stroke","markers"]},perspective:{values:["none"]},"pointer-events":{values:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","bounding-box","all"]},position:{values:["static","relative","absolute","fixed","sticky"]},"position-anchor":{values:["auto"]},"position-area":{values:["none","top","bottom","center","left","right","x-start","x-end","y-start","y-end","start","end","self-start","self-end","all"]},"position-try-fallbacks":{values:["none","flip-block","flip-inline","flip-start"]},"position-try-order":{values:["normal","most-width","most-height","most-block-size","most-inline-size"]},"position-visibility":{values:["always","anchors-visible","no-overflow"]},quotes:{values:["auto","none"]},"reading-flow":{values:["normal","flex-visual","flex-flow","grid-rows","grid-columns","grid-order"]},resize:{values:["none","both","horizontal","vertical","block","inline"]},right:{values:["auto"]},"row-gap":{values:["normal"]},"ruby-align":{values:["space-around","start","center","space-between"]},"ruby-position":{values:["over","under"]},rx:{values:["auto"]},ry:{values:["auto"]},"scroll-behavior":{values:["auto","smooth"]},"scroll-marker-group":{values:["none","after","before"]},"scroll-padding-block-end":{values:["auto"]},"scroll-padding-block-start":{values:["auto"]},"scroll-padding-bottom":{values:["auto"]},"scroll-padding-inline-end":{values:["auto"]},"scroll-padding-inline-start":{values:["auto"]},"scroll-padding-left":{values:["auto"]},"scroll-padding-right":{values:["auto"]},"scroll-padding-top":{values:["auto"]},"scroll-snap-align":{values:["none","start","end","center"]},"scroll-snap-stop":{values:["normal","always"]},"scroll-snap-type":{values:["none","x","y","block","inline","both","mandatory","proximity"]},"scroll-start-target-x":{values:["none","auto"]},"scroll-start-target-y":{values:["none","auto"]},"scrollbar-color":{values:["auto"]},"scrollbar-gutter":{values:["auto","stable","both-edges"]},"scrollbar-width":{values:["auto","thin","none"]},"shape-margin":{values:["none"]},"shape-outside":{values:["none"]},"shape-rendering":{values:["auto","optimizespeed","crispedges","geometricprecision"]},speak:{values:["none","normal","spell-out","digits","literal-punctuation","no-punctuation"]},"stop-color":{values:["currentcolor"]},"stroke-dasharray":{values:["none"]},"stroke-linecap":{values:["butt","round","square"]},"stroke-linejoin":{values:["miter","bevel","round"]},"table-layout":{values:["auto","fixed"]},"text-align":{values:["left","right","center","justify","-webkit-left","-webkit-right","-webkit-center","start","end"]},"text-align-last":{values:["auto","start","end","left","right","center","justify"]},"text-anchor":{values:["start","middle","end"]},"text-autospace":{values:["normal","no-autospace"]},"text-box-trim":{values:["none","trim-start","trim-end","trim-both"]},"text-combine-upright":{values:["none","all"]},"text-decoration-color":{values:["currentcolor"]},"text-decoration-line":{values:["none","underline","overline","line-through","blink","spelling-error","grammar-error"]},"text-decoration-skip-ink":{values:["none","auto"]},"text-decoration-style":{values:["solid","double","dotted","dashed","wavy"]},"text-decoration-thickness":{values:["auto","from-font"]},"text-emphasis-color":{values:["currentcolor"]},"text-orientation":{values:["sideways","mixed","upright"]},"text-overflow":{values:["clip","ellipsis"]},"text-rendering":{values:["auto","optimizespeed","optimizelegibility","geometricprecision"]},"text-shadow":{values:["none"]},"text-size-adjust":{values:["none","auto"]},"text-spacing-trim":{values:["normal","space-all","space-first","trim-start"]},"text-transform":{values:["capitalize","uppercase","lowercase","none","math-auto"]},"text-underline-offset":{values:["auto"]},"text-underline-position":{values:["auto","from-font","under","left","right"]},"text-wrap":{values:["wrap","nowrap","balance","pretty"]},top:{values:["auto"]},"touch-action":{values:["auto","none","pan-x","pan-left","pan-right","pan-y","pan-up","pan-down","pinch-zoom","manipulation"]},transform:{values:["none"]},"transform-box":{values:["content-box","border-box","fill-box","stroke-box","view-box"]},"transform-style":{values:["flat","preserve-3d"]},"transition-behavior":{values:["normal","allow-discrete"]},"transition-property":{values:["none"]},"transition-timing-function":{values:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"]},"unicode-bidi":{values:["normal","embed","bidi-override","isolate","plaintext","isolate-override"]},"user-select":{values:["auto","none","text","all","contain"]},"vector-effect":{values:["none","non-scaling-stroke"]},"vertical-align":{values:["baseline","sub","super","text-top","text-bottom","middle"]},"view-transition-class":{values:["none"]},"view-transition-group":{values:["normal","contain","nearest"]},"view-transition-name":{values:["none"]},visibility:{values:["visible","hidden","collapse"]},"white-space-collapse":{values:["collapse","preserve","preserve-breaks","break-spaces"]},width:{values:["auto","fit-content","min-content","max-content"]},"will-change":{values:["auto"]},"word-break":{values:["normal","break-all","keep-all","break-word","auto-phrase"]},"word-spacing":{values:["normal"]},"writing-mode":{values:["horizontal-tb","vertical-rl","vertical-lr","sideways-rl","sideways-lr"]},"z-index":{values:["auto"]}},m=new Map([["-epub-caption-side","caption-side"],["-epub-text-combine","-webkit-text-combine"],["-epub-text-emphasis","text-emphasis"],["-epub-text-emphasis-color","text-emphasis-color"],["-epub-text-emphasis-style","text-emphasis-style"],["-epub-text-orientation","-webkit-text-orientation"],["-epub-text-transform","text-transform"],["-epub-word-break","word-break"],["-epub-writing-mode","-webkit-writing-mode"],["-webkit-align-content","align-content"],["-webkit-align-items","align-items"],["-webkit-align-self","align-self"],["-webkit-alternative-animation-with-timeline","-alternative-animation-with-timeline"],["-webkit-animation","animation"],["-webkit-animation-delay","animation-delay"],["-webkit-animation-direction","animation-direction"],["-webkit-animation-duration","animation-duration"],["-webkit-animation-fill-mode","animation-fill-mode"],["-webkit-animation-iteration-count","animation-iteration-count"],["-webkit-animation-name","animation-name"],["-webkit-animation-play-state","animation-play-state"],["-webkit-animation-timing-function","animation-timing-function"],["-webkit-app-region","app-region"],["-webkit-appearance","appearance"],["-webkit-backface-visibility","backface-visibility"],["-webkit-background-clip","background-clip"],["-webkit-background-origin","background-origin"],["-webkit-background-size","background-size"],["-webkit-border-after","border-block-end"],["-webkit-border-after-color","border-block-end-color"],["-webkit-border-after-style","border-block-end-style"],["-webkit-border-after-width","border-block-end-width"],["-webkit-border-before","border-block-start"],["-webkit-border-before-color","border-block-start-color"],["-webkit-border-before-style","border-block-start-style"],["-webkit-border-before-width","border-block-start-width"],["-webkit-border-bottom-left-radius","border-bottom-left-radius"],["-webkit-border-bottom-right-radius","border-bottom-right-radius"],["-webkit-border-end","border-inline-end"],["-webkit-border-end-color","border-inline-end-color"],["-webkit-border-end-style","border-inline-end-style"],["-webkit-border-end-width","border-inline-end-width"],["-webkit-border-radius","border-radius"],["-webkit-border-start","border-inline-start"],["-webkit-border-start-color","border-inline-start-color"],["-webkit-border-start-style","border-inline-start-style"],["-webkit-border-start-width","border-inline-start-width"],["-webkit-border-top-left-radius","border-top-left-radius"],["-webkit-border-top-right-radius","border-top-right-radius"],["-webkit-box-shadow","box-shadow"],["-webkit-box-sizing","box-sizing"],["-webkit-clip-path","clip-path"],["-webkit-column-count","column-count"],["-webkit-column-gap","column-gap"],["-webkit-column-rule","column-rule"],["-webkit-column-rule-color","column-rule-color"],["-webkit-column-rule-style","column-rule-style"],["-webkit-column-rule-width","column-rule-width"],["-webkit-column-span","column-span"],["-webkit-column-width","column-width"],["-webkit-columns","columns"],["-webkit-filter","filter"],["-webkit-flex","flex"],["-webkit-flex-basis","flex-basis"],["-webkit-flex-direction","flex-direction"],["-webkit-flex-flow","flex-flow"],["-webkit-flex-grow","flex-grow"],["-webkit-flex-shrink","flex-shrink"],["-webkit-flex-wrap","flex-wrap"],["-webkit-font-feature-settings","font-feature-settings"],["-webkit-hyphenate-character","hyphenate-character"],["-webkit-justify-content","justify-content"],["-webkit-logical-height","block-size"],["-webkit-logical-width","inline-size"],["-webkit-margin-after","margin-block-end"],["-webkit-margin-before","margin-block-start"],["-webkit-margin-end","margin-inline-end"],["-webkit-margin-start","margin-inline-start"],["-webkit-mask","mask"],["-webkit-mask-clip","mask-clip"],["-webkit-mask-composite","mask-composite"],["-webkit-mask-image","mask-image"],["-webkit-mask-origin","mask-origin"],["-webkit-mask-position","mask-position"],["-webkit-mask-repeat","mask-repeat"],["-webkit-mask-size","mask-size"],["-webkit-max-logical-height","max-block-size"],["-webkit-max-logical-width","max-inline-size"],["-webkit-min-logical-height","min-block-size"],["-webkit-min-logical-width","min-inline-size"],["-webkit-opacity","opacity"],["-webkit-order","order"],["-webkit-padding-after","padding-block-end"],["-webkit-padding-before","padding-block-start"],["-webkit-padding-end","padding-inline-end"],["-webkit-padding-start","padding-inline-start"],["-webkit-perspective","perspective"],["-webkit-perspective-origin","perspective-origin"],["-webkit-shape-image-threshold","shape-image-threshold"],["-webkit-shape-margin","shape-margin"],["-webkit-shape-outside","shape-outside"],["-webkit-text-emphasis","text-emphasis"],["-webkit-text-emphasis-color","text-emphasis-color"],["-webkit-text-emphasis-position","text-emphasis-position"],["-webkit-text-emphasis-style","text-emphasis-style"],["-webkit-text-size-adjust","text-size-adjust"],["-webkit-transform","transform"],["-webkit-transform-origin","transform-origin"],["-webkit-transform-style","transform-style"],["-webkit-transition","transition"],["-webkit-transition-delay","transition-delay"],["-webkit-transition-duration","transition-duration"],["-webkit-transition-property","transition-property"],["-webkit-transition-timing-function","transition-timing-function"],["-webkit-user-select","user-select"],["grid-column-gap","column-gap"],["grid-gap","gap"],["grid-row-gap","row-gap"],["word-wrap","overflow-wrap"]]);class f{#t;#r;#n;#s;#i;#o;#a;#l;#d;#c;constructor(e,t){this.#t=[],this.#r=new Map,this.#n=new Map,this.#s=new Set,this.#i=new Set,this.#o=new Map,this.#a=t;for(let t=0;t<e.length;++t){const r=e[t],n=r.name;if(!CSS.supports(n,"initial"))continue;this.#t.push(n),r.inherited&&this.#s.add(n),r.svg&&this.#i.add(n);const s=e[t].longhands;if(s){this.#r.set(n,s);for(let e=0;e<s.length;++e){const t=s[e];let r=this.#n.get(t);r||(r=[],this.#n.set(t,r)),r.push(n)}}}this.#t.sort(f.sortPrefixesAndCSSWideKeywordsToEnd),this.#l=new Set(this.#t);const r=new Map;for(const[e,t]of Object.entries(p))r.set(e,new Set(t.values));for(const[e,t]of P){const n=r.get(e);n?r.set(e,n.union(t)):r.set(e,t)}for(const[e,t]of r){for(const r of E)!t.has(r)&&CSS.supports(e,r)&&t.add(r);this.#o.set(e,[...t])}this.#d=[],this.#c=[];for(const e of this.#l){const t=this.specificPropertyValues(e).filter((t=>CSS.supports(e,t))).sort(f.sortPrefixesAndCSSWideKeywordsToEnd).map((t=>`${e}: ${t}`));this.isSVGProperty(e)||this.#d.push(...t),this.#c.push(...t)}}static sortPrefixesAndCSSWideKeywordsToEnd(e,t){const r=b.includes(e),n=b.includes(t);if(r&&!n)return 1;if(!r&&n)return-1;const s=e.startsWith("-webkit-"),i=t.startsWith("-webkit-");return s&&!i?1:!s&&i||e<t?-1:e>t?1:0}allProperties(){return this.#t}aliasesFor(){return this.#a}nameValuePresets(e){return e?this.#c:this.#d}isSVGProperty(e){return e=e.toLowerCase(),this.#i.has(e)}getLonghands(e){return this.#r.get(e)||null}getShorthands(e){return this.#n.get(e)||null}isColorAwareProperty(e){return T.has(e.toLowerCase())||this.isCustomProperty(e.toLowerCase())}isFontFamilyProperty(e){return"font-family"===e.toLowerCase()}isAngleAwareProperty(e){const t=e.toLowerCase();return T.has(t)||M.has(t)}isGridAreaDefiningProperty(e){return"grid"===(e=e.toLowerCase())||"grid-template"===e||"grid-template-areas"===e}isGridColumnNameAwareProperty(e){return e=e.toLowerCase(),["grid-column","grid-column-start","grid-column-end"].includes(e)}isGridRowNameAwareProperty(e){return e=e.toLowerCase(),["grid-row","grid-row-start","grid-row-end"].includes(e)}isGridAreaNameAwareProperty(e){return"grid-area"===(e=e.toLowerCase())}isGridNameAwareProperty(e){return this.isGridAreaNameAwareProperty(e)||this.isGridColumnNameAwareProperty(e)||this.isGridRowNameAwareProperty(e)}isLengthProperty(e){return"line-height"!==(e=e.toLowerCase())&&(C.has(e)||e.startsWith("margin")||e.startsWith("padding")||-1!==e.indexOf("width")||-1!==e.indexOf("height"))}isBezierAwareProperty(e){return e=e.toLowerCase(),x.has(e)||this.isCustomProperty(e)}isFontAwareProperty(e){return e=e.toLowerCase(),R.has(e)||this.isCustomProperty(e)}isCustomProperty(e){return e.startsWith("--")}isShadowProperty(e){return"box-shadow"===(e=e.toLowerCase())||"text-shadow"===e||"-webkit-box-shadow"===e}isStringProperty(e){return"content"===(e=e.toLowerCase())}canonicalPropertyName(e){if(this.isCustomProperty(e))return e;e=e.toLowerCase();const t=this.#a.get(e);if(t)return t;if(!e||e.length<9||"-"!==e.charAt(0))return e;const r=e.match(/(?:-webkit-)(.+)/);return r&&this.#l.has(r[1])?r[1]:e}isCSSPropertyName(e){return!!((e=e.toLowerCase()).startsWith("--")&&e.length>2||e.startsWith("-moz-")||e.startsWith("-ms-")||e.startsWith("-o-")||e.startsWith("-webkit-"))||this.#l.has(e)}isPropertyInherited(e){return(e=e.toLowerCase()).startsWith("--")||this.#s.has(this.canonicalPropertyName(e))||this.#s.has(e)}specificPropertyValues(e){const t=e.replace(/^-webkit-/,""),r=this.#o;let n=r.get(e)||r.get(t);if(!n){n=[];for(const t of E)CSS.supports(e,t)&&n.push(t);r.set(e,n)}return n}getPropertyValues(t){t=t.toLowerCase();const r=[...this.specificPropertyValues(t),...b];if(this.isColorAwareProperty(t)){r.push("currentColor");for(const t of e.Color.Nicknames.keys())r.push(t)}return r.sort(f.sortPrefixesAndCSSWideKeywordsToEnd)}propertyUsageWeight(e){return L.get(e)||L.get(this.canonicalPropertyName(e))||0}getValuePreset(e,t){const r=S.get(e);let n=r?r.get(t):null;if(!n)return null;let s=n.length,i=n.length;return n&&(s=n.indexOf("|"),i=n.lastIndexOf("|"),i=s===i?i:i-1,n=n.replace(/\|/g,"")),{text:n,startColumn:s,endColumn:i}}isHighlightPseudoType(e){return"highlight"===e||"selection"===e||"target-text"===e||"grammar-error"===e||"spelling-error"===e}}const b=["inherit","initial","revert","revert-layer","unset"],y=/((?:\[[\w\- ]+\]\s*)*(?:"[^"]+"|'[^']+'))[^'"\[]*\[?[^'"\[]*/;let v=null;function k(){if(!v){v=new f(g,m)}return v}const I=new Map([["linear-gradient","linear-gradient(|45deg, black, transparent|)"],["radial-gradient","radial-gradient(|black, transparent|)"],["repeating-linear-gradient","repeating-linear-gradient(|45deg, black, transparent 100px|)"],["repeating-radial-gradient","repeating-radial-gradient(|black, transparent 100px|)"],["url","url(||)"]]),w=new Map([["blur","blur(|1px|)"],["brightness","brightness(|0.5|)"],["contrast","contrast(|0.5|)"],["drop-shadow","drop-shadow(|2px 4px 6px black|)"],["grayscale","grayscale(|1|)"],["hue-rotate","hue-rotate(|45deg|)"],["invert","invert(|1|)"],["opacity","opacity(|0.5|)"],["saturate","saturate(|0.5|)"],["sepia","sepia(|1|)"],["url","url(||)"]]),S=new Map([["filter",w],["backdrop-filter",w],["background",I],["background-image",I],["-webkit-mask-image",I],["transform",new Map([["scale","scale(|1.5|)"],["scaleX","scaleX(|1.5|)"],["scaleY","scaleY(|1.5|)"],["scale3d","scale3d(|1.5, 1.5, 1.5|)"],["rotate","rotate(|45deg|)"],["rotateX","rotateX(|45deg|)"],["rotateY","rotateY(|45deg|)"],["rotateZ","rotateZ(|45deg|)"],["rotate3d","rotate3d(|1, 1, 1, 45deg|)"],["skew","skew(|10deg, 10deg|)"],["skewX","skewX(|10deg|)"],["skewY","skewY(|10deg|)"],["translate","translate(|10px, 10px|)"],["translateX","translateX(|10px|)"],["translateY","translateY(|10px|)"],["translateZ","translateZ(|10px|)"],["translate3d","translate3d(|10px, 10px, 10px|)"],["matrix","matrix(|1, 0, 0, 1, 0, 0|)"],["matrix3d","matrix3d(|1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1|)"],["perspective","perspective(|10px|)"]])]]),C=new Set(["background-position","border-spacing","bottom","font-size","height","left","letter-spacing","max-height","max-width","min-height","min-width","right","text-indent","top","width","word-spacing","grid-row-gap","grid-column-gap","row-gap"]),x=new Set(["animation","animation-timing-function","transition","transition-timing-function","-webkit-animation","-webkit-animation-timing-function","-webkit-transition","-webkit-transition-timing-function"]),R=new Set(["font-size","line-height","font-weight","font-family","letter-spacing"]),T=new Set(["accent-color","background","background-color","background-image","border","border-color","border-image","border-image-source","border-bottom","border-bottom-color","border-left","border-left-color","border-right","border-right-color","border-top","border-top-color","border-block-end","border-block-end-color","border-block-start","border-block-start-color","border-inline-end","border-inline-end-color","border-inline-start","border-inline-start-color","box-shadow","caret-color","color","column-rule","column-rule-color","content","fill","list-style-image","mask","mask-image","mask-border","mask-border-source","outline","outline-color","scrollbar-color","stop-color","stroke","text-decoration-color","text-shadow","-webkit-border-after","-webkit-border-after-color","-webkit-border-before","-webkit-border-before-color","-webkit-border-end","-webkit-border-end-color","-webkit-border-start","-webkit-border-start-color","-webkit-box-reflect","-webkit-box-shadow","-webkit-column-rule-color","-webkit-mask","-webkit-mask-box-image","-webkit-mask-box-image-source","-webkit-mask-image","-webkit-tap-highlight-color","-webkit-text-emphasis","-webkit-text-emphasis-color","-webkit-text-fill-color","-webkit-text-stroke","-webkit-text-stroke-color"]),M=new Set(["-webkit-border-image","transform","-webkit-transform","rotate","filter","-webkit-filter","backdrop-filter","offset","offset-rotate","font-style"]),P=new Map([["background-repeat",new Set(["repeat","repeat-x","repeat-y","no-repeat","space","round"])],["content",new Set(["normal","close-quote","no-close-quote","no-open-quote","open-quote"])],["baseline-shift",new Set(["baseline"])],["max-height",new Set(["min-content","max-content","-webkit-fill-available","fit-content"])],["color",new Set(["black"])],["background-color",new Set(["white"])],["box-shadow",new Set(["inset"])],["text-shadow",new Set(["0 0 black"])],["-webkit-writing-mode",new Set(["horizontal-tb","vertical-rl","vertical-lr"])],["writing-mode",new Set(["lr","rl","tb","lr-tb","rl-tb","tb-rl"])],["page-break-inside",new Set(["avoid"])],["cursor",new Set(["-webkit-zoom-in","-webkit-zoom-out","-webkit-grab","-webkit-grabbing"])],["border-width",new Set(["medium","thick","thin"])],["border-style",new Set(["hidden","inset","groove","ridge","outset","dotted","dashed","solid","double"])],["size",new Set(["a3","a4","a5","b4","b5","landscape","ledger","legal","letter","portrait"])],["overflow",new Set(["hidden","visible","overlay","scroll"])],["overscroll-behavior",new Set(["contain"])],["text-rendering",new Set(["optimizeSpeed","optimizeLegibility","geometricPrecision"])],["text-align",new Set(["-webkit-auto","-webkit-match-parent"])],["clip-path",new Set(["circle","ellipse","inset","polygon","url"])],["color-interpolation",new Set(["sRGB","linearRGB"])],["word-wrap",new Set(["normal","break-word"])],["font-weight",new Set(["100","200","300","400","500","600","700","800","900"])],["-webkit-text-emphasis",new Set(["circle","filled","open","dot","double-circle","triangle","sesame"])],["color-rendering",new Set(["optimizeSpeed","optimizeQuality"])],["-webkit-text-combine",new Set(["horizontal"])],["text-orientation",new Set(["sideways-right"])],["outline",new Set(["inset","groove","ridge","outset","dotted","dashed","solid","double","medium","thick","thin"])],["font",new Set(["caption","icon","menu","message-box","small-caption","-webkit-mini-control","-webkit-small-control","-webkit-control","status-bar"])],["dominant-baseline",new Set(["text-before-edge","text-after-edge","use-script","no-change","reset-size"])],["-webkit-text-emphasis-position",new Set(["over","under"])],["alignment-baseline",new Set(["before-edge","after-edge","text-before-edge","text-after-edge","hanging"])],["page-break-before",new Set(["left","right","always","avoid"])],["border-image",new Set(["repeat","stretch","space","round"])],["text-decoration",new Set(["blink","line-through","overline","underline","wavy","double","solid","dashed","dotted"])],["font-family",new Set(["serif","sans-serif","cursive","fantasy","monospace","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","-webkit-body"])],["zoom",new Set(["normal"])],["max-width",new Set(["min-content","max-content","-webkit-fill-available","fit-content"])],["-webkit-font-smoothing",new Set(["antialiased","subpixel-antialiased"])],["border",new Set(["hidden","inset","groove","ridge","outset","dotted","dashed","solid","double","medium","thick","thin"])],["font-variant",new Set(["small-caps","normal","common-ligatures","no-common-ligatures","discretionary-ligatures","no-discretionary-ligatures","historical-ligatures","no-historical-ligatures","contextual","no-contextual","all-small-caps","petite-caps","all-petite-caps","unicase","titling-caps","lining-nums","oldstyle-nums","proportional-nums","tabular-nums","diagonal-fractions","stacked-fractions","ordinal","slashed-zero","jis78","jis83","jis90","jis04","simplified","traditional","full-width","proportional-width","ruby"])],["vertical-align",new Set(["top","bottom","-webkit-baseline-middle"])],["page-break-after",new Set(["left","right","always","avoid"])],["-webkit-text-emphasis-style",new Set(["circle","filled","open","dot","double-circle","triangle","sesame"])],["transform",new Set(["scale","scaleX","scaleY","scale3d","rotate","rotateX","rotateY","rotateZ","rotate3d","skew","skewX","skewY","translate","translateX","translateY","translateZ","translate3d","matrix","matrix3d","perspective"])],["align-content",new Set(["normal","baseline","space-between","space-around","space-evenly","stretch","center","start","end","flex-start","flex-end"])],["justify-content",new Set(["normal","space-between","space-around","space-evenly","stretch","center","start","end","flex-start","flex-end","left","right"])],["place-content",new Set(["normal","space-between","space-around","space-evenly","stretch","center","start","end","flex-start","flex-end","baseline"])],["align-items",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end"])],["justify-items",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","left","right","legacy"])],["place-items",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end"])],["align-self",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end"])],["justify-self",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","left","right"])],["place-self",new Set(["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end"])],["perspective-origin",new Set(["left","center","right","top","bottom"])],["transform-origin",new Set(["left","center","right","top","bottom"])],["transition-timing-function",new Set(["cubic-bezier","steps"])],["animation-timing-function",new Set(["cubic-bezier","steps"])],["-webkit-backface-visibility",new Set(["visible","hidden"])],["-webkit-column-break-after",new Set(["always","avoid"])],["-webkit-column-break-before",new Set(["always","avoid"])],["-webkit-column-break-inside",new Set(["avoid"])],["-webkit-column-span",new Set(["all"])],["-webkit-column-gap",new Set(["normal"])],["filter",new Set(["url","blur","brightness","contrast","drop-shadow","grayscale","hue-rotate","invert","opacity","saturate","sepia"])],["backdrop-filter",new Set(["url","blur","brightness","contrast","drop-shadow","grayscale","hue-rotate","invert","opacity","saturate","sepia"])],["grid-template-columns",new Set(["min-content","max-content"])],["grid-template-rows",new Set(["min-content","max-content"])],["grid-auto-flow",new Set(["dense"])],["background",new Set(["repeat","repeat-x","repeat-y","no-repeat","top","bottom","left","right","center","fixed","local","scroll","space","round","border-box","content-box","padding-box","linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","url"])],["background-image",new Set(["linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","url"])],["background-position",new Set(["top","bottom","left","right","center"])],["background-position-x",new Set(["left","right","center"])],["background-position-y",new Set(["top","bottom","center"])],["background-repeat-x",new Set(["repeat","no-repeat"])],["background-repeat-y",new Set(["repeat","no-repeat"])],["border-bottom",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["border-left",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["border-right",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["border-top",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["buffered-rendering",new Set(["static","dynamic"])],["color-interpolation-filters",new Set(["srgb","linearrgb"])],["column-rule",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["flex-flow",new Set(["nowrap","row","row-reverse","column","column-reverse","wrap","wrap-reverse"])],["height",new Set(["-webkit-fill-available"])],["inline-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["list-style",new Set(["outside","inside","disc","circle","square","decimal","decimal-leading-zero","arabic-indic","bengali","cambodian","khmer","devanagari","gujarati","gurmukhi","kannada","lao","malayalam","mongolian","myanmar","oriya","persian","urdu","telugu","tibetan","thai","lower-roman","upper-roman","lower-greek","lower-alpha","lower-latin","upper-alpha","upper-latin","cjk-earthly-branch","cjk-heavenly-stem","ethiopic-halehame","ethiopic-halehame-am","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","hangul","hangul-consonant","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","hebrew","armenian","lower-armenian","upper-armenian","georgian","cjk-ideographic","simp-chinese-formal","simp-chinese-informal","trad-chinese-formal","trad-chinese-informal","hiragana","katakana","hiragana-iroha","katakana-iroha"])],["max-block-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["max-inline-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["min-block-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["min-height",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["min-inline-size",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["min-width",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["object-position",new Set(["top","bottom","left","right","center"])],["shape-outside",new Set(["border-box","content-box","padding-box","margin-box"])],["-webkit-appearance",new Set(["checkbox","radio","push-button","square-button","button","inner-spin-button","listbox","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","menulist","menulist-button","meter","progress-bar","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","searchfield","searchfield-cancel-button","textfield","textarea"])],["-webkit-border-after",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["-webkit-border-after-style",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"])],["-webkit-border-after-width",new Set(["medium","thick","thin"])],["-webkit-border-before",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["-webkit-border-before-style",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"])],["-webkit-border-before-width",new Set(["medium","thick","thin"])],["-webkit-border-end",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["-webkit-border-end-style",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"])],["-webkit-border-end-width",new Set(["medium","thick","thin"])],["-webkit-border-start",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"])],["-webkit-border-start-style",new Set(["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"])],["-webkit-border-start-width",new Set(["medium","thick","thin"])],["-webkit-logical-height",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-logical-width",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-mask-box-image",new Set(["repeat","stretch","space","round"])],["-webkit-mask-box-image-repeat",new Set(["repeat","stretch","space","round"])],["-webkit-mask-clip",new Set(["text","border","border-box","content","content-box","padding","padding-box"])],["-webkit-mask-composite",new Set(["clear","copy","source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","xor","plus-lighter"])],["-webkit-mask-image",new Set(["linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","url"])],["-webkit-mask-origin",new Set(["border","border-box","content","content-box","padding","padding-box"])],["-webkit-mask-position",new Set(["top","bottom","left","right","center"])],["-webkit-mask-position-x",new Set(["left","right","center"])],["-webkit-mask-position-y",new Set(["top","bottom","center"])],["-webkit-mask-repeat",new Set(["repeat","repeat-x","repeat-y","no-repeat","space","round"])],["-webkit-mask-size",new Set(["contain","cover"])],["-webkit-max-logical-height",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-max-logical-width",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-min-logical-height",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-min-logical-width",new Set(["-webkit-fill-available","min-content","max-content","fit-content"])],["-webkit-perspective-origin-x",new Set(["left","right","center"])],["-webkit-perspective-origin-y",new Set(["top","bottom","center"])],["-webkit-text-decorations-in-effect",new Set(["blink","line-through","overline","underline"])],["-webkit-text-stroke",new Set(["medium","thick","thin"])],["-webkit-text-stroke-width",new Set(["medium","thick","thin"])],["-webkit-transform-origin-x",new Set(["left","right","center"])],["-webkit-transform-origin-y",new Set(["top","bottom","center"])],["width",new Set(["-webkit-fill-available"])],["contain-intrinsic-width",new Set(["auto none","auto 100px"])],["contain-intrinsic-height",new Set(["auto none","auto 100px"])],["contain-intrinsic-size",new Set(["auto none","auto 100px"])],["contain-intrinsic-inline-size",new Set(["auto none","auto 100px"])],["contain-intrinsic-block-size",new Set(["auto none","auto 100px"])],["white-space",new Set(["normal","pre","pre-wrap","pre-line","nowrap","break-spaces"])],["text-box-edge",new Set(["auto","text","cap","ex","text alphabetic","cap alphabetic","ex alphabetic"])]]),L=new Map([["align-content",57],["align-items",129],["align-self",55],["animation",175],["animation-delay",114],["animation-direction",113],["animation-duration",137],["animation-fill-mode",132],["animation-iteration-count",124],["animation-name",139],["animation-play-state",104],["animation-timing-function",141],["backface-visibility",123],["background",260],["background-attachment",119],["background-clip",165],["background-color",259],["background-image",246],["background-origin",107],["background-position",237],["background-position-x",108],["background-position-y",93],["background-repeat",234],["background-size",203],["border",263],["border-bottom",233],["border-bottom-color",190],["border-bottom-left-radius",186],["border-bottom-right-radius",185],["border-bottom-style",150],["border-bottom-width",179],["border-collapse",209],["border-color",226],["border-image",89],["border-image-outset",50],["border-image-repeat",49],["border-image-slice",58],["border-image-source",32],["border-image-width",52],["border-left",221],["border-left-color",174],["border-left-style",142],["border-left-width",172],["border-radius",224],["border-right",223],["border-right-color",182],["border-right-style",130],["border-right-width",178],["border-spacing",198],["border-style",206],["border-top",231],["border-top-color",192],["border-top-left-radius",187],["border-top-right-radius",189],["border-top-style",152],["border-top-width",180],["border-width",214],["bottom",227],["box-shadow",213],["box-sizing",216],["caption-side",96],["clear",229],["clip",173],["clip-rule",5],["color",256],["content",219],["counter-increment",111],["counter-reset",110],["cursor",250],["direction",176],["display",262],["empty-cells",99],["fill",140],["fill-opacity",82],["fill-rule",22],["filter",160],["flex",133],["flex-basis",66],["flex-direction",85],["flex-flow",94],["flex-grow",112],["flex-shrink",61],["flex-wrap",68],["float",252],["font",211],["font-family",254],["font-kerning",18],["font-size",264],["font-stretch",77],["font-style",220],["font-variant",161],["font-weight",257],["height",266],["image-rendering",90],["justify-content",127],["left",248],["letter-spacing",188],["line-height",244],["list-style",215],["list-style-image",145],["list-style-position",149],["list-style-type",199],["margin",267],["margin-bottom",241],["margin-left",243],["margin-right",238],["margin-top",253],["mask",20],["max-height",205],["max-width",225],["min-height",217],["min-width",218],["object-fit",33],["opacity",251],["order",117],["orphans",146],["outline",222],["outline-color",153],["outline-offset",147],["outline-style",151],["outline-width",148],["overflow",255],["overflow-wrap",105],["overflow-x",184],["overflow-y",196],["padding",265],["padding-bottom",230],["padding-left",235],["padding-right",232],["padding-top",240],["page",8],["page-break-after",120],["page-break-before",69],["page-break-inside",121],["perspective",92],["perspective-origin",103],["pointer-events",183],["position",261],["quotes",158],["resize",168],["right",245],["shape-rendering",38],["size",64],["speak",118],["src",170],["stop-color",42],["stop-opacity",31],["stroke",98],["stroke-dasharray",36],["stroke-dashoffset",3],["stroke-linecap",30],["stroke-linejoin",21],["stroke-miterlimit",12],["stroke-opacity",34],["stroke-width",87],["table-layout",171],["tab-size",46],["text-align",260],["text-anchor",35],["text-decoration",247],["text-indent",207],["text-overflow",204],["text-rendering",155],["text-shadow",208],["text-transform",202],["top",258],["touch-action",80],["transform",181],["transform-origin",162],["transform-style",86],["transition",193],["transition-delay",134],["transition-duration",135],["transition-property",131],["transition-timing-function",122],["unicode-bidi",156],["unicode-range",136],["vertical-align",236],["visibility",242],["-webkit-appearance",191],["-webkit-backface-visibility",154],["-webkit-background-clip",164],["-webkit-background-origin",40],["-webkit-background-size",163],["-webkit-border-end",9],["-webkit-border-horizontal-spacing",81],["-webkit-border-image",75],["-webkit-border-radius",212],["-webkit-border-start",10],["-webkit-border-start-color",16],["-webkit-border-start-width",13],["-webkit-border-vertical-spacing",43],["-webkit-box-align",101],["-webkit-box-direction",51],["-webkit-box-flex",128],["-webkit-box-ordinal-group",91],["-webkit-box-orient",144],["-webkit-box-pack",106],["-webkit-box-reflect",39],["-webkit-box-shadow",210],["-webkit-column-break-inside",60],["-webkit-column-count",84],["-webkit-column-gap",76],["-webkit-column-rule",25],["-webkit-column-rule-color",23],["-webkit-columns",44],["-webkit-column-span",29],["-webkit-column-width",47],["-webkit-filter",159],["-webkit-font-feature-settings",59],["-webkit-font-smoothing",177],["-webkit-line-break",45],["-webkit-line-clamp",126],["-webkit-margin-after",67],["-webkit-margin-before",70],["-webkit-margin-collapse",14],["-webkit-margin-end",65],["-webkit-margin-start",100],["-webkit-mask",19],["-webkit-mask-box-image",72],["-webkit-mask-image",88],["-webkit-mask-position",54],["-webkit-mask-repeat",63],["-webkit-mask-size",79],["-webkit-padding-after",15],["-webkit-padding-before",28],["-webkit-padding-end",48],["-webkit-padding-start",73],["-webkit-print-color-adjust",83],["-webkit-rtl-ordering",7],["-webkit-tap-highlight-color",169],["-webkit-text-emphasis-color",11],["-webkit-text-fill-color",71],["-webkit-text-security",17],["-webkit-text-stroke",56],["-webkit-text-stroke-color",37],["-webkit-text-stroke-width",53],["-webkit-user-drag",95],["-webkit-user-modify",62],["-webkit-user-select",194],["-webkit-writing-mode",4],["white-space",228],["widows",115],["width",268],["will-change",74],["word-break",166],["word-spacing",157],["word-wrap",197],["writing-mode",41],["z-index",239],["zoom",200]]),E=["auto","none"];var A=Object.freeze({__proto__:null,CSSMetadata:f,CSSWideKeywords:b,VariableNameRegex:/(\s*--.*?)/gs,VariableRegex:/(var\(\s*--.*?\))/gs,CustomVariableRegex:/(var\(*--[\w\d]+-([\w]+-[\w]+)\))/g,URLRegex:/url\(\s*('.+?'|".+?"|[^)]+)\s*\)/g,GridAreaRowRegex:y,cssMetadata:k});class O extends t.ProfileTreeModel.ProfileTreeModel{}var D=Object.freeze({__proto__:null,ProfileTreeModel:O});const N="<opaque>";class F{#h;#u;#g;#p;#m;#f;#b;#y;constructor(e,t,r,n,s){this.#h=e,this.#u=t,this.#g=r,this.#p=new Map,this.#m=0,this.#f=n||"Medium",this.#b=null,this.#y=s}static fromProtocolCookie(e){const t=new F(e.name,e.value,null,e.priority);return t.addAttribute("domain",e.domain),t.addAttribute("path",e.path),e.expires&&t.addAttribute("expires",1e3*e.expires),e.httpOnly&&t.addAttribute("http-only"),e.secure&&t.addAttribute("secure"),e.sameSite&&t.addAttribute("same-site",e.sameSite),"sourcePort"in e&&t.addAttribute("source-port",e.sourcePort),"sourceScheme"in e&&t.addAttribute("source-scheme",e.sourceScheme),"partitionKey"in e&&e.partitionKey&&t.setPartitionKey(e.partitionKey.topLevelSite,e.partitionKey.hasCrossSiteAncestor),"partitionKeyOpaque"in e&&e.partitionKeyOpaque&&t.addAttribute("partition-key",N),t.setSize(e.size),t}key(){return(this.domain()||"-")+" "+this.name()+" "+(this.path()||"-")+" "+(this.partitionKey()?this.topLevelSite()+" "+(this.hasCrossSiteAncestor()?"cross_site":"same_site"):"-")}name(){return this.#h}value(){return this.#u}type(){return this.#g}httpOnly(){return this.#p.has("http-only")}secure(){return this.#p.has("secure")}partitioned(){return this.#p.has("partitioned")||Boolean(this.partitionKey())||this.partitionKeyOpaque()}sameSite(){return this.#p.get("same-site")}partitionKey(){return this.#y}setPartitionKey(e,t){this.#y={topLevelSite:e,hasCrossSiteAncestor:t},this.#p.has("partitioned")||this.addAttribute("partitioned")}topLevelSite(){return this.#y?this.#y?.topLevelSite:""}setTopLevelSite(e,t){this.setPartitionKey(e,t)}hasCrossSiteAncestor(){return!!this.#y&&this.#y?.hasCrossSiteAncestor}setHasCrossSiteAncestor(e){this.partitionKey()&&Boolean(this.topLevelSite())&&this.setPartitionKey(this.topLevelSite(),e)}partitionKeyOpaque(){return!!this.#y&&this.topLevelSite()===N}setPartitionKeyOpaque(){this.addAttribute("partition-key",N),this.setPartitionKey(N,!1)}priority(){return this.#f}session(){return!(this.#p.has("expires")||this.#p.has("max-age"))}path(){return this.#p.get("path")}domain(){return this.#p.get("domain")}expires(){return this.#p.get("expires")}maxAge(){return this.#p.get("max-age")}sourcePort(){return this.#p.get("source-port")}sourceScheme(){return this.#p.get("source-scheme")}size(){return this.#m}url(){if(!this.domain()||!this.path())return null;let e="";const t=this.sourcePort();return t&&80!==t&&443!==t&&(e=`:${this.sourcePort()}`),(this.secure()?"https://":"http://")+this.domain()+e+this.path()}setSize(e){this.#m=e}expiresDate(e){return this.maxAge()?new Date(e.getTime()+1e3*this.maxAge()):this.expires()?new Date(this.expires()):null}addAttribute(e,t){if(e)if("priority"===e)this.#f=t;else this.#p.set(e,t)}setCookieLine(e){this.#b=e}getCookieLine(){return this.#b}matchesSecurityOrigin(e){const t=new URL(e).hostname;return F.isDomainMatch(this.domain(),t)}static isDomainMatch(e,t){return t===e||!(!e||"."!==e[0])&&(e.substr(1)===t||t.length>e.length&&t.endsWith(e))}}var B,H=Object.freeze({__proto__:null,Cookie:F});class U extends l.InspectorBackend.TargetBase{#v;#h;#k;#I;#w;#g;#S;#C;#x;#R;#T;#M;constructor(t,r,n,i,o,a,l,d,c){switch(super(i===B.Node,o,a,d),this.#v=t,this.#h=n,this.#k=s.DevToolsPath.EmptyUrlString,this.#I="",this.#w=0,i){case B.Frame:this.#w=1027519,o?.type()!==B.Frame&&(this.#w|=21056,e.ParsedURL.schemeIs(c?.url,"chrome-extension:")&&(this.#w&=-513));break;case B.ServiceWorker:this.#w=657468,o?.type()!==B.Frame&&(this.#w|=1);break;case B.SharedWorker:this.#w=919612;break;case B.SharedStorageWorklet:this.#w=526348;break;case B.Worker:this.#w=917820;break;case B.Worklet:this.#w=524300;break;case B.Node:this.#w=4;break;case B.AuctionWorklet:this.#w=524292;break;case B.Browser:this.#w=131104;break;case B.Tab:this.#w=160}this.#g=i,this.#S=o,this.#C=r,this.#x=new Map,this.#R=l,this.#T=c}createModels(e){this.#M=!0;const t=Array.from(h.registeredModels.entries());for(const[e,r]of t)r.early&&this.model(e);for(const[r,n]of t)(n.autostart||e.has(r))&&this.model(r);this.#M=!1}id(){return this.#C}name(){return this.#h||this.#I}setName(e){this.#h!==e&&(this.#h=e,this.#v.onNameChange(this))}type(){return this.#g}markAsNodeJSForTest(){super.markAsNodeJSForTest(),this.#g=B.Node}targetManager(){return this.#v}hasAllCapabilities(e){return(this.#w&e)===e}decorateLabel(e){return this.#g===B.Worker||this.#g===B.ServiceWorker?" "+e:e}parentTarget(){return this.#S}outermostTarget(){let e=null,t=this;do{t.type()!==B.Tab&&t.type()!==B.Browser&&(e=t),t=t.parentTarget()}while(t);return e}dispose(e){super.dispose(e),this.#v.removeTarget(this);for(const e of this.#x.values())e.dispose()}model(e){if(!this.#x.get(e)){const t=h.registeredModels.get(e);if(void 0===t)throw"Model class is not registered @"+(new Error).stack;if((this.#w&t.capabilities)===t.capabilities){const t=new e(this);this.#x.set(e,t),this.#M||this.#v.modelAdded(this,e,t,this.#v.isInScope(this))}}return this.#x.get(e)||null}models(){return this.#x}inspectedURL(){return this.#k}setInspectedURL(t){this.#k=t;const r=e.ParsedURL.ParsedURL.fromString(t);this.#I=r?r.lastPathComponentWithFragment():"#"+this.#C,this.#v.onInspectedURLChange(this),this.#h||this.#v.onNameChange(this)}async suspend(e){this.#R||(this.#R=!0,await Promise.all(Array.from(this.models().values(),(t=>t.preSuspendModel(e)))),await Promise.all(Array.from(this.models().values(),(t=>t.suspendModel(e)))))}async resume(){this.#R&&(this.#R=!1,await Promise.all(Array.from(this.models().values(),(e=>e.resumeModel()))),await Promise.all(Array.from(this.models().values(),(e=>e.postResumeModel()))))}suspended(){return this.#R}updateTargetInfo(e){this.#T=e}targetInfo(){return this.#T}}!function(e){e.Frame="frame",e.ServiceWorker="service-worker",e.Worker="worker",e.SharedWorker="shared-worker",e.SharedStorageWorklet="shared-storage-worklet",e.Node="node",e.Browser="browser",e.AuctionWorklet="auction-worklet",e.Worklet="worklet",e.Tab="tab"}(B||(B={}));var _=Object.freeze({__proto__:null,Target:U,get Type(){return B}});let q;class z extends e.ObjectWrapper.ObjectWrapper{#P;#L;#E;#A;#O;#R;#D;#N;#F;#B;constructor(){super(),this.#P=new Set,this.#L=new Set,this.#E=new s.MapUtilities.Multimap,this.#A=new s.MapUtilities.Multimap,this.#R=!1,this.#D=null,this.#N=null,this.#O=new WeakSet,this.#F=!1,this.#B=new Set}static instance({forceNew:e}={forceNew:!1}){return q&&!e||(q=new z),q}static removeInstance(){q=void 0}onInspectedURLChange(e){e===this.#N&&(a.InspectorFrontendHost.InspectorFrontendHostInstance.inspectedURLChanged(e.inspectedURL()||s.DevToolsPath.EmptyUrlString),this.dispatchEventToListeners("InspectedURLChanged",e))}onNameChange(e){this.dispatchEventToListeners("NameChanged",e)}async suspendAllTargets(e){if(this.#R)return;this.#R=!0,this.dispatchEventToListeners("SuspendStateChanged");const t=Array.from(this.#P.values(),(t=>t.suspend(e)));await Promise.all(t)}async resumeAllTargets(){if(!this.#R)return;this.#R=!1,this.dispatchEventToListeners("SuspendStateChanged");const e=Array.from(this.#P.values(),(e=>e.resume()));await Promise.all(e)}allTargetsSuspended(){return this.#R}models(e,t){const r=[];for(const n of this.#P){if(t?.scoped&&!this.isInScope(n))continue;const s=n.model(e);s&&r.push(s)}return r}inspectedURL(){const e=this.primaryPageTarget();return e?e.inspectedURL():""}observeModels(e,t,r){const n=this.models(e,r);this.#A.set(e,t),r?.scoped&&this.#O.add(t);for(const e of n)t.modelAdded(e)}unobserveModels(e,t){this.#A.delete(e,t),this.#O.delete(t)}modelAdded(e,t,r,n){for(const e of this.#A.get(t).values())this.#O.has(e)&&!n||e.modelAdded(r)}modelRemoved(e,t,r,n){for(const e of this.#A.get(t).values())this.#O.has(e)&&!n||e.modelRemoved(r)}addModelListener(e,t,r,n,s){const i=e=>{s?.scoped&&!this.isInScope(e)||r.call(n,e)};for(const r of this.models(e))r.addEventListener(t,i);this.#E.set(t,{modelClass:e,thisObject:n,listener:r,wrappedListener:i})}removeModelListener(e,t,r,n){if(!this.#E.has(t))return;let s=null;for(const i of this.#E.get(t))i.modelClass===e&&i.listener===r&&i.thisObject===n&&(s=i.wrappedListener,this.#E.delete(t,i));if(s)for(const r of this.models(e))r.removeEventListener(t,s)}observeTargets(e,t){if(this.#L.has(e))throw new Error("Observer can only be registered once");t?.scoped&&this.#O.add(e);for(const r of this.#P)t?.scoped&&!this.isInScope(r)||e.targetAdded(r);this.#L.add(e)}unobserveTargets(e){this.#L.delete(e),this.#O.delete(e)}createTarget(e,t,r,n,s,i,o,a){const l=new U(this,e,t,r,n,s||"",this.#R,o||null,a);i&&l.pageAgent().invoke_waitForDebugger(),l.createModels(new Set(this.#A.keysArray())),this.#P.add(l);const d=this.isInScope(l);for(const e of[...this.#L])this.#O.has(e)&&!d||e.targetAdded(l);for(const[e,t]of l.models().entries())this.modelAdded(l,e,t,d);for(const e of this.#E.keysArray())for(const t of this.#E.get(e)){const r=l.model(t.modelClass);r&&r.addEventListener(e,t.wrappedListener)}return l!==l.outermostTarget()||l.type()===B.Frame&&l!==this.primaryPageTarget()||this.#F||this.setScopeTarget(l),l}removeTarget(e){if(!this.#P.has(e))return;const t=this.isInScope(e);this.#P.delete(e);for(const r of e.models().keys()){const n=e.models().get(r);i(n),this.modelRemoved(e,r,n,t)}for(const r of[...this.#L])this.#O.has(r)&&!t||r.targetRemoved(e);for(const t of this.#E.keysArray())for(const r of this.#E.get(t)){const n=e.model(r.modelClass);n&&n.removeEventListener(t,r.wrappedListener)}}targets(){return[...this.#P]}targetById(e){return this.targets().find((t=>t.id()===e))||null}rootTarget(){return this.#P.size?this.#P.values().next().value:null}primaryPageTarget(){let e=this.rootTarget();return e?.type()===B.Tab&&(e=this.targets().find((t=>t.parentTarget()===e&&t.type()===B.Frame&&!t.targetInfo()?.subtype?.length))||null),e}browserTarget(){return this.#D}async maybeAttachInitialTarget(){if(!Boolean(o.Runtime.Runtime.queryParam("browserConnection")))return!1;this.#D||(this.#D=new U(this,"main","browser",B.Browser,null,"",!1,null,void 0),this.#D.createModels(new Set(this.#A.keysArray())));const e=await a.InspectorFrontendHost.InspectorFrontendHostInstance.initialTargetId();return this.#D.targetAgent().invoke_autoAttachRelated({targetId:e,waitForDebuggerOnStart:!0}),!0}clearAllTargetsForTest(){this.#P.clear()}isInScope(e){if(!e)return!1;for(function(e){return"source"in e&&e.source instanceof h}(e)&&(e=e.source),e instanceof h&&(e=e.target());e&&e!==this.#N;)e=e.parentTarget();return Boolean(e)&&e===this.#N}setScopeTarget(e){if(e!==this.#N){for(const e of this.targets())if(this.isInScope(e)){for(const t of this.#A.keysArray()){const r=e.models().get(t);if(r)for(const e of[...this.#A.get(t)].filter((e=>this.#O.has(e))))e.modelRemoved(r)}for(const t of[...this.#L].filter((e=>this.#O.has(e))))t.targetRemoved(e)}this.#N=e;for(const e of this.targets())if(this.isInScope(e)){for(const t of[...this.#L].filter((e=>this.#O.has(e))))t.targetAdded(e);for(const[t,r]of e.models().entries())for(const e of[...this.#A.get(t)].filter((e=>this.#O.has(e))))e.modelAdded(r)}for(const e of this.#B)e();e&&e.inspectedURL()&&this.onInspectedURLChange(e)}}addScopeChangeListener(e){this.#B.add(e)}removeScopeChangeListener(e){this.#B.delete(e)}scopeTarget(){return this.#N}}var j=Object.freeze({__proto__:null,TargetManager:z,Observer:class{targetAdded(e){}targetRemoved(e){}},SDKModelObserver:class{modelAdded(e){}modelRemoved(e){}}});const V={noContentForWebSocket:"Content for WebSockets is currently not supported",noContentForRedirect:"No content available because this request was redirected",noContentForPreflight:"No content available for preflight request",noThrottling:"No throttling",offline:"Offline",slowG:"3G",fastG:"Slow 4G",fast4G:"Fast 4G",requestWasBlockedByDevtoolsS:'Request was blocked by DevTools: "{PH1}"',sFailedLoadingSS:'{PH1} failed loading: {PH2} "{PH3}".',sFinishedLoadingSS:'{PH1} finished loading: {PH2} "{PH3}".'},W=n.i18n.registerUIStrings("core/sdk/NetworkManager.ts",V),G=n.i18n.getLocalizedString.bind(void 0,W),K=n.i18n.getLazilyComputedLocalizedString.bind(void 0,W),Q=new WeakMap,$=new Map([["2g","cellular2g"],["3g","cellular3g"],["4g","cellular4g"],["bluetooth","bluetooth"],["wifi","wifi"],["wimax","wimax"]]);class X extends h{dispatcher;fetchDispatcher;#H;#U;constructor(t){super(t),this.dispatcher=new ie(this),this.fetchDispatcher=new se(t.fetchAgent(),this),this.#H=t.networkAgent(),t.registerNetworkDispatcher(this.dispatcher),t.registerFetchDispatcher(this.fetchDispatcher),e.Settings.Settings.instance().moduleSetting("cache-disabled").get()&&this.#H.invoke_setCacheDisabled({cacheDisabled:!0}),this.#H.invoke_enable({maxPostDataSize:ne}),this.#H.invoke_setAttachDebugStack({enabled:!0}),this.#U=e.Settings.Settings.instance().createSetting("bypass-service-worker",!1),this.#U.get()&&this.bypassServiceWorkerChanged(),this.#U.addChangeListener(this.bypassServiceWorkerChanged,this),e.Settings.Settings.instance().moduleSetting("cache-disabled").addChangeListener(this.cacheDisabledSettingChanged,this)}static forRequest(e){return Q.get(e)||null}static canReplayRequest(t){return Boolean(Q.get(t))&&Boolean(t.backendRequestId())&&!t.isRedirect()&&t.resourceType()===e.ResourceType.resourceTypes.XHR}static replayRequest(e){const t=Q.get(e),r=e.backendRequestId();t&&r&&!e.isRedirect()&&t.#H.invoke_replayXHR({requestId:r})}static async searchInRequest(e,t,n,s){const i=X.forRequest(e),o=e.backendRequestId();if(!i||!o||e.isRedirect())return[];const a=await i.#H.invoke_searchInResponseBody({requestId:o,query:t,caseSensitive:n,isRegex:s});return r.TextUtils.performSearchInSearchMatches(a.result||[],t,n,s)}static async requestContentData(t){if(t.resourceType()===e.ResourceType.resourceTypes.WebSocket)return{error:G(V.noContentForWebSocket)};if(t.finished||await t.once(fs.FinishedLoading),t.isRedirect())return{error:G(V.noContentForRedirect)};if(t.isPreflightRequest())return{error:G(V.noContentForPreflight)};const n=X.forRequest(t);if(!n)return{error:"No network manager for request"};const s=t.backendRequestId();if(!s)return{error:"No backend request id for request"};const i=await n.#H.invoke_getResponseBody({requestId:s}),o=i.getError();return o?{error:o}:new r.ContentData.ContentData(i.body,i.base64Encoded,t.mimeType,t.charset()??void 0)}static async streamResponseBody(e){if(e.finished)return{error:"Streaming the response body is only available for in-flight requests."};const t=X.forRequest(e);if(!t)return{error:"No network manager for request"};const n=e.backendRequestId();if(!n)return{error:"No backend request id for request"};const s=await t.#H.invoke_streamResourceContent({requestId:n}),i=s.getError();return i?{error:i}:(await e.waitForResponseReceived(),new r.ContentData.ContentData(s.bufferedData,!0,e.mimeType,e.charset()??void 0))}static async requestPostData(e){const t=X.forRequest(e);if(!t)return console.error("No network manager for request"),null;const r=e.backendRequestId();if(!r)return console.error("No backend request id for request"),null;try{const{postData:e}=await t.#H.invoke_getRequestPostData({requestId:r});return e}catch(e){return e.message}}static connectionType(e){if(!e.download&&!e.upload)return"none";try{const t="function"==typeof e.title?e.title().toLowerCase():e.title.toLowerCase();for(const[e,r]of $)if(t.includes(e))return r}catch{return"none"}return"other"}static lowercaseHeaders(e){const t={};for(const r in e)t[r.toLowerCase()]=e[r];return t}requestForURL(e){return this.dispatcher.requestForURL(e)}requestForId(e){return this.dispatcher.requestForId(e)}requestForLoaderId(e){return this.dispatcher.requestForLoaderId(e)}cacheDisabledSettingChanged({data:e}){this.#H.invoke_setCacheDisabled({cacheDisabled:e})}dispose(){e.Settings.Settings.instance().moduleSetting("cache-disabled").removeChangeListener(this.cacheDisabledSettingChanged,this)}bypassServiceWorkerChanged(){this.#H.invoke_setBypassServiceWorker({bypass:this.#U.get()})}async getSecurityIsolationStatus(e){const t=await this.#H.invoke_getSecurityIsolationStatus({frameId:e??void 0});return t.getError()?null:t.status}async enableReportingApi(e=!0){return this.#H.invoke_enableReportingApi({enable:e})}async loadNetworkResource(e,t,r){const n=await this.#H.invoke_loadNetworkResource({frameId:e??void 0,url:t,options:r});if(n.getError())throw new Error(n.getError());return n.resource}clearRequests(){this.dispatcher.clearRequests()}}var J;!function(e){e.RequestStarted="RequestStarted",e.RequestUpdated="RequestUpdated",e.RequestFinished="RequestFinished",e.RequestUpdateDropped="RequestUpdateDropped",e.ResponseReceived="ResponseReceived",e.MessageGenerated="MessageGenerated",e.RequestRedirected="RequestRedirected",e.LoadingFinished="LoadingFinished",e.ReportingApiReportAdded="ReportingApiReportAdded",e.ReportingApiReportUpdated="ReportingApiReportUpdated",e.ReportingApiEndpointsChangedForOrigin="ReportingApiEndpointsChangedForOrigin"}(J||(J={}));const Y={title:K(V.noThrottling),i18nTitleKey:V.noThrottling,download:-1,upload:-1,latency:0},Z={title:K(V.offline),i18nTitleKey:V.offline,download:0,upload:0,latency:0},ee={title:K(V.slowG),i18nTitleKey:V.slowG,download:5e4,upload:5e4,latency:2e3,targetLatency:400},te={title:K(V.fastG),i18nTitleKey:V.fastG,download:18e4,upload:84375,latency:562.5,targetLatency:150},re={title:K(V.fast4G),i18nTitleKey:V.fast4G,download:1012500,upload:168750,latency:165,targetLatency:60},ne=65536;class se{#_;#q;constructor(e,t){this.#_=e,this.#q=t}requestPaused({requestId:e,request:t,resourceType:r,responseStatusCode:n,responseHeaders:s,networkId:i}){const o=i?this.#q.requestForId(i):null;0===o?.originalResponseHeaders.length&&s&&(o.originalResponseHeaders=s),ae.instance().requestIntercepted(new le(this.#_,t,r,e,o,n,s))}authRequired({}){}}class ie{#q;#z;#j;#V;#W;#G;constructor(e){this.#q=e,this.#z=new Map,this.#j=new Map,this.#V=new Map,this.#W=new Map,this.#G=new Map,ae.instance().addEventListener("RequestIntercepted",this.#K.bind(this))}#K(e){const t=this.requestForId(e.data);t&&t.setWasIntercepted(!0)}headersMapToHeadersArray(e){const t=[];for(const r in e){const n=e[r].split("\n");for(let e=0;e<n.length;++e)t.push({name:r,value:n[e]})}return t}updateNetworkRequestWithRequest(e,t){e.requestMethod=t.method,e.setRequestHeaders(this.headersMapToHeadersArray(t.headers)),e.setRequestFormData(Boolean(t.hasPostData),t.postData||null),e.setInitialPriority(t.initialPriority),e.mixedContentType=t.mixedContentType||"none",e.setReferrerPolicy(t.referrerPolicy),e.setIsSameSite(t.isSameSite||!1)}updateNetworkRequestWithResponse(t,r){r.url&&t.url()!==r.url&&t.setUrl(r.url),t.mimeType=r.mimeType,t.setCharset(r.charset),t.statusCode&&!t.wasIntercepted()||(t.statusCode=r.status),t.statusText&&!t.wasIntercepted()||(t.statusText=r.statusText),t.hasExtraResponseInfo()&&!t.wasIntercepted()||(t.responseHeaders=this.headersMapToHeadersArray(r.headers)),r.encodedDataLength>=0&&t.setTransferSize(r.encodedDataLength),r.requestHeaders&&!t.hasExtraRequestInfo()&&(t.setRequestHeaders(this.headersMapToHeadersArray(r.requestHeaders)),t.setRequestHeadersText(r.requestHeadersText||"")),t.connectionReused=r.connectionReused,t.connectionId=String(r.connectionId),r.remoteIPAddress&&t.setRemoteAddress(r.remoteIPAddress,r.remotePort||-1),r.fromServiceWorker&&(t.fetchedViaServiceWorker=!0),r.fromDiskCache&&t.setFromDiskCache(),r.fromPrefetchCache&&t.setFromPrefetchCache(),r.fromEarlyHints&&t.setFromEarlyHints(),r.cacheStorageCacheName&&t.setResponseCacheStorageCacheName(r.cacheStorageCacheName),r.serviceWorkerRouterInfo&&(t.serviceWorkerRouterInfo=r.serviceWorkerRouterInfo),r.responseTime&&t.setResponseRetrievalTime(new Date(r.responseTime)),t.timing=r.timing,t.protocol=r.protocol||"",t.alternateProtocolUsage=r.alternateProtocolUsage,r.serviceWorkerResponseSource&&t.setServiceWorkerResponseSource(r.serviceWorkerResponseSource),t.setSecurityState(r.securityState),r.securityDetails&&t.setSecurityDetails(r.securityDetails);const n=e.ResourceType.ResourceType.fromMimeTypeOverride(t.mimeType);n&&t.setResourceType(n),t.responseReceivedPromiseResolve?t.responseReceivedPromiseResolve():t.responseReceivedPromise=Promise.resolve()}requestForId(e){return this.#z.get(e)||null}requestForURL(e){return this.#j.get(e)||null}requestForLoaderId(e){return this.#V.get(e)||null}resourceChangedPriority({requestId:e,newPriority:t}){const r=this.#z.get(e);r&&r.setPriority(t)}signedExchangeReceived({requestId:t,info:r}){let n=this.#z.get(t);(n||(n=this.#j.get(r.outerResponse.url),n))&&(n.setSignedExchangeInfo(r),n.setResourceType(e.ResourceType.resourceTypes.SignedExchange),this.updateNetworkRequestWithResponse(n,r.outerResponse),this.updateNetworkRequest(n),this.#q.dispatchEventToListeners(J.ResponseReceived,{request:n,response:r.outerResponse}))}requestWillBeSent({requestId:t,loaderId:r,documentURL:n,request:s,timestamp:i,wallTime:o,initiator:a,redirectResponse:l,type:d,frameId:c,hasUserGesture:h}){let u=this.#z.get(t);if(u){if(!l)return;u.signedExchangeInfo()||this.responseReceived({requestId:t,loaderId:r,timestamp:i,type:d||"Other",response:l,hasExtraInfo:!1,frameId:c}),u=this.appendRedirect(t,i,s.url),this.#q.dispatchEventToListeners(J.RequestRedirected,u)}else u=ms.create(t,s.url,n,c??null,r,a,h),Q.set(u,this.#q);u.hasNetworkData=!0,this.updateNetworkRequestWithRequest(u,s),u.setIssueTime(i,o),u.setResourceType(d?e.ResourceType.resourceTypes[d]:e.ResourceType.resourceTypes.Other),s.trustTokenParams&&u.setTrustTokenParams(s.trustTokenParams);const g=this.#G.get(t);g&&(u.setTrustTokenOperationDoneEvent(g),this.#G.delete(t)),this.getExtraInfoBuilder(t).addRequest(u),this.startNetworkRequest(u,s)}requestServedFromCache({requestId:e}){const t=this.#z.get(e);t&&t.setFromMemoryCache()}responseReceived({requestId:t,loaderId:r,timestamp:n,type:s,response:i,frameId:o}){const a=this.#z.get(t),l=X.lowercaseHeaders(i.headers);if(a)a.responseReceivedTime=n,a.setResourceType(e.ResourceType.resourceTypes[s]),this.updateNetworkRequestWithResponse(a,i),this.updateNetworkRequest(a),this.#q.dispatchEventToListeners(J.ResponseReceived,{request:a,response:i});else{const e=l["last-modified"],t={url:i.url,frameId:o??null,loaderId:r,resourceType:s,mimeType:i.mimeType,lastModified:e?new Date(e):null};this.#q.dispatchEventToListeners(J.RequestUpdateDropped,t)}}dataReceived(e){let t=this.#z.get(e.requestId);t||(t=this.maybeAdoptMainResourceRequest(e.requestId)),t&&(t.addDataReceivedEvent(e),this.updateNetworkRequest(t))}loadingFinished({requestId:e,timestamp:t,encodedDataLength:r}){let n=this.#z.get(e);n||(n=this.maybeAdoptMainResourceRequest(e)),n&&(this.getExtraInfoBuilder(e).finished(),this.finishNetworkRequest(n,t,r),this.#q.dispatchEventToListeners(J.LoadingFinished,n))}loadingFailed({requestId:t,timestamp:r,type:n,errorText:s,canceled:i,blockedReason:o,corsErrorStatus:a}){const l=this.#z.get(t);if(l){if(l.failed=!0,l.setResourceType(e.ResourceType.resourceTypes[n]),l.canceled=Boolean(i),o&&(l.setBlockedReason(o),"inspector"===o)){const e=G(V.requestWasBlockedByDevtoolsS,{PH1:l.url()});this.#q.dispatchEventToListeners(J.MessageGenerated,{message:e,requestId:t,warning:!0})}a&&l.setCorsErrorStatus(a),l.localizedFailDescription=s,this.getExtraInfoBuilder(t).finished(),this.finishNetworkRequest(l,r,-1)}}webSocketCreated({requestId:t,url:r,initiator:n}){const s=ms.createForWebSocket(t,r,n);Q.set(s,this.#q),s.setResourceType(e.ResourceType.resourceTypes.WebSocket),this.startNetworkRequest(s,null)}webSocketWillSendHandshakeRequest({requestId:e,timestamp:t,wallTime:r,request:n}){const s=this.#z.get(e);s&&(s.requestMethod="GET",s.setRequestHeaders(this.headersMapToHeadersArray(n.headers)),s.setIssueTime(t,r),this.updateNetworkRequest(s))}webSocketHandshakeResponseReceived({requestId:e,timestamp:t,response:r}){const n=this.#z.get(e);n&&(n.statusCode=r.status,n.statusText=r.statusText,n.responseHeaders=this.headersMapToHeadersArray(r.headers),n.responseHeadersText=r.headersText||"",r.requestHeaders&&n.setRequestHeaders(this.headersMapToHeadersArray(r.requestHeaders)),r.requestHeadersText&&n.setRequestHeadersText(r.requestHeadersText),n.responseReceivedTime=t,n.protocol="websocket",this.updateNetworkRequest(n))}webSocketFrameReceived({requestId:e,timestamp:t,response:r}){const n=this.#z.get(e);n&&(n.addProtocolFrame(r,t,!1),n.responseReceivedTime=t,this.updateNetworkRequest(n))}webSocketFrameSent({requestId:e,timestamp:t,response:r}){const n=this.#z.get(e);n&&(n.addProtocolFrame(r,t,!0),n.responseReceivedTime=t,this.updateNetworkRequest(n))}webSocketFrameError({requestId:e,timestamp:t,errorMessage:r}){const n=this.#z.get(e);n&&(n.addProtocolFrameError(r,t),n.responseReceivedTime=t,this.updateNetworkRequest(n))}webSocketClosed({requestId:e,timestamp:t}){const r=this.#z.get(e);r&&this.finishNetworkRequest(r,t,-1)}eventSourceMessageReceived({requestId:e,timestamp:t,eventName:r,eventId:n,data:s}){const i=this.#z.get(e);i&&i.addEventSourceMessage(t,r,n,s)}requestIntercepted({}){}requestWillBeSentExtraInfo({requestId:e,associatedCookies:t,headers:r,clientSecurityState:n,connectTiming:s,siteHasCookieInOtherPartition:i}){const o=[],a=[];for(const{blockedReasons:e,exemptionReason:r,cookie:n}of t)0===e.length?a.push({exemptionReason:r,cookie:F.fromProtocolCookie(n)}):o.push({blockedReasons:e,cookie:F.fromProtocolCookie(n)});const l={blockedRequestCookies:o,includedRequestCookies:a,requestHeaders:this.headersMapToHeadersArray(r),clientSecurityState:n,connectTiming:s,siteHasCookieInOtherPartition:i};this.getExtraInfoBuilder(e).addRequestExtraInfo(l)}responseReceivedEarlyHints({requestId:e,headers:t}){this.getExtraInfoBuilder(e).setEarlyHintsHeaders(this.headersMapToHeadersArray(t))}responseReceivedExtraInfo({requestId:e,blockedCookies:t,headers:r,headersText:n,resourceIPAddressSpace:s,statusCode:i,cookiePartitionKey:o,cookiePartitionKeyOpaque:a,exemptedCookies:l}){const d={blockedResponseCookies:t.map((e=>({blockedReasons:e.blockedReasons,cookieLine:e.cookieLine,cookie:e.cookie?F.fromProtocolCookie(e.cookie):null}))),responseHeaders:this.headersMapToHeadersArray(r),responseHeadersText:n,resourceIPAddressSpace:s,statusCode:i,cookiePartitionKey:o,cookiePartitionKeyOpaque:a,exemptedResponseCookies:l?.map((e=>({cookie:F.fromProtocolCookie(e.cookie),cookieLine:e.cookieLine,exemptionReason:e.exemptionReason})))};this.getExtraInfoBuilder(e).addResponseExtraInfo(d)}getExtraInfoBuilder(e){let t;return this.#W.has(e)?t=this.#W.get(e):(t=new de,this.#W.set(e,t)),t}appendRedirect(e,t,r){const n=this.#z.get(e);if(!n)throw new Error(`Could not find original network request for ${e}`);let s=0;for(let e=n.redirectSource();e;e=e.redirectSource())s++;n.markAsRedirect(s),this.finishNetworkRequest(n,t,-1);const i=ms.create(e,r,n.documentURL,n.frameId,n.loaderId,n.initiator(),n.hasUserGesture()??void 0);return Q.set(i,this.#q),i.setRedirectSource(n),n.setRedirectDestination(i),i}maybeAdoptMainResourceRequest(e){const t=ae.instance().inflightMainResourceRequests.get(e);if(!t)return null;const r=X.forRequest(t).dispatcher;r.#z.delete(e),r.#j.delete(t.url());const n=t.loaderId;n&&r.#V.delete(n);const s=r.#W.get(e);return r.#W.delete(e),this.#z.set(e,t),this.#j.set(t.url(),t),n&&this.#V.set(n,t),s&&this.#W.set(e,s),Q.set(t,this.#q),t}startNetworkRequest(e,t){this.#z.set(e.requestId(),e),this.#j.set(e.url(),e);const r=e.loaderId;r&&this.#V.set(r,e),e.loaderId===e.requestId()&&ae.instance().inflightMainResourceRequests.set(e.requestId(),e),this.#q.dispatchEventToListeners(J.RequestStarted,{request:e,originalRequest:t})}updateNetworkRequest(e){this.#q.dispatchEventToListeners(J.RequestUpdated,e)}finishNetworkRequest(t,r,n){if(t.endTime=r,t.finished=!0,n>=0){const e=t.redirectSource();e&&e.signedExchangeInfo()?(t.setTransferSize(0),e.setTransferSize(n),this.updateNetworkRequest(e)):t.setTransferSize(n)}if(this.#q.dispatchEventToListeners(J.RequestFinished,t),ae.instance().inflightMainResourceRequests.delete(t.requestId()),e.Settings.Settings.instance().moduleSetting("monitoring-xhr-enabled").get()&&t.resourceType().category()===e.ResourceType.resourceCategories.XHR){let e;const r=t.failed||t.hasErrorStatusCode();e=G(r?V.sFailedLoadingSS:V.sFinishedLoadingSS,{PH1:t.resourceType().title(),PH2:t.requestMethod,PH3:t.url()}),this.#q.dispatchEventToListeners(J.MessageGenerated,{message:e,requestId:t.requestId(),warning:!1})}}clearRequests(){for(const[e,t]of this.#z)t.finished&&this.#z.delete(e);for(const[e,t]of this.#j)t.finished&&this.#j.delete(e);for(const[e,t]of this.#V)t.finished&&this.#V.delete(e);for(const[e,t]of this.#W)t.isFinished()&&this.#W.delete(e)}webTransportCreated({transportId:t,url:r,timestamp:n,initiator:s}){const i=ms.createForWebSocket(t,r,s);i.hasNetworkData=!0,Q.set(i,this.#q),i.setResourceType(e.ResourceType.resourceTypes.WebTransport),i.setIssueTime(n,0),this.startNetworkRequest(i,null)}webTransportConnectionEstablished({transportId:e,timestamp:t}){const r=this.#z.get(e);r&&(r.responseReceivedTime=t,r.endTime=t+.001,this.updateNetworkRequest(r))}webTransportClosed({transportId:e,timestamp:t}){const r=this.#z.get(e);r&&(r.endTime=t,this.finishNetworkRequest(r,t,0))}trustTokenOperationDone(e){const t=this.#z.get(e.requestId);t?t.setTrustTokenOperationDoneEvent(e):this.#G.set(e.requestId,e)}subresourceWebBundleMetadataReceived({requestId:e,urls:t}){const r=this.getExtraInfoBuilder(e);r.setWebBundleInfo({resourceUrls:t});const n=r.finalRequest();n&&this.updateNetworkRequest(n)}subresourceWebBundleMetadataError({requestId:e,errorMessage:t}){const r=this.getExtraInfoBuilder(e);r.setWebBundleInfo({errorMessage:t});const n=r.finalRequest();n&&this.updateNetworkRequest(n)}subresourceWebBundleInnerResponseParsed({innerRequestId:e,bundleRequestId:t}){const r=this.getExtraInfoBuilder(e);r.setWebBundleInnerRequestInfo({bundleRequestId:t});const n=r.finalRequest();n&&this.updateNetworkRequest(n)}subresourceWebBundleInnerResponseError({innerRequestId:e,errorMessage:t}){const r=this.getExtraInfoBuilder(e);r.setWebBundleInnerRequestInfo({errorMessage:t});const n=r.finalRequest();n&&this.updateNetworkRequest(n)}reportingApiReportAdded(e){this.#q.dispatchEventToListeners(J.ReportingApiReportAdded,e.report)}reportingApiReportUpdated(e){this.#q.dispatchEventToListeners(J.ReportingApiReportUpdated,e.report)}reportingApiEndpointsChangedForOrigin(e){this.#q.dispatchEventToListeners(J.ReportingApiEndpointsChangedForOrigin,e)}policyUpdated(){}createNetworkRequest(e,t,r,n,s,i){const o=ms.create(e,n,s,t,r,i);return Q.set(o,this.#q),o}}let oe;class ae extends e.ObjectWrapper.ObjectWrapper{#Q;#$;#X;#J;#Y;inflightMainResourceRequests;#Z;#ee;#te;#re;#ne;#se;#ie;#oe;constructor(){super(),this.#Q="",this.#$=null,this.#X=null,this.#J=new Set,this.#Y=new Set,this.inflightMainResourceRequests=new Map,this.#Z=Y,this.#ee=null,this.#te=e.Settings.Settings.instance().moduleSetting("request-blocking-enabled"),this.#re=e.Settings.Settings.instance().createSetting("network-blocked-patterns",[]),this.#ne=[],this.updateBlockedPatterns(),this.#se=new s.MapUtilities.Multimap,z.instance().observeModels(X,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return oe&&!t||(oe=new ae),oe}static dispose(){oe=null}static getChromeVersion(){const e=navigator.userAgent.match(/(?:^|\W)(?:Chrome|HeadlessChrome)\/(\S+)/);return e&&e.length>1?e[1]:""}static patchUserAgentWithChromeVersion(e){const t=ae.getChromeVersion();if(t.length>0){const r=t.split(".",1)[0]+".0.100.0";return s.StringUtilities.sprintf(e,t,r)}return e}static patchUserAgentMetadataWithChromeVersion(e){if(!e.brands)return;const t=ae.getChromeVersion();if(0===t.length)return;const r=t.split(".",1)[0];for(const t of e.brands)t.version.includes("%s")&&(t.version=s.StringUtilities.sprintf(t.version,r));e.fullVersion&&e.fullVersion.includes("%s")&&(e.fullVersion=s.StringUtilities.sprintf(e.fullVersion,t))}modelAdded(e){const t=e.target().networkAgent(),r=e.target().fetchAgent();this.#ie&&t.invoke_setExtraHTTPHeaders({headers:this.#ie}),this.currentUserAgent()&&t.invoke_setUserAgentOverride({userAgent:this.currentUserAgent(),userAgentMetadata:this.#$||void 0}),this.#ne.length&&t.invoke_setBlockedURLs({urls:this.#ne}),this.isIntercepting()&&r.invoke_enable({patterns:this.#se.valuesArray()}),null===this.#X?t.invoke_clearAcceptedEncodingsOverride():t.invoke_setAcceptedEncodings({encodings:this.#X}),this.#J.add(t),this.#Y.add(r),this.isThrottling()&&this.updateNetworkConditions(t)}modelRemoved(e){for(const t of this.inflightMainResourceRequests){X.forRequest(t[1])===e&&this.inflightMainResourceRequests.delete(t[0])}this.#J.delete(e.target().networkAgent()),this.#Y.delete(e.target().fetchAgent())}isThrottling(){return this.#Z.download>=0||this.#Z.upload>=0||this.#Z.latency>0}isOffline(){return!this.#Z.download&&!this.#Z.upload}setNetworkConditions(e){this.#Z=e;for(const e of this.#J)this.updateNetworkConditions(e);this.dispatchEventToListeners("ConditionsChanged")}networkConditions(){return this.#Z}updateNetworkConditions(e){const t=this.#Z;this.isThrottling()?e.invoke_emulateNetworkConditions({offline:this.isOffline(),latency:t.latency,downloadThroughput:t.download<0?0:t.download,uploadThroughput:t.upload<0?0:t.upload,packetLoss:(t.packetLoss??0)<0?0:t.packetLoss,packetQueueLength:t.packetQueueLength,packetReordering:t.packetReordering,connectionType:X.connectionType(t)}):e.invoke_emulateNetworkConditions({offline:!1,latency:0,downloadThroughput:0,uploadThroughput:0})}setExtraHTTPHeaders(e){this.#ie=e;for(const e of this.#J)e.invoke_setExtraHTTPHeaders({headers:this.#ie})}currentUserAgent(){return this.#oe?this.#oe:this.#Q}updateUserAgentOverride(){const e=this.currentUserAgent();for(const t of this.#J)t.invoke_setUserAgentOverride({userAgent:e,userAgentMetadata:this.#$||void 0})}setUserAgentOverride(e,t){const r=this.#Q!==e;this.#Q=e,this.#oe?this.#$=null:(this.#$=t,this.updateUserAgentOverride()),r&&this.dispatchEventToListeners("UserAgentChanged")}userAgentOverride(){return this.#Q}setCustomUserAgentOverride(e,t=null){this.#oe=e,this.#$=t,this.updateUserAgentOverride()}setCustomAcceptedEncodingsOverride(e){this.#X=e,this.updateAcceptedEncodingsOverride(),this.dispatchEventToListeners("AcceptedEncodingsChanged")}clearCustomAcceptedEncodingsOverride(){this.#X=null,this.updateAcceptedEncodingsOverride(),this.dispatchEventToListeners("AcceptedEncodingsChanged")}isAcceptedEncodingOverrideSet(){return null!==this.#X}updateAcceptedEncodingsOverride(){const e=this.#X;for(const t of this.#J)null===e?t.invoke_clearAcceptedEncodingsOverride():t.invoke_setAcceptedEncodings({encodings:e})}blockedPatterns(){return this.#re.get().slice()}blockingEnabled(){return this.#te.get()}isBlocking(){return Boolean(this.#ne.length)}setBlockedPatterns(e){this.#re.set(e),this.updateBlockedPatterns(),this.dispatchEventToListeners("BlockedPatternsChanged")}setBlockingEnabled(e){this.#te.get()!==e&&(this.#te.set(e),this.updateBlockedPatterns(),this.dispatchEventToListeners("BlockedPatternsChanged"))}updateBlockedPatterns(){const e=[];if(this.#te.get())for(const t of this.#re.get())t.enabled&&e.push(t.url);if(e.length||this.#ne.length){this.#ne=e;for(const e of this.#J)e.invoke_setBlockedURLs({urls:this.#ne})}}isIntercepting(){return Boolean(this.#se.size)}setInterceptionHandlerForPatterns(e,t){this.#se.deleteAll(t);for(const r of e)this.#se.set(t,r);return this.updateInterceptionPatternsOnNextTick()}updateInterceptionPatternsOnNextTick(){return this.#ee||(this.#ee=Promise.resolve().then(this.updateInterceptionPatterns.bind(this))),this.#ee}async updateInterceptionPatterns(){e.Settings.Settings.instance().moduleSetting("cache-disabled").get()||e.Settings.Settings.instance().moduleSetting("cache-disabled").set(!0),this.#ee=null;const t=[];for(const e of this.#Y)t.push(e.invoke_enable({patterns:this.#se.valuesArray()}));this.dispatchEventToListeners("InterceptorsChanged"),await Promise.all(t)}async requestIntercepted(e){for(const t of this.#se.keysArray())if(await t(e),e.hasResponded()&&e.networkRequest)return void this.dispatchEventToListeners("RequestIntercepted",e.networkRequest.requestId());e.hasResponded()||e.continueRequestWithoutChange()}clearBrowserCache(){for(const e of this.#J)e.invoke_clearBrowserCache()}clearBrowserCookies(){for(const e of this.#J)e.invoke_clearBrowserCookies()}async getCertificate(e){const t=z.instance().primaryPageTarget();if(!t)return[];const r=await t.networkAgent().invoke_getCertificate({origin:e});return r?r.tableNames:[]}async loadResource(t){const r={},n=this.currentUserAgent();n&&(r["User-Agent"]=n),e.Settings.Settings.instance().moduleSetting("cache-disabled").get()&&(r["Cache-Control"]="no-cache");const s=e.Settings.Settings.instance().moduleSetting("network.enable-remote-file-loading").get();return new Promise((e=>a.ResourceLoader.load(t,r,((t,r,n,s)=>{e({success:t,content:n,errorDescription:s})}),s)))}}class le{#_;#ae;request;resourceType;responseStatusCode;responseHeaders;requestId;networkRequest;constructor(e,t,r,n,s,i,o){this.#_=e,this.#ae=!1,this.request=t,this.resourceType=r,this.responseStatusCode=i,this.responseHeaders=o,this.requestId=n,this.networkRequest=s}hasResponded(){return this.#ae}static mergeSetCookieHeaders(e,t){const r=e=>{const t=new Map;for(const r of e){const e=r.value.match(/^([a-zA-Z0-9!#$%&'*+.^_`|~-]+=)(.*)$/);e?t.has(e[1])?t.get(e[1])?.push(r.value):t.set(e[1],[r.value]):t.has(r.value)?t.get(r.value)?.push(r.value):t.set(r.value,[r.value])}return t},n=r(e),s=r(t),i=[];for(const[e,t]of n)if(s.has(e))for(const t of s.get(e)||[])i.push({name:"set-cookie",value:t});else for(const e of t)i.push({name:"set-cookie",value:e});for(const[e,t]of s)if(!n.has(e))for(const e of t)i.push({name:"set-cookie",value:e});return i}async continueRequestWithContent(t,r,n,s){this.#ae=!0;const i=r?await t.text():await e.Base64.encode(t).catch((e=>(console.error(e),""))),o=s?200:this.responseStatusCode||200;if(this.networkRequest){const e=this.networkRequest?.originalResponseHeaders.filter((e=>"set-cookie"===e.name))||[],t=n.filter((e=>"set-cookie"===e.name));this.networkRequest.setCookieHeaders=le.mergeSetCookieHeaders(e,t),this.networkRequest.hasOverriddenContent=s}this.#_.invoke_fulfillRequest({requestId:this.requestId,responseCode:o,body:i,responseHeaders:n}),ae.instance().dispatchEventToListeners("RequestFulfilled",this.request.url)}continueRequestWithoutChange(){console.assert(!this.#ae),this.#ae=!0,this.#_.invoke_continueRequest({requestId:this.requestId})}continueRequestWithError(e){console.assert(!this.#ae),this.#ae=!0,this.#_.invoke_failRequest({requestId:this.requestId,errorReason:e})}async responseBody(){const e=await this.#_.invoke_getResponseBody({requestId:this.requestId}),t=e.getError();if(t)return{error:t};const{mimeType:n,charset:s}=this.getMimeTypeAndCharset();return new r.ContentData.ContentData(e.body,e.base64Encoded,n??"application/octet-stream",s??void 0)}isRedirect(){return void 0!==this.responseStatusCode&&this.responseStatusCode>=300&&this.responseStatusCode<400}getMimeTypeAndCharset(){for(const e of this.responseHeaders??[])if("content-type"===e.name.toLowerCase())return s.MimeType.parseContentType(e.value);return{mimeType:this.networkRequest?.mimeType??null,charset:this.networkRequest?.charset()??null}}}class de{#le;#de;#ce;#he;#ue;#ge;#pe;constructor(){this.#le=[],this.#de=[],this.#he=[],this.#ce=[],this.#ue=!1,this.#ge=null,this.#pe=null}addRequest(e){this.#le.push(e),this.sync(this.#le.length-1)}addRequestExtraInfo(e){this.#de.push(e),this.sync(this.#de.length-1)}addResponseExtraInfo(e){this.#ce.push(e),this.sync(this.#ce.length-1)}setEarlyHintsHeaders(e){this.#he=e,this.updateFinalRequest()}setWebBundleInfo(e){this.#ge=e,this.updateFinalRequest()}setWebBundleInnerRequestInfo(e){this.#pe=e,this.updateFinalRequest()}finished(){this.#ue=!0,this.updateFinalRequest()}isFinished(){return this.#ue}sync(e){const t=this.#le[e];if(!t)return;const r=this.#de[e];r&&(t.addExtraRequestInfo(r),this.#de[e]=null);const n=this.#ce[e];n&&(t.addExtraResponseInfo(n),this.#ce[e]=null)}finalRequest(){return this.#ue&&this.#le[this.#le.length-1]||null}updateFinalRequest(){if(!this.#ue)return;const e=this.finalRequest();e?.setWebBundleInfo(this.#ge),e?.setWebBundleInnerRequestInfo(this.#pe),e?.setEarlyHintsHeaders(this.#he)}}h.register(X,{capabilities:16,autostart:!0});var ce=Object.freeze({__proto__:null,NetworkManager:X,get Events(){return J},NoThrottlingConditions:Y,OfflineConditions:Z,Slow3GConditions:ee,Slow4GConditions:te,Fast4GConditions:re,FetchDispatcher:se,NetworkDispatcher:ie,MultitargetNetworkManager:ae,InterceptedRequest:le,ConditionsSerializer:class{stringify(e){const t=e;return JSON.stringify({...t,title:"function"==typeof t.title?t.title():t.title})}parse(e){const t=JSON.parse(e);return{...t,title:t.i18nTitleKey?K(t.i18nTitleKey):t.title}}},networkConditionsEqual:function(e,t){const r=e.i18nTitleKey||("function"==typeof e.title?e.title():e.title),n=t.i18nTitleKey||("function"==typeof t.title?t.title():t.title);return t.download===e.download&&t.upload===e.upload&&t.latency===e.latency&&e.packetLoss===t.packetLoss&&e.packetQueueLength===t.packetQueueLength&&e.packetReordering===t.packetReordering&&n===r}});class he{#me;#fe;#be;#ye;#ve;constructor(e){this.#me=e.fontFamily,this.#fe=e.fontVariationAxes||[],this.#be=new Map,this.#ye=e.src,this.#ve=e.fontDisplay;for(const e of this.#fe)this.#be.set(e.tag,e)}getFontFamily(){return this.#me}getSrc(){return this.#ye}getFontDisplay(){return this.#ve}getVariationAxisByTag(e){return this.#be.get(e)}}var ue=Object.freeze({__proto__:null,CSSFontFace:he});const ge=new Set(["inherit","initial","unset"]),pe=/[\x20-\x7E]{4}/,me=new RegExp(`(?:'(${pe.source})')|(?:"(${pe.source})")\\s+(${/[+-]?(?:\d*\.)?\d+(?:[eE]\d+)?/.source})`);const fe=/^"(.+)"|'(.+)'$/;function be(e){return e.split(",").map((e=>e.trim()))}function ye(e){return e.replaceAll(/(\/\*(?:.|\s)*?\*\/)/g,"")}const ve=d.css.cssLanguage.parser;function ke(e,t){return Ie(e,e,t)}function Ie(e,t,r){return r.substring(e.from,t.to)}class we{propertyValue;rule;tree;trailingNodes;propertyName;constructor(e,t,r,n,s=[]){this.propertyName=n,this.propertyValue=e,this.rule=t,this.tree=r,this.trailingNodes=s}text(e){return null===e?"":ke(e??this.tree,this.rule)}textRange(e,t){return Ie(e,t,this.rule)}subtree(e){return new we(this.propertyValue,this.rule,e)}}class Se{ast;constructor(e){this.ast=e}static walkExcludingSuccessors(e,...t){const r=new this(e,...t);return"Declaration"===e.tree.name?r.iterateDeclaration(e.tree):r.iterateExcludingSuccessors(e.tree),r}static walk(e,...t){const r=new this(e,...t);return"Declaration"===e.tree.name?r.iterateDeclaration(e.tree):r.iterate(e.tree),r}iterateDeclaration(e){"Declaration"===e.name&&(this.enter(e)&&Le.declValue(e)?.cursor().iterate(this.enter.bind(this),this.leave.bind(this)),this.leave(e))}iterate(e){e.cursor().iterate(this.enter.bind(this),this.leave.bind(this))}iterateExcludingSuccessors(e){this.enter(e)&&e.firstChild?.cursor().iterate(this.enter.bind(this),this.leave.bind(this)),this.leave(e)}enter(e){return!0}leave(e){}}function Ce(e){return class{matchType=e;accepts(e){return!0}matches(e,t){return null}}}class xe extends Se{#ke=[];#Ie=new Map;computedText;#we(e){return`${e.from}:${e.to}`}constructor(e,t){super(e),this.computedText=new Te(e.rule.substring(e.tree.from)),this.#ke.push(...t.filter((t=>!e.propertyName||t.accepts(e.propertyName)))),this.#ke.push(new De)}leave({node:e}){for(const t of this.#ke){const r=t.matches(e,this);if(r){this.computedText.push(r,e.from-this.ast.tree.from),this.#Ie.set(this.#we(e),r);break}}}matchText(e){const t=this.#ke.splice(0);this.#ke.push(new De),this.iterateExcludingSuccessors(e),this.#ke.push(...t)}getMatch(e){return this.#Ie.get(this.#we(e))}hasUnresolvedVars(e){return this.hasUnresolvedVarsRange(e,e)}hasUnresolvedVarsRange(e,t){return this.computedText.hasUnresolvedVars(e.from-this.ast.tree.from,t.to-this.ast.tree.from)}getComputedText(e,t){return this.getComputedTextRange(e,e,t)}getComputedTextRange(e,t,r){return this.computedText.get(e.from-this.ast.tree.from,t.to-this.ast.tree.from,r)}}class Re{match;offset;#Se=null;constructor(e,t){this.match=e,this.offset=t}get end(){return this.offset+this.length}get length(){return this.match.text.length}get computedText(){return null===this.#Se&&(this.#Se=this.match.computedText()),this.#Se}}class Te{#Ce=[];text;#xe=!0;constructor(e){this.text=e}clear(){this.#Ce.splice(0)}get chunkCount(){return this.#Ce.length}#Re(){this.#xe||(this.#Ce.sort(((e,t)=>e.offset<t.offset?-1:t.offset<e.offset?1:e.end>t.end?-1:e.end<t.end?1:0)),this.#xe=!0)}push(e,t){if(!function(e){return Boolean(e.computedText)}(e)||t<0||t>=this.text.length)return;const r=new Re(e,t);r.end>this.text.length||(this.#xe=!1,this.#Ce.push(r))}*#Te(e,t){this.#Re();let r=this.#Ce.findIndex((t=>t.offset>=e));for(;r>=0&&r<this.#Ce.length&&this.#Ce[r].end>e&&e<t;)if(this.#Ce[r].end>t)r++;else for(yield this.#Ce[r],e=this.#Ce[r].end;e<t&&r<this.#Ce.length&&this.#Ce[r].offset<e;)r++}hasUnresolvedVars(e,t){for(const r of this.#Te(e,t))if(null===r.computedText)return!0;return!1}*#Me(e,t){for(const r of this.#Te(e,t)){const n=this.text.substring(e,Math.min(r.offset,t));yield n,t>=r.end&&(yield r),e=r.end}if(e<t){const r=this.text.substring(e,t);yield r}}get(e,t,r){const n=[],s=e=>{if("string"==typeof e)return e;const t=r?.get(e.match);return t?s(t):e.computedText??e.match.text};for(const r of this.#Me(e,t)){const e=s(r);0!==e.length&&(n.length>0&&Me(n[n.length-1],e)&&n.push(" "),n.push(e))}return n.join("")}}function Me(e,t){const r=Array.isArray(e)?e.findLast((e=>e.textContent))?.textContent:e,n=Array.isArray(t)?t.find((e=>e.textContent))?.textContent:t,s=r?r[r.length-1]:"",i=n?n[0]:"";return!(/\s/.test(s)||/\s/.test(i)||["","(","{","}",";","["].includes(s)||["","(",")",",",":","*","{",";","]"].includes(i))}const Pe=Map;var Le;!function(e){function t(e){const t=[];for(;e;)t.push(e),e=e.nextSibling;return t}function r(e){return t(e?.firstChild??null)}function n(e){const t=[];let r=[];for(const n of e)","===n.name?(t.push(r),r=[]):r.push(n);return t.push(r),t}e.siblings=t,e.children=r,e.declValue=function(e){return"Declaration"!==e.name?null:r(e).find((e=>":"===e.name))?.nextSibling??null},e.stripComments=function*(e){for(const t of e)"Comment"!==t.type.name&&(yield t)},e.split=n,e.callArgs=function(e){const t=r(e.getChild("ArgList")),s=t.splice(0,1)[0],i=t.pop();return"("!==s?.name||")"!==i?.name?[]:n(t)}}(Le||(Le={}));class Ee{text;node;name;fallback;matching;computedTextCallback;constructor(e,t,r,n,s,i){this.text=e,this.node=t,this.name=r,this.fallback=n,this.matching=s,this.computedTextCallback=i}computedText(){return this.computedTextCallback(this,this.matching)}}class Ae extends(Ce(Ee)){#Pe;constructor(e){super(),this.#Pe=e}matches(e,t){const r=e.getChild("Callee"),n=e.getChild("ArgList");if("CallExpression"!==e.name||!r||"var"!==t.ast.text(r)||!n)return null;const[s,i,...o]=Le.children(n);if("("!==s?.name||"VariableName"!==i?.name)return null;if(o.length<=1&&")"!==o[0]?.name)return null;let a=[];if(o.length>1){if(","!==o.shift()?.name)return null;if(")"!==o.pop()?.name)return null;if(a=o,0===a.length)return null;if(a.some((e=>","===e.name)))return null}const l=t.ast.text(i);return l.startsWith("--")?new Ee(t.ast.text(e),e,l,a,t,this.#Pe):null}}class Oe{text;node;computedText;constructor(e,t){this.text=e,this.node=t,"Comment"===t.name&&(this.computedText=()=>"")}render(){return[document.createTextNode(this.text)]}}class De extends(Ce(Oe)){accepts(){return!0}matches(e,t){if(!e.firstChild||"NumberLiteral"===e.name){const r=t.ast.text(e);if(r.length)return new Oe(r,e)}return null}}function Ne(e){return ve.parse(e).topNode.getChild("RuleSet")?.getChild("Block")?.getChild("Declaration")??null}function Fe(e,t){const r=Be(e);if(!r)return null;const n=`*{${r}: ${t};}`,s=Ne(n);if(!s||s.type.isError)return null;const i=Le.children(s);if(i.length<3)return null;const[o,a,l]=i;if(!o||o.type.isError||!a||a.type.isError||!l||l.type.isError)return null;const d=Le.siblings(s).slice(1),[c,h]=d.splice(d.length-2,2);if(";"!==c?.name&&"}"!==h?.name)return null;const u=new we(t,n,s,r,d);return u.text(o)!==r||":"!==a.name?null:u}function Be(e){const t=`*{${e}: inherit;}`,r=Ne(t);if(!r||r.type.isError)return null;const n=r.getChild("PropertyName")??r.getChild("VariableName");return n?ke(n,t):null}class He extends Se{#Le=null;#Ee;constructor(e,t){super(e),this.#Ee=t}enter({node:e}){return!this.#Le&&(!this.#Ee(e)||(this.#Le=this.#Le??e,!1))}static find(e,t){return He.walk(e,t).#Le}static findAll(e,t){const r=[];return He.walk(e,(e=>(t(e)&&r.push(e),!1))),r}}var Ue=Object.freeze({__proto__:null,parseFontVariationSettings:function(e){if(ge.has(e.trim())||"normal"===e.trim())return[];const t=[];for(const r of be(ye(e))){const e=r.match(me);e&&t.push({tag:e[1]||e[2],value:parseFloat(e[3])})}return t},parseFontFamily:function(e){if(ge.has(e.trim()))return[];const t=[];for(const r of be(ye(e))){const e=r.match(fe);e?t.push(e[1]||e[2]):t.push(r)}return t},splitByComma:be,stripComments:ye,SyntaxTree:we,TreeWalker:Se,matcherBase:Ce,BottomUpTreeMatching:xe,ComputedText:Te,requiresSpace:Me,CSSControlMap:Pe,get ASTUtils(){return Le},VariableMatch:Ee,VariableMatcher:Ae,TextMatch:Oe,tokenizeDeclaration:Fe,tokenizePropertyName:Be,TreeSearch:He});class _e{text="";range;styleSheetId;cssModel;constructor(e){this.cssModel=e}rebase(e){this.styleSheetId===e.styleSheetId&&this.range&&(e.oldRange.equal(this.range)?this.reinitialize(e.payload):this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange))}equal(e){return!!(this.styleSheetId&&this.range&&e.range)&&(this.styleSheetId===e.styleSheetId&&this.range.equal(e.range))}lineNumberInSource(){if(this.range)return this.header()?.lineNumberInSource(this.range.startLine)}columnNumberInSource(){if(this.range)return this.header()?.columnNumberInSource(this.range.startLine,this.range.startColumn)}header(){return this.styleSheetId?this.cssModel.styleSheetHeaderForId(this.styleSheetId):null}rawLocation(){const e=this.header();if(!e||void 0===this.lineNumberInSource())return null;const t=Number(this.lineNumberInSource());return new Pr(e,t,this.columnNumberInSource())}}var qe=Object.freeze({__proto__:null,CSSQuery:_e});class ze extends _e{name;physicalAxes;logicalAxes;static parseContainerQueriesPayload(e,t){return t.map((t=>new ze(e,t)))}constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){this.text=e.text,this.range=e.range?r.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId,this.name=e.name,this.physicalAxes=e.physicalAxes,this.logicalAxes=e.logicalAxes}active(){return!0}async getContainerForNode(e){const t=await this.cssModel.domModel().getContainerForNode(e,this.name,this.physicalAxes,this.logicalAxes);if(t)return new je(t)}}class je{containerNode;constructor(e){this.containerNode=e}async getContainerSizeDetails(){const e=await this.containerNode.domModel().cssModel().getComputedStyle(this.containerNode.id);if(!e)return;const t=e.get("container-type"),r=e.get("contain"),n=e.get("writing-mode");if(!t||!r||!n)return;const s=Ve(`${t} ${r}`),i=We(s,n);let o,a;return"Both"!==i&&"Horizontal"!==i||(o=e.get("width")),"Both"!==i&&"Vertical"!==i||(a=e.get("height")),{queryAxis:s,physicalAxis:i,width:o,height:a}}}const Ve=e=>{const t=e.split(" ");let r=!1,n=!1;for(const e of t){if("size"===e)return"size";r=r||"inline-size"===e,n=n||"block-size"===e}return r&&n?"size":r?"inline-size":n?"block-size":""},We=(e,t)=>{const r=t.startsWith("vertical");switch(e){case"":return"";case"size":return"Both";case"inline-size":return r?"Vertical":"Horizontal";case"block-size":return r?"Horizontal":"Vertical"}};var Ge=Object.freeze({__proto__:null,CSSContainerQuery:ze,CSSContainerQueryContainer:je,getQueryAxis:Ve,getPhysicalAxisFromQueryAxis:We});class Ke extends _e{static parseLayerPayload(e,t){return t.map((t=>new Ke(e,t)))}constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){this.text=e.text,this.range=e.range?r.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId}active(){return!0}}var Qe=Object.freeze({__proto__:null,CSSLayer:Ke});class $e{#Ae;#Oe;constructor(e){this.#Ae=e.active,this.#Oe=[];for(let t=0;t<e.expressions.length;++t)this.#Oe.push(Xe.parsePayload(e.expressions[t]))}static parsePayload(e){return new $e(e)}active(){return this.#Ae}expressions(){return this.#Oe}}class Xe{#u;#De;#Ne;#Fe;#Be;constructor(e){this.#u=e.value,this.#De=e.unit,this.#Ne=e.feature,this.#Fe=e.valueRange?r.TextRange.TextRange.fromObject(e.valueRange):null,this.#Be=e.computedLength||null}static parsePayload(e){return new Xe(e)}value(){return this.#u}unit(){return this.#De}feature(){return this.#Ne}valueRange(){return this.#Fe}computedLength(){return this.#Be}}class Je extends _e{source;sourceURL;mediaList;static parseMediaArrayPayload(e,t){return t.map((t=>new Je(e,t)))}constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){if(this.text=e.text,this.source=e.source,this.sourceURL=e.sourceURL||"",this.range=e.range?r.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId,this.mediaList=null,e.mediaList){this.mediaList=[];for(let t=0;t<e.mediaList.length;++t)this.mediaList.push($e.parsePayload(e.mediaList[t]))}}active(){if(!this.mediaList)return!0;for(let e=0;e<this.mediaList.length;++e)if(this.mediaList[e].active())return!0;return!1}}var Ye=Object.freeze({__proto__:null,CSSMediaQuery:$e,CSSMediaQueryExpression:Xe,CSSMedia:Je,Source:{LINKED_SHEET:"linkedSheet",INLINE_SHEET:"inlineSheet",MEDIA_RULE:"mediaRule",IMPORT_RULE:"importRule"}});class Ze extends _e{static parseScopesPayload(e,t){return t.map((t=>new Ze(e,t)))}constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){this.text=e.text,this.range=e.range?r.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId}active(){return!0}}var et=Object.freeze({__proto__:null,CSSScope:Ze});class tt{ownerStyle;index;name;value;important;disabled;parsedOk;implicit;text;range;#He;#Ue;#Fe;#_e;#qe=[];constructor(e,t,n,s,i,o,a,l,d,c,h){if(this.ownerStyle=e,this.index=t,this.name=n,this.value=s,this.important=i,this.disabled=o,this.parsedOk=a,this.implicit=l,this.text=d,this.range=c?r.TextRange.TextRange.fromObject(c):null,this.#He=!0,this.#Ue=null,this.#Fe=null,h&&h.length>0)for(const r of h)this.#qe.push(new tt(e,++t,r.name,r.value,i,o,a,!0));else{const r=k().getLonghands(n);for(const n of r||[])this.#qe.push(new tt(e,++t,n,"",i,o,a,!0))}}static parsePayload(e,t,r){return new tt(e,t,r.name,r.value,r.important||!1,r.disabled||!1,!("parsedOk"in r)||Boolean(r.parsedOk),Boolean(r.implicit),r.text,r.range,r.longhandProperties)}ensureRanges(){if(this.#Ue&&this.#Fe)return;const e=this.range,t=this.text?new r.Text.Text(this.text):null;if(!e||!t)return;const n=t.value().indexOf(this.name),s=t.value().lastIndexOf(this.value);if(-1===n||-1===s||n>s)return;const i=new r.TextRange.SourceRange(n,this.name.length),o=new r.TextRange.SourceRange(s,this.value.length);function a(e,t,r){return 0===e.startLine&&(e.startColumn+=r,e.endColumn+=r),e.startLine+=t,e.endLine+=t,e}this.#Ue=a(t.toTextRange(i),e.startLine,e.startColumn),this.#Fe=a(t.toTextRange(o),e.startLine,e.startColumn)}nameRange(){return this.ensureRanges(),this.#Ue}valueRange(){return this.ensureRanges(),this.#Fe}rebase(e){this.ownerStyle.styleSheetId===e.styleSheetId&&this.range&&(this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange))}setActive(e){this.#He=e}get propertyText(){return void 0!==this.text?this.text:""===this.name?"":this.name+": "+this.value+(this.important?" !important":"")+";"}activeInStyle(){return this.#He}trimmedValueWithoutImportant(){const e="!important";return this.value.endsWith(e)?this.value.slice(0,-10).trim():this.value.trim()}async setText(t,n,i){if(!this.ownerStyle)throw new Error("No ownerStyle for property");if(!this.ownerStyle.styleSheetId)throw new Error("No owner style id");if(!this.range||!this.ownerStyle.range)throw new Error("Style not editable");if(n&&(a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited),this.ownerStyle.parentRule?.isKeyframeRule()&&a.userMetrics.actionTaken(a.UserMetrics.Action.StylePropertyInsideKeyframeEdited),this.name.startsWith("--")&&a.userMetrics.actionTaken(a.UserMetrics.Action.CustomPropertyEdited)),i&&t===this.propertyText)return this.ownerStyle.cssModel().domModel().markUndoableState(!n),!0;const o=this.range.relativeTo(this.ownerStyle.range.startLine,this.ownerStyle.range.startColumn),l=this.ownerStyle.cssText?this.detectIndentation(this.ownerStyle.cssText):e.Settings.Settings.instance().moduleSetting("text-editor-indent").get(),d=this.ownerStyle.cssText?l.substring(0,this.ownerStyle.range.endColumn):"",c=new r.Text.Text(this.ownerStyle.cssText||"").replaceRange(o,s.StringUtilities.sprintf(";%s;",t)),h=await tt.formatStyle(c,l,d);return this.ownerStyle.setText(h,n)}static async formatStyle(e,t,n){const s=t.substring(n.length)+t;t&&(t="\n"+t);let i="",o="",a="",l=!1,d=!1;const c=r.CodeMirrorUtils.createCssTokenizer();return await c("*{"+e+"}",(function(e,r){if(!l){const n=r?.includes("comment")&&function(e){const t=e.indexOf(":");if(-1===t)return!1;const r=e.substring(2,t).trim();return k().isCSSPropertyName(r)}(e),s=r?.includes("def")||r?.includes("string")||r?.includes("meta")||r?.includes("property")||r?.includes("variableName")&&"variableName.function"!==r;return n?i=i.trimEnd()+t+e:s?(l=!0,a=e):(";"!==e||d)&&(i+=e,e.trim()&&!r?.includes("comment")&&(d=";"!==e)),void("{"!==e||r||(d=!1))}if("}"===e||";"===e){const r=a.trim();return i=i.trimEnd()+t+r+(r.endsWith(":")?" ":"")+e,d=!1,l=!1,void(o="")}if(k().isGridAreaDefiningProperty(o)){const t=y.exec(e);t&&0===t.index&&!a.trimEnd().endsWith("]")&&(a=a.trimEnd()+"\n"+s)}o||":"!==e||(o=a);a+=e})),l&&(i+=a),i=i.substring(2,i.length-1).trimEnd(),i+(t?"\n"+n:"")}detectIndentation(e){const t=e.split("\n");return t.length<2?"":r.TextUtils.Utils.lineIndent(t[1])}setValue(e,t,r,n){const s=this.name+": "+e+(this.important?" !important":"")+";";this.setText(s,t,r).then(n)}async setDisabled(e){if(!this.ownerStyle)return!1;if(e===this.disabled)return!0;if(!this.text)return!0;const t=this.text.trim(),r=e=>e+(e.endsWith(";")?"":";");let n;return n=e?"/* "+r(ye(t))+" */":r(this.text.substring(2,t.length-2).trim()),this.setText(n,!0,!0)}setDisplayedStringForInvalidProperty(e){this.#_e=e}getInvalidStringForInvalidProperty(){return this.#_e}getLonghandProperties(){return this.#qe}}var rt,nt=Object.freeze({__proto__:null,CSSProperty:tt});class st{#ze;parentRule;#je;styleSheetId;range;cssText;#Ve;#We;#Ge;#Ke;type;constructor(e,t,r,n){this.#ze=e,this.parentRule=t,this.#Qe(r),this.type=n}rebase(e){if(this.styleSheetId===e.styleSheetId&&this.range)if(e.oldRange.equal(this.range))this.#Qe(e.payload);else{this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange);for(let t=0;t<this.#je.length;++t)this.#je[t].rebase(e)}}#Qe(e){this.styleSheetId=e.styleSheetId,this.range=e.range?r.TextRange.TextRange.fromObject(e.range):null;const t=e.shorthandEntries;this.#Ve=new Map,this.#We=new Set;for(let e=0;e<t.length;++e)this.#Ve.set(t[e].name,t[e].value),t[e].important&&this.#We.add(t[e].name);if(this.#je=[],e.cssText&&this.range){const t=[];for(const r of e.cssProperties){if(!r.range)continue;const e=tt.parsePayload(this,this.#je.length,r);this.#je.push(e);for(const r of e.getLonghandProperties())t.push(r)}for(const e of t)e.index=this.#je.length,this.#je.push(e)}else for(const t of e.cssProperties)this.#je.push(tt.parsePayload(this,this.#je.length,t));this.#$e(),this.#Xe(),this.#Ge=new Map;for(const e of this.#je)e.activeInStyle()&&this.#Ge.set(e.name,e);this.cssText=e.cssText,this.#Ke=null}#$e(){if(this.range)return;if(!this.#Ve.size)return;const e=new Set;for(const t of this.#je)e.add(t.name);const t=[];for(const r of this.#je){const n=k().getShorthands(r.name)||[];for(const r of n){if(e.has(r))continue;const n=this.#Ve.get(r);if(!n)continue;const s=Boolean(this.#We.has(r)),i=new tt(this,this.allProperties().length,r,n,s,!1,!0,!1);t.push(i),e.add(r)}}this.#je=this.#je.concat(t)}#Je(){if(this.range)return this.#je.filter((function(e){return Boolean(e.range)}));const e=[];for(const t of this.#je){const r=k().getShorthands(t.name)||[];let n=!1;for(const e of r)if(this.#Ve.get(e)){n=!0;break}n||e.push(t)}return e}leadingProperties(){return this.#Ke||(this.#Ke=this.#Je()),this.#Ke}target(){return this.#ze.target()}cssModel(){return this.#ze}#Xe(){const e=new Map,t=new Set;for(const r of this.#je){const n=k().canonicalPropertyName(r.name);if(r.disabled||!r.parsedOk){r.name.startsWith("--")&&(e.get(n)?.setActive(!1),e.delete(n)),r.setActive(!1);continue}if(t.has(r))continue;for(const n of r.getLonghandProperties()){const r=e.get(n.name);r?!r.important||n.important?(r.setActive(!1),e.set(n.name,n)):n.setActive(!1):e.set(n.name,n),t.add(n)}const s=e.get(n);s?!s.important||r.important?(s.setActive(!1),e.set(n,r)):r.setActive(!1):e.set(n,r)}}allProperties(){return this.#je}hasActiveProperty(e){return this.#Ge.has(e)}getPropertyValue(e){const t=this.#Ge.get(e);return t?t.value:""}isPropertyImplicit(e){const t=this.#Ge.get(e);return!!t&&t.implicit}propertyAt(e){return e<this.allProperties().length?this.allProperties()[e]:null}pastLastSourcePropertyIndex(){for(let e=this.allProperties().length-1;e>=0;--e)if(this.allProperties()[e].range)return e+1;return 0}#Ye(e){const t=this.propertyAt(e);if(t&&t.range)return t.range.collapseToStart();if(!this.range)throw new Error("CSSStyleDeclaration.range is null");return this.range.collapseToEnd()}newBlankProperty(e){e=void 0===e?this.pastLastSourcePropertyIndex():e;return new tt(this,e,"","",!1,!1,!0,!1,"",this.#Ye(e))}setText(e,t){return this.range&&this.styleSheetId?this.#ze.setStyleText(this.styleSheetId,this.range,e,t):Promise.resolve(!1)}insertPropertyAt(e,t,r,n){this.newBlankProperty(e).setText(t+": "+r+";",!1,!0).then(n)}appendProperty(e,t,r){this.insertPropertyAt(this.allProperties().length,e,t,r)}}!function(e){e.Regular="Regular",e.Inline="Inline",e.Attributes="Attributes",e.Pseudo="Pseudo"}(rt||(rt={}));var it=Object.freeze({__proto__:null,CSSStyleDeclaration:st,get Type(){return rt}});class ot extends _e{static parseSupportsPayload(e,t){return t.map((t=>new ot(e,t)))}#He=!0;constructor(e,t){super(e),this.reinitialize(t)}reinitialize(e){this.text=e.text,this.range=e.range?r.TextRange.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId,this.#He=e.active}active(){return this.#He}}var at=Object.freeze({__proto__:null,CSSSupports:ot});class lt{cssModelInternal;styleSheetId;sourceURL;origin;style;constructor(e,t){if(this.cssModelInternal=e,this.styleSheetId=t.styleSheetId,this.styleSheetId){const e=this.getStyleSheetHeader(this.styleSheetId);this.sourceURL=e.sourceURL}this.origin=t.origin,this.style=new st(this.cssModelInternal,this,t.style,rt.Regular)}rebase(e){this.styleSheetId===e.styleSheetId&&this.style.rebase(e)}resourceURL(){if(!this.styleSheetId)return s.DevToolsPath.EmptyUrlString;return this.getStyleSheetHeader(this.styleSheetId).resourceURL()}isUserAgent(){return"user-agent"===this.origin}isInjected(){return"injected"===this.origin}isViaInspector(){return"inspector"===this.origin}isRegular(){return"regular"===this.origin}isKeyframeRule(){return!1}cssModel(){return this.cssModelInternal}getStyleSheetHeader(e){const t=this.cssModelInternal.styleSheetHeaderForId(e);return console.assert(null!==t),t}}class dt{text;range;specificity;constructor(e){this.text=e.text,e.range&&(this.range=r.TextRange.TextRange.fromObject(e.range)),e.specificity&&(this.specificity=e.specificity)}rebase(e){this.range&&(this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange))}}class ct extends lt{selectors;nestingSelectors;media;containerQueries;supports;scopes;layers;ruleTypes;wasUsed;constructor(e,t,r){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.reinitializeSelectors(t.selectorList),this.nestingSelectors=t.nestingSelectors,this.media=t.media?Je.parseMediaArrayPayload(e,t.media):[],this.containerQueries=t.containerQueries?ze.parseContainerQueriesPayload(e,t.containerQueries):[],this.scopes=t.scopes?Ze.parseScopesPayload(e,t.scopes):[],this.supports=t.supports?ot.parseSupportsPayload(e,t.supports):[],this.layers=t.layers?Ke.parseLayerPayload(e,t.layers):[],this.ruleTypes=t.ruleTypes||[],this.wasUsed=r||!1}static createDummyRule(e,t){const n={selectorList:{text:"",selectors:[{text:t,value:void 0}]},style:{styleSheetId:"0",range:new r.TextRange.TextRange(0,0,0,0),shorthandEntries:[],cssProperties:[]},origin:"inspector"};return new ct(e,n)}reinitializeSelectors(e){this.selectors=[];for(let t=0;t<e.selectors.length;++t)this.selectors.push(new dt(e.selectors[t]))}setSelectorText(e){const t=this.styleSheetId;if(!t)throw"No rule stylesheet id";const r=this.selectorRange();if(!r)throw"Rule selector is not editable";return this.cssModelInternal.setSelectorText(t,r,e)}selectorText(){return this.selectors.map((e=>e.text)).join(", ")}selectorRange(){if(0===this.selectors.length)return null;const e=this.selectors[0].range,t=this.selectors[this.selectors.length-1].range;return e&&t?new r.TextRange.TextRange(e.startLine,e.startColumn,t.endLine,t.endColumn):null}lineNumberInSource(e){const t=this.selectors[e];if(!t||!t.range||!this.styleSheetId)return 0;return this.getStyleSheetHeader(this.styleSheetId).lineNumberInSource(t.range.startLine)}columnNumberInSource(e){const t=this.selectors[e];if(!t||!t.range||!this.styleSheetId)return;return this.getStyleSheetHeader(this.styleSheetId).columnNumberInSource(t.range.startLine,t.range.startColumn)}rebase(e){if(this.styleSheetId!==e.styleSheetId)return;const t=this.selectorRange();if(t&&t.equal(e.oldRange))this.reinitializeSelectors(e.payload);else for(let t=0;t<this.selectors.length;++t)this.selectors[t].rebase(e);this.media.forEach((t=>t.rebase(e))),this.containerQueries.forEach((t=>t.rebase(e))),this.scopes.forEach((t=>t.rebase(e))),this.supports.forEach((t=>t.rebase(e))),super.rebase(e)}}class ht extends lt{#Ze;constructor(e,t){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.#Ze=new dt(t.propertyName)}propertyName(){return this.#Ze}initialValue(){return this.style.hasActiveProperty("initial-value")?this.style.getPropertyValue("initial-value"):null}syntax(){return this.style.getPropertyValue("syntax")}inherits(){return"true"===this.style.getPropertyValue("inherits")}setPropertyName(e){const t=this.styleSheetId;if(!t)throw new Error("No rule stylesheet id");const r=this.#Ze.range;if(!r)throw new Error("Property name is not editable");return this.cssModelInternal.setPropertyRulePropertyName(t,r,e)}}class ut extends lt{#et;constructor(e,t){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.#et=new dt(t.fontPaletteName)}name(){return this.#et}}class gt{#tt;#rt;constructor(e,t){this.#tt=new dt(t.animationName),this.#rt=t.keyframes.map((t=>new pt(e,t)))}name(){return this.#tt}keyframes(){return this.#rt}}class pt extends lt{#nt;constructor(e,t){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.reinitializeKey(t.keyText)}key(){return this.#nt}reinitializeKey(e){this.#nt=new dt(e)}rebase(e){this.styleSheetId===e.styleSheetId&&this.#nt.range&&(e.oldRange.equal(this.#nt.range)?this.reinitializeKey(e.payload):this.#nt.rebase(e),super.rebase(e))}isKeyframeRule(){return!0}setKeyText(e){const t=this.styleSheetId;if(!t)throw"No rule stylesheet id";const r=this.#nt.range;if(!r)throw"Keyframe key is not editable";return this.cssModelInternal.setKeyframeKey(t,r,e)}}class mt extends lt{#Ze;#He;constructor(e,t){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.#Ze=new dt(t.name),this.#He=t.active}name(){return this.#Ze}active(){return this.#He}}var ft=Object.freeze({__proto__:null,CSSRule:lt,CSSStyleRule:ct,CSSPropertyRule:ht,CSSFontPaletteValuesRule:ut,CSSKeyframesRule:gt,CSSKeyframeRule:pt,CSSPositionTryRule:mt});function bt(e,t){if(!t.styleSheetId||!t.range)return!1;for(const r of e)if(t.styleSheetId===r.styleSheetId&&r.range&&t.range.equal(r.range))return!0;return!1}function yt(e){const t=e.allProperties();for(let e=0;e<t.length;++e){const r=t[e];if(r.activeInStyle()&&k().isPropertyInherited(r.name))return!0}return!1}function vt(e){for(const t of e)s(t);const t=[];for(const s of e){const e=t[t.length-1];e&&"user-agent"===s.rule.origin&&"user-agent"===e.rule.origin&&s.rule.selectorList.text===e.rule.selectorList.text&&n(s)===n(e)?r(s,e):t.push(s)}return t;function r(e,t){const r=new Map,n=new Map;for(const e of t.rule.style.shorthandEntries)r.set(e.name,e.value);for(const e of t.rule.style.cssProperties)n.set(e.name,e.value);for(const t of e.rule.style.shorthandEntries)r.set(t.name,t.value);for(const t of e.rule.style.cssProperties)n.set(t.name,t.value);t.rule.style.shorthandEntries=[...r.entries()].map((([e,t])=>({name:e,value:t}))),t.rule.style.cssProperties=[...n.entries()].map((([e,t])=>({name:e,value:t})))}function n(e){return e.rule.media?e.rule.media.map((e=>e.text)).join(", "):null}function s(e){const{matchingSelectors:t,rule:r}=e;"user-agent"===r.origin&&t.length&&(r.selectorList.selectors=r.selectorList.selectors.filter(((e,r)=>t.includes(r))),r.selectorList.text=r.selectorList.selectors.map((e=>e.text)).join(", "),e.matchingSelectors=t.map(((e,t)=>t)))}}function kt(e){const t=new Map;for(let r=0;r<e.matchingSelectors.length;r++){const n=e.matchingSelectors[r],s=e.rule.selectorList.selectors[n].text.match(/::highlight\((.*)\)/);if(s){const e=s[1],r=t.get(e);r?r.push(n):t.set(e,[n])}}return t}class It{#st;#it;#ot;constructor(e,t){this.#it=e,this.#st=t}isAtProperty(){return this.#st instanceof ht}propertyName(){return this.#st instanceof ht?this.#st.propertyName().text:this.#st.propertyName}initialValue(){return this.#st instanceof ht?this.#st.initialValue():this.#st.initialValue?.text??null}inherits(){return this.#st instanceof ht?this.#st.inherits():this.#st.inherits}syntax(){return this.#st instanceof ht?this.#st.syntax():`"${this.#st.syntax}"`}#at(){if(this.#st instanceof ht)return[];const{inherits:e,initialValue:t,syntax:r}=this.#st,n=[{name:"inherits",value:`${e}`},{name:"syntax",value:`"${r}"`}];return void 0!==t&&n.push({name:"initial-value",value:t.text}),n}style(){return this.#ot||(this.#ot=this.#st instanceof ht?this.#st.style:new st(this.#it,null,{cssProperties:this.#at(),shorthandEntries:[]},rt.Pseudo)),this.#ot}}class wt{#ze;#lt;#dt;#ct;#rt;#ht;#ut=new Map;#gt;#pt;#mt;#ft;#bt;#yt;#vt;#kt;#It;static async create(e){const t=new wt(e);return await t.init(e),t}constructor({cssModel:e,node:t,animationsPayload:r,parentLayoutNodeId:n,positionTryRules:s,propertyRules:i,cssPropertyRegistrations:o,fontPaletteValuesRule:a}){this.#ze=e,this.#lt=t,this.#dt=new Map,this.#ct=new Map,this.#ht=[...i.map((t=>new ht(e,t))),...o].map((t=>new It(e,t))),this.#rt=[],r&&(this.#rt=r.map((t=>new gt(e,t)))),this.#bt=s.map((t=>new mt(e,t))),this.#ft=n,this.#It=a?new ut(e,a):void 0,this.#gt=new Map,this.#pt=new Set,this.#mt=new Map,this.#ut=new Map}async init({matchedPayload:e,inheritedPayload:t,inlinePayload:r,attributesPayload:n,pseudoPayload:s,inheritedPseudoPayload:i}){e=vt(e);for(const e of t)e.matchedCSSRules=vt(e.matchedCSSRules);this.#yt=await this.buildMainCascade(r,n,e,t),[this.#vt,this.#kt]=this.buildPseudoCascades(s,i);for(const e of Array.from(this.#kt.values()).concat(Array.from(this.#vt.values())).concat(this.#yt))for(const t of e.styles())this.#mt.set(t,e);for(const e of this.#ht)this.#ut.set(e.propertyName(),e)}async buildMainCascade(e,t,r,n){const s=[],i=[];function o(){if(!t)return;const e=new st(this.#ze,null,t,rt.Attributes);this.#gt.set(e,this.#lt),i.push(e)}if(e&&this.#lt.nodeType()===Node.ELEMENT_NODE){const t=new st(this.#ze,null,e,rt.Inline);this.#gt.set(t,this.#lt),i.push(t)}let a;for(let e=r.length-1;e>=0;--e){const t=new ct(this.#ze,r[e].rule);!t.isInjected()&&!t.isUserAgent()||a||(a=!0,o.call(this)),this.#gt.set(t.style,this.#lt),i.push(t.style),this.addMatchingSelectors(this.#lt,t,r[e].matchingSelectors)}a||o.call(this),s.push(new St(this,i,!1));let l=this.#lt.parentNode;const d=async e=>e.hasAssignedSlot()?await(e.assignedSlot?.deferredNode.resolvePromise())??null:e.parentNode;for(let e=0;l&&n&&e<n.length;++e){const t=[],r=n[e],o=r.inlineStyle?new st(this.#ze,null,r.inlineStyle,rt.Inline):null;o&&yt(o)&&(this.#gt.set(o,l),t.push(o),this.#pt.add(o));const a=r.matchedCSSRules||[];for(let e=a.length-1;e>=0;--e){const r=new ct(this.#ze,a[e].rule);this.addMatchingSelectors(l,r,a[e].matchingSelectors),yt(r.style)&&((r.style.allProperties().some((e=>k().isCustomProperty(e.name)))||!bt(i,r.style)&&!bt(this.#pt,r.style))&&(this.#gt.set(r.style,l),t.push(r.style),this.#pt.add(r.style)))}l=await d(l),s.push(new St(this,t,!0))}return new Rt(s,this.#ht)}buildSplitCustomHighlightCascades(e,t,r,n){const s=new Map;for(let n=e.length-1;n>=0;--n){const i=kt(e[n]);for(const[o,a]of i){const i=new ct(this.#ze,e[n].rule);this.#gt.set(i.style,t),r&&this.#pt.add(i.style),this.addMatchingSelectors(t,i,a);const l=s.get(o);l?l.push(i.style):s.set(o,[i.style])}}for(const[e,t]of s){const s=new St(this,t,r,!0),i=n.get(e);i?i.push(s):n.set(e,[s])}}buildPseudoCascades(e,t){const r=new Map,n=new Map;if(!e)return[r,n];const s=new Map,i=new Map;for(let t=0;t<e.length;++t){const r=e[t],n=this.#lt.pseudoElements().get(r.pseudoType)?.at(-1)||null,o=[],a=r.matches||[];if("highlight"===r.pseudoType)this.buildSplitCustomHighlightCascades(a,this.#lt,!1,i);else{for(let e=a.length-1;e>=0;--e){const t=new ct(this.#ze,a[e].rule);o.push(t.style);const s=k().isHighlightPseudoType(r.pseudoType)?this.#lt:n;this.#gt.set(t.style,s),s&&this.addMatchingSelectors(s,t,a[e].matchingSelectors)}const e=k().isHighlightPseudoType(r.pseudoType),t=new St(this,o,!1,e);s.set(r.pseudoType,[t])}}if(t){let e=this.#lt.parentNode;for(let r=0;e&&r<t.length;++r){const n=t[r].pseudoElements;for(let t=0;t<n.length;++t){const r=n[t],o=r.matches||[];if("highlight"===r.pseudoType)this.buildSplitCustomHighlightCascades(o,e,!0,i);else{const t=[];for(let r=o.length-1;r>=0;--r){const n=new ct(this.#ze,o[r].rule);t.push(n.style),this.#gt.set(n.style,e),this.#pt.add(n.style),this.addMatchingSelectors(e,n,o[r].matchingSelectors)}const n=k().isHighlightPseudoType(r.pseudoType),i=new St(this,t,!0,n),a=s.get(r.pseudoType);a?a.push(i):s.set(r.pseudoType,[i])}}e=e.parentNode}}for(const[e,t]of s.entries())r.set(e,new Rt(t,this.#ht));for(const[e,t]of i.entries())n.set(e,new Rt(t,this.#ht));return[r,n]}addMatchingSelectors(e,t,r){for(const n of r){const r=t.selectors[n];r&&this.setSelectorMatches(e,r.text,!0)}}node(){return this.#lt}cssModel(){return this.#ze}hasMatchingSelectors(e){return(0===e.selectors.length||this.getMatchingSelectors(e).length>0)&&function(e){if(!e.parentRule)return!0;const t=e.parentRule,r=[...t.media,...t.containerQueries,...t.supports,...t.scopes];for(const e of r)if(!e.active())return!1;return!0}(e.style)}getParentLayoutNodeId(){return this.#ft}getMatchingSelectors(e){const t=this.nodeForStyle(e.style);if(!t||"number"!=typeof t.id)return[];const r=this.#ct.get(t.id);if(!r)return[];const n=[];for(let t=0;t<e.selectors.length;++t)r.get(e.selectors[t].text)&&n.push(t);return n}async recomputeMatchingSelectors(e){const t=this.nodeForStyle(e.style);if(!t)return;const r=[];for(const s of e.selectors)r.push(n.call(this,t,s.text));async function n(e,t){const r=e.ownerDocument;if(!r)return;if("number"==typeof e.id){const r=this.#ct.get(e.id);if(r&&r.has(t))return}if("number"!=typeof r.id)return;const n=await this.#lt.domModel().querySelectorAll(r.id,t);n&&("number"==typeof e.id?this.setSelectorMatches(e,t,-1!==n.indexOf(e.id)):this.setSelectorMatches(e,t,!1))}await Promise.all(r)}addNewRule(e,t){return this.#dt.set(e.style,t),this.recomputeMatchingSelectors(e)}setSelectorMatches(e,t,r){if("number"!=typeof e.id)return;let n=this.#ct.get(e.id);n||(n=new Map,this.#ct.set(e.id,n)),n.set(t,r)}nodeStyles(){return s.assertNotNullOrUndefined(this.#yt),this.#yt.styles()}registeredProperties(){return this.#ht}getRegisteredProperty(e){return this.#ut.get(e)}fontPaletteValuesRule(){return this.#It}keyframes(){return this.#rt}positionTryRules(){return this.#bt}pseudoStyles(e){s.assertNotNullOrUndefined(this.#vt);const t=this.#vt.get(e);return t?t.styles():[]}pseudoTypes(){return s.assertNotNullOrUndefined(this.#vt),new Set(this.#vt.keys())}customHighlightPseudoStyles(e){s.assertNotNullOrUndefined(this.#kt);const t=this.#kt.get(e);return t?t.styles():[]}customHighlightPseudoNames(){return s.assertNotNullOrUndefined(this.#kt),new Set(this.#kt.keys())}nodeForStyle(e){return this.#dt.get(e)||this.#gt.get(e)||null}availableCSSVariables(e){const t=this.#mt.get(e)||null;return t?t.findAvailableCSSVariables(e):[]}computeCSSVariable(e,t){const r=this.#mt.get(e)||null;return r?r.computeCSSVariable(e,t):null}isInherited(e){return this.#pt.has(e)}propertyState(e){const t=this.#mt.get(e.ownerStyle);return t?t.propertyState(e):null}resetActiveProperties(){s.assertNotNullOrUndefined(this.#yt),s.assertNotNullOrUndefined(this.#vt),s.assertNotNullOrUndefined(this.#kt),this.#yt.reset();for(const e of this.#vt.values())e.reset();for(const e of this.#kt.values())e.reset()}}class St{#wt;styles;#St;#Ct;propertiesState;activeProperties;constructor(e,t,r,n=!1){this.#wt=e,this.styles=t,this.#St=r,this.#Ct=n,this.propertiesState=new Map,this.activeProperties=new Map}computeActiveProperties(){this.propertiesState.clear(),this.activeProperties.clear();for(let e=this.styles.length-1;e>=0;e--){const t=this.styles[e],r=t.parentRule;if((!r||r instanceof ct)&&(!r||this.#wt.hasMatchingSelectors(r)))for(const e of t.allProperties()){const r=k();if(this.#St&&!this.#Ct&&!r.isPropertyInherited(e.name))continue;if(t.range&&!e.range)continue;if(!e.activeInStyle()){this.propertiesState.set(e,"Overloaded");continue}if(this.#St){const t=this.#wt.getRegisteredProperty(e.name);if(t&&!t.inherits()){this.propertiesState.set(e,"Overloaded");continue}}const n=r.canonicalPropertyName(e.name);this.updatePropertyState(e,n);for(const t of e.getLonghandProperties())r.isCSSPropertyName(t.name)&&this.updatePropertyState(t,t.name)}}}updatePropertyState(e,t){const r=this.activeProperties.get(t);!r?.important||e.important?(r&&this.propertiesState.set(r,"Overloaded"),this.propertiesState.set(e,"Active"),this.activeProperties.set(t,e)):this.propertiesState.set(e,"Overloaded")}}class Ct{nodeCascade;name;discoveryTime;rootDiscoveryTime;get isRootEntry(){return this.rootDiscoveryTime===this.discoveryTime}updateRoot(e){this.rootDiscoveryTime=Math.min(this.rootDiscoveryTime,e.rootDiscoveryTime)}constructor(e,t,r){this.nodeCascade=e,this.name=t,this.discoveryTime=r,this.rootDiscoveryTime=r}}class xt{#xt=0;#Rt=[];#Tt=new Map;get(e,t){return this.#Tt.get(e)?.get(t)}add(e,t){const r=this.get(e,t);if(r)return r;const n=new Ct(e,t,this.#xt++);this.#Rt.push(n);let s=this.#Tt.get(e);return s||(s=new Map,this.#Tt.set(e,s)),s.set(t,n),n}isInInProgressSCC(e){return this.#Rt.includes(e)}finishSCC(e){const t=this.#Rt.lastIndexOf(e);return console.assert(t>=0,"Root is not an in-progress scc"),this.#Rt.splice(t)}}class Rt{#Mt;#Pt;#Lt;#Et;#At;#Ot;#ht;constructor(e,t){this.#Mt=e,this.#Pt=new Map,this.#Lt=new Map,this.#Et=new Map,this.#At=!1,this.#ht=t,this.#Ot=new Map;for(const t of e)for(const e of t.styles)this.#Ot.set(e,t)}findAvailableCSSVariables(e){const t=this.#Ot.get(e);if(!t)return[];this.ensureInitialized();const r=this.#Lt.get(t);return r?Array.from(r.keys()):[]}computeCSSVariable(e,t){const r=this.#Ot.get(e);return r?(this.ensureInitialized(),this.innerComputeCSSVariable(r,t)):null}innerComputeCSSVariable(e,t,r=new xt){const n=this.#Lt.get(e),s=this.#Et.get(e);if(!s||!n?.has(t))return null;if(s?.has(t))return s.get(t)||null;const i=n.get(t);if(null==i)return null;const o=Fe(`--${t}`,i.value);if(!o)return null;const a=r.add(e,t),l=xe.walk(o,[new Ae((e=>{const t="ownerStyle"in i.declaration?i.declaration.ownerStyle:i.declaration.style(),n=this.#Ot.get(t);if(!n)return null;const s=r.get(n,e.name);if(s){if(r.isInInProgressSCC(s))return a.updateRoot(s),null}else{const t=this.innerComputeCSSVariable(n,e.name,r),s=r.get(n,e.name);if(s&&a.updateRoot(s),t?.value)return t?.value}return 0===e.fallback.length||e.matching.hasUnresolvedVarsRange(e.fallback[0],e.fallback[e.fallback.length-1])?null:e.matching.getComputedTextRange(e.fallback[0],e.fallback[e.fallback.length-1])}))]),d=Le.siblings(Le.declValue(l.ast.tree)),c=l.getComputedTextRange(d[0],d[d.length-1]);if(a.isRootEntry){const t=r.finishSCC(a);if(t.length>1){for(const r of t)console.assert(r.nodeCascade!==e,"Circles should be within the cascade"),s.set(r.name,null);return null}}if(l.hasUnresolvedVarsRange(d[0],d[d.length-1]))return s.set(t,null),null;const h={value:c,declaration:i.declaration};return s.set(t,h),h}styles(){return Array.from(this.#Ot.keys())}propertyState(e){return this.ensureInitialized(),this.#Pt.get(e)||null}reset(){this.#At=!1,this.#Pt.clear(),this.#Lt.clear(),this.#Et.clear()}ensureInitialized(){if(this.#At)return;this.#At=!0;const e=new Map;for(const t of this.#Mt){t.computeActiveProperties();for(const[r,n]of t.propertiesState){if("Overloaded"===n){this.#Pt.set(r,"Overloaded");continue}const t=k().canonicalPropertyName(r.name);e.has(t)?this.#Pt.set(r,"Overloaded"):(e.set(t,r),this.#Pt.set(r,"Active"))}}for(const[t,r]of e){const n=r.ownerStyle,s=r.getLonghandProperties();if(!s.length)continue;let i=!1;for(const t of s){const r=k().canonicalPropertyName(t.name),s=e.get(r);if(s&&s.ownerStyle===n){i=!0;break}}i||(e.delete(t),this.#Pt.set(r,"Overloaded"))}const t=new Map;for(const e of this.#ht){const r=e.initialValue();t.set(e.propertyName(),r?{value:r,declaration:e}:null)}for(let e=this.#Mt.length-1;e>=0;--e){const r=this.#Mt[e],n=[];for(const e of r.activeProperties.entries()){const r=e[0],s=e[1];r.startsWith("--")&&(t.set(r,{value:s.value,declaration:s}),n.push(r))}const s=new Map(t),i=new Map;this.#Lt.set(r,s),this.#Et.set(r,i);for(const e of n){const n=t.get(e);t.delete(e);const s=this.innerComputeCSSVariable(r,e);n&&s?.value===n.value&&(s.declaration=n.declaration),t.set(e,s)}}}}var Tt=Object.freeze({__proto__:null,CSSRegisteredProperty:It,CSSMatchedStyles:wt});const Mt={couldNotFindTheOriginalStyle:"Could not find the original style sheet.",thereWasAnErrorRetrievingThe:"There was an error retrieving the source styles."},Pt=n.i18n.registerUIStrings("core/sdk/CSSStyleSheetHeader.ts",Mt),Lt=n.i18n.getLocalizedString.bind(void 0,Pt);class Et{#ze;id;frameId;sourceURL;hasSourceURL;origin;title;disabled;isInline;isMutable;isConstructed;startLine;startColumn;endLine;endColumn;contentLength;ownerNode;sourceMapURL;loadingFailed;#Dt;constructor(e,t){this.#ze=e,this.id=t.styleSheetId,this.frameId=t.frameId,this.sourceURL=t.sourceURL,this.hasSourceURL=Boolean(t.hasSourceURL),this.origin=t.origin,this.title=t.title,this.disabled=t.disabled,this.isInline=t.isInline,this.isMutable=t.isMutable,this.isConstructed=t.isConstructed,this.startLine=t.startLine,this.startColumn=t.startColumn,this.endLine=t.endLine,this.endColumn=t.endColumn,this.contentLength=t.length,t.ownerNode&&(this.ownerNode=new En(e.target(),t.ownerNode)),this.sourceMapURL=t.sourceMapURL,this.loadingFailed=t.loadingFailed??!1,this.#Dt=null}originalContentProvider(){if(!this.#Dt){const e=async()=>{const e=await this.#ze.originalStyleSheetText(this);return null===e?{error:Lt(Mt.couldNotFindTheOriginalStyle)}:new r.ContentData.ContentData(e,!1,"text/css")};this.#Dt=new r.StaticContentProvider.StaticContentProvider(this.contentURL(),this.contentType(),e)}return this.#Dt}setSourceMapURL(e){this.sourceMapURL=e}cssModel(){return this.#ze}isAnonymousInlineStyleSheet(){return!this.resourceURL()&&!this.#ze.sourceMapManager().sourceMapForClient(this)}isConstructedByNew(){return this.isConstructed&&0===this.sourceURL.length}resourceURL(){const e=this.isViaInspector()?this.viaInspectorResourceURL():this.sourceURL;return!e&&o.Runtime.experiments.isEnabled("styles-pane-css-changes")?this.dynamicStyleURL():e}getFrameURLPath(){const t=this.#ze.target().model(Kn);if(console.assert(Boolean(t)),!t)return"";const r=t.frameForId(this.frameId);if(!r)return"";console.assert(Boolean(r));const n=new e.ParsedURL.ParsedURL(r.url);let s=n.host+n.folderPathComponents;return s.endsWith("/")||(s+="/"),s}viaInspectorResourceURL(){return`inspector://${this.getFrameURLPath()}inspector-stylesheet`}dynamicStyleURL(){return`stylesheet://${this.getFrameURLPath()}style#${this.id}`}lineNumberInSource(e){return this.startLine+e}columnNumberInSource(e,t){return(e?0:this.startColumn)+t}containsLocation(e,t){const r=e===this.startLine&&t>=this.startColumn||e>this.startLine,n=e<this.endLine||e===this.endLine&&t<=this.endColumn;return r&&n}contentURL(){return this.resourceURL()}contentType(){return e.ResourceType.resourceTypes.Stylesheet}requestContent(){return this.requestContentData().then(r.ContentData.ContentData.asDeferredContent.bind(void 0))}async requestContentData(){const e=await this.#ze.getStyleSheetText(this.id);return null===e?{error:Lt(Mt.thereWasAnErrorRetrievingThe)}:new r.ContentData.ContentData(e,!1,"text/css")}async searchInContent(e,t,n){const s=await this.requestContentData();return r.TextUtils.performSearchInContentData(s,e,t,n)}isViaInspector(){return"inspector"===this.origin}createPageResourceLoadInitiator(){return{target:this.#ze.target(),frameId:this.frameId,initiatorUrl:this.hasSourceURL?s.DevToolsPath.EmptyUrlString:this.sourceURL}}}var At=Object.freeze({__proto__:null,CSSStyleSheetHeader:Et});let Ot=null;class Dt extends e.ObjectWrapper.ObjectWrapper{#Nt=new WeakMap;#Ft=new Map;#Bt=new Map;#Ht=null;#Ut=new Map;#_t=new Map;constructor(){super(),z.instance().observeModels(Kn,this)}static instance({forceNew:e}={forceNew:!1}){return Ot&&!e||(Ot=new Dt),Ot}modelAdded(e){const t=e.addEventListener(Wn.FrameAdded,this.frameAdded,this),r=e.addEventListener(Wn.FrameDetached,this.frameDetached,this),n=e.addEventListener(Wn.FrameNavigated,this.frameNavigated,this),s=e.addEventListener(Wn.ResourceAdded,this.resourceAdded,this);this.#Nt.set(e,[t,r,n,s]),this.#Bt.set(e.target().id(),new Set)}modelRemoved(t){const r=this.#Nt.get(t);r&&e.EventTarget.removeEventListeners(r);const n=this.#Bt.get(t.target().id());if(n)for(const e of n)this.decreaseOrRemoveFrame(e);this.#Bt.delete(t.target().id())}frameAdded(e){const t=e.data,r=this.#Ft.get(t.id);if(r)t.setCreationStackTrace(r.frame.getCreationStackTraceData()),this.#Ft.set(t.id,{frame:t,count:r.count+1});else{const e=this.#Ut.get(t.id);e?.creationStackTrace&&e?.creationStackTraceTarget&&t.setCreationStackTrace({creationStackTrace:e.creationStackTrace,creationStackTraceTarget:e.creationStackTraceTarget}),this.#Ft.set(t.id,{frame:t,count:1}),this.#Ut.delete(t.id)}this.resetOutermostFrame();const n=this.#Bt.get(t.resourceTreeModel().target().id());n&&n.add(t.id),this.dispatchEventToListeners("FrameAddedToTarget",{frame:t}),this.resolveAwaitedFrame(t)}frameDetached(e){const{frame:t,isSwap:r}=e.data;if(this.decreaseOrRemoveFrame(t.id),r&&!this.#Ft.get(t.id)){const e=t.getCreationStackTraceData(),r={...e.creationStackTrace&&{creationStackTrace:e.creationStackTrace},...e.creationStackTrace&&{creationStackTraceTarget:e.creationStackTraceTarget}};this.#Ut.set(t.id,r)}const n=this.#Bt.get(t.resourceTreeModel().target().id());n&&n.delete(t.id)}frameNavigated(e){const t=e.data;this.dispatchEventToListeners("FrameNavigated",{frame:t}),t.isOutermostFrame()&&this.dispatchEventToListeners("OutermostFrameNavigated",{frame:t})}resourceAdded(e){this.dispatchEventToListeners("ResourceAdded",{resource:e.data})}decreaseOrRemoveFrame(e){const t=this.#Ft.get(e);t&&(1===t.count?(this.#Ft.delete(e),this.resetOutermostFrame(),this.dispatchEventToListeners("FrameRemoved",{frameId:e})):t.count--)}resetOutermostFrame(){const e=this.getAllFrames().filter((e=>e.isOutermostFrame()));this.#Ht=e.length>0?e[0]:null}getFrame(e){const t=this.#Ft.get(e);return t?t.frame:null}getAllFrames(){return Array.from(this.#Ft.values(),(e=>e.frame))}getOutermostFrame(){return this.#Ht}async getOrWaitForFrame(e,t){const r=this.getFrame(e);return!r||t&&t===r.resourceTreeModel().target()?new Promise((r=>{const n=this.#_t.get(e);n?n.push({notInTarget:t,resolve:r}):this.#_t.set(e,[{notInTarget:t,resolve:r}])})):r}resolveAwaitedFrame(e){const t=this.#_t.get(e.id);if(!t)return;const r=t.filter((({notInTarget:t,resolve:r})=>!(!t||t!==e.resourceTreeModel().target())||(r(e),!1)));r.length>0?this.#_t.set(e.id,r):this.#_t.delete(e.id)}}var Nt=Object.freeze({__proto__:null,FrameManager:Dt});class Ft{static fromLocalObject(e){return new qt(e)}static type(e){if(null===e)return"null";const t=typeof e;return"object"!==t&&"function"!==t?t:e.type}static isNullOrUndefined(e){if(void 0===e)return!0;switch(e.type){case"object":return"null"===e.subtype;case"undefined":return!0;default:return!1}}static arrayNameFromDescription(e){return e.replace(Wt,"").replace(Gt,"")}static arrayLength(e){if("array"!==e.subtype&&"typedarray"!==e.subtype)return 0;const t=e.description&&e.description.match(Wt),r=e.description&&e.description.match(Gt);return t?parseInt(t[1],10):r?parseInt(r[1],10):0}static arrayBufferByteLength(e){if("arraybuffer"!==e.subtype)return 0;const t=e.description&&e.description.match(Wt);return t?parseInt(t[1],10):0}static unserializableDescription(e){if("number"==typeof e){const t=String(e);if(0===e&&1/e<0)return"-0";if("NaN"===t||"Infinity"===t||"-Infinity"===t)return t}return"bigint"==typeof e?e+"n":null}static toCallArgument(e){const t=typeof e;if("undefined"===t)return{};const r=Ft.unserializableDescription(e);if("number"===t)return null!==r?{unserializableValue:r}:{value:e};if("bigint"===t)return{unserializableValue:r};if("string"===t||"boolean"===t)return{value:e};if(!e)return{value:null};const n=e;if(e instanceof Ft){const t=e.unserializableValue();if(void 0!==t)return{unserializableValue:t}}else if(void 0!==n.unserializableValue)return{unserializableValue:n.unserializableValue};return void 0!==n.objectId?{objectId:n.objectId}:{value:n.value}}static async loadFromObjectPerProto(e,t,r=!1){const n=await Promise.all([e.getAllProperties(!0,t,r),e.getOwnProperties(t,r)]),s=n[0].properties,i=n[1].properties,o=n[1].internalProperties;if(!i||!s)return{properties:null,internalProperties:null};const a=new Map,l=[];for(let e=0;e<s.length;e++){const t=s[e];t.symbol?l.push(t):(t.isOwn||"__proto__"!==t.name)&&a.set(t.name,t)}for(let e=0;e<i.length;e++){const t=i[e];t.isAccessorProperty()||(t.private||t.symbol?l.push(t):a.set(t.name,t))}return{properties:[...a.values()].concat(l),internalProperties:o||null}}customPreview(){return null}get objectId(){return"Not implemented"}get type(){throw"Not implemented"}get subtype(){throw"Not implemented"}get value(){throw"Not implemented"}unserializableValue(){throw"Not implemented"}get description(){throw"Not implemented"}set description(e){throw"Not implemented"}get hasChildren(){throw"Not implemented"}get preview(){}get className(){return null}arrayLength(){throw"Not implemented"}arrayBufferByteLength(){throw"Not implemented"}getOwnProperties(e,t){throw"Not implemented"}getAllProperties(e,t,r){throw"Not implemented"}async deleteProperty(e){throw"Not implemented"}async setPropertyValue(e,t){throw"Not implemented"}callFunction(e,t){throw"Not implemented"}callFunctionJSON(e,t){throw"Not implemented"}release(){}debuggerModel(){throw new Error("DebuggerModel-less object")}runtimeModel(){throw new Error("RuntimeModel-less object")}isNode(){return!1}isLinearMemoryInspectable(){return!1}webIdl}class Bt extends Ft{runtimeModelInternal;#qt;#g;#zt;#jt;#Vt;hasChildrenInternal;#Wt;#Gt;#u;#Kt;#Qt;constructor(e,t,r,n,s,i,o,a,l,d){super(),this.runtimeModelInternal=e,this.#qt=e.target().runtimeAgent(),this.#g=r,this.#zt=n,t?(this.#jt=t,this.#Vt=o,this.hasChildrenInternal="symbol"!==r,this.#Wt=a):(this.#Vt=o,!this.description&&i&&(this.#Vt=i),this.#Vt||"object"==typeof s&&null!==s||(this.#Vt=String(s)),this.hasChildrenInternal=!1,"string"==typeof i?(this.#Gt=i,"Infinity"===i||"-Infinity"===i||"-0"===i||"NaN"===i?this.#u=Number(i):"bigint"===r&&i.endsWith("n")?this.#u=BigInt(i.substring(0,i.length-1)):this.#u=i):this.#u=s),this.#Kt=l||null,this.#Qt="string"==typeof d?d:null}customPreview(){return this.#Kt}get objectId(){return this.#jt}get type(){return this.#g}get subtype(){return this.#zt}get value(){return this.#u}unserializableValue(){return this.#Gt}get description(){return this.#Vt}set description(e){this.#Vt=e}get hasChildren(){return this.hasChildrenInternal}get preview(){return this.#Wt}get className(){return this.#Qt}getOwnProperties(e,t=!1){return this.doGetProperties(!0,!1,t,e)}getAllProperties(e,t,r=!1){return this.doGetProperties(!1,e,r,t)}async createRemoteObject(e){return this.runtimeModelInternal.createRemoteObject(e)}async doGetProperties(e,t,r,n){if(!this.#jt)return{properties:null,internalProperties:null};const s=await this.#qt.invoke_getProperties({objectId:this.#jt,ownProperties:e,accessorPropertiesOnly:t,nonIndexedPropertiesOnly:r,generatePreview:n});if(s.getError())return{properties:null,internalProperties:null};if(s.exceptionDetails)return this.runtimeModelInternal.exceptionThrown(Date.now(),s.exceptionDetails),{properties:null,internalProperties:null};const{result:i=[],internalProperties:o=[],privateProperties:a=[]}=s,l=[];for(const e of i){const t=e.value?await this.createRemoteObject(e.value):null,r=e.symbol?this.runtimeModelInternal.createRemoteObject(e.symbol):null,n=new _t(e.name,t,Boolean(e.enumerable),Boolean(e.writable),Boolean(e.isOwn),Boolean(e.wasThrown),r);void 0===e.value&&(e.get&&"undefined"!==e.get.type&&(n.getter=this.runtimeModelInternal.createRemoteObject(e.get)),e.set&&"undefined"!==e.set.type&&(n.setter=this.runtimeModelInternal.createRemoteObject(e.set))),l.push(n)}for(const e of a){const t=e.value?this.runtimeModelInternal.createRemoteObject(e.value):null,r=new _t(e.name,t,!0,!0,!0,!1,void 0,!1,void 0,!0);void 0===e.value&&(e.get&&"undefined"!==e.get.type&&(r.getter=this.runtimeModelInternal.createRemoteObject(e.get)),e.set&&"undefined"!==e.set.type&&(r.setter=this.runtimeModelInternal.createRemoteObject(e.set))),l.push(r)}const d=[];for(const e of o){if(!e.value)continue;const t=this.runtimeModelInternal.createRemoteObject(e.value);d.push(new _t(e.name,t,!0,!1,void 0,void 0,void 0,!0))}return{properties:l,internalProperties:d}}async setPropertyValue(e,t){if(!this.#jt)return"Cant set a property of non-object.";const r=await this.#qt.invoke_evaluate({expression:t,silent:!0});if(r.getError()||r.exceptionDetails)return r.getError()||("string"!==r.result.type?r.result.description:r.result.value);"string"==typeof e&&(e=Ft.toCallArgument(e));const n=this.doSetObjectPropertyValue(r.result,e);return r.result.objectId&&this.#qt.invoke_releaseObject({objectId:r.result.objectId}),n}async doSetObjectPropertyValue(e,t){const r=[t,Ft.toCallArgument(e)],n=await this.#qt.invoke_callFunctionOn({objectId:this.#jt,functionDeclaration:"function(a, b) { this[a] = b; }",arguments:r,silent:!0}),s=n.getError();return s||n.exceptionDetails?s||n.result.description:void 0}async deleteProperty(e){if(!this.#jt)return"Cant delete a property of non-object.";const t=await this.#qt.invoke_callFunctionOn({objectId:this.#jt,functionDeclaration:"function(a) { delete this[a]; return !(a in this); }",arguments:[e],silent:!0});return t.getError()||t.exceptionDetails?t.getError()||t.result.description:t.result.value?void 0:"Failed to delete property."}async callFunction(e,t){const r=await this.#qt.invoke_callFunctionOn({objectId:this.#jt,functionDeclaration:e.toString(),arguments:t,silent:!0});return r.getError()?{object:null,wasThrown:!1}:{object:this.runtimeModelInternal.createRemoteObject(r.result),wasThrown:Boolean(r.exceptionDetails)}}async callFunctionJSON(e,t){const r=await this.#qt.invoke_callFunctionOn({objectId:this.#jt,functionDeclaration:e.toString(),arguments:t,silent:!0,returnByValue:!0});return r.getError()||r.exceptionDetails?null:r.result.value}release(){this.#jt&&this.#qt.invoke_releaseObject({objectId:this.#jt})}arrayLength(){return Ft.arrayLength(this)}arrayBufferByteLength(){return Ft.arrayBufferByteLength(this)}debuggerModel(){return this.runtimeModelInternal.debuggerModel()}runtimeModel(){return this.runtimeModelInternal}isNode(){return Boolean(this.#jt)&&"object"===this.type&&"node"===this.subtype}isLinearMemoryInspectable(){return"object"===this.type&&void 0!==this.subtype&&["webassemblymemory","typedarray","dataview","arraybuffer"].includes(this.subtype)}}class Ht extends Bt{#$t;#Xt;constructor(e,t,r,n,s,i,o,a,l){super(e,t,n,s,i,o,a,l),this.#$t=r,this.#Xt=void 0}async doGetProperties(e,t,r){if(t)return{properties:[],internalProperties:[]};if(this.#Xt)return{properties:this.#Xt.slice(),internalProperties:null};const n=await super.doGetProperties(e,t,!1,!0);if(Array.isArray(n.properties)){this.#Xt=n.properties.slice();for(const e of this.#Xt)e.writable=!1}return n}async doSetObjectPropertyValue(e,t){const r=t.value,n=await this.debuggerModel().setVariableValue(this.#$t.number,r,Ft.toCallArgument(e),this.#$t.callFrameId);if(n)return n;if(this.#Xt)for(const t of this.#Xt)t.name===r&&(t.value=this.runtimeModel().createRemoteObject(e))}}class Ut{number;callFrameId;constructor(e,t){this.number=e,this.callFrameId=t}}class _t{name;value;enumerable;writable;isOwn;wasThrown;symbol;synthetic;syntheticSetter;private;getter;setter;webIdl;constructor(e,t,r,n,s,i,o,a,l,d){this.name=e,this.value=null!==t?t:void 0,this.enumerable=void 0===r||r;const c=!a||Boolean(l);this.writable=void 0!==n?n:c,this.isOwn=Boolean(s),this.wasThrown=Boolean(i),o&&(this.symbol=o),this.synthetic=Boolean(a),l&&(this.syntheticSetter=l),this.private=Boolean(d)}async setSyntheticValue(e){if(!this.syntheticSetter)return!1;const t=await this.syntheticSetter(e);return t&&(this.value=t),Boolean(t)}isAccessorProperty(){return Boolean(this.getter||this.setter)}match({includeNullOrUndefinedValues:e,regex:t}){return!(null!==t&&!t.test(this.name)&&!t.test(this.value?.description??""))&&!(!e&&!this.isAccessorProperty()&&Ft.isNullOrUndefined(this.value))}cloneWithNewName(e){const t=new _t(e,this.value??null,this.enumerable,this.writable,this.isOwn,this.wasThrown,this.symbol,this.synthetic,this.syntheticSetter,this.private);return t.getter=this.getter,t.setter=this.setter,t}}class qt extends Ft{valueInternal;#Jt;#Yt;constructor(e){super(),this.valueInternal=e}get objectId(){}get value(){return this.valueInternal}unserializableValue(){return Ft.unserializableDescription(this.valueInternal)||void 0}get description(){if(this.#Jt)return this.#Jt;if("object"===this.type)switch(this.subtype){case"array":this.#Jt=this.concatenate("[","]",function(e){return this.formatValue(e.value||null)}.bind(this));break;case"date":this.#Jt=String(this.valueInternal);break;case"null":this.#Jt="null";break;default:this.#Jt=this.concatenate("{","}",function(e){let t=e.name;return/^\s|\s$|^$|\n/.test(t)&&(t='"'+t.replace(/\n/g,"")+'"'),t+": "+this.formatValue(e.value||null)}.bind(this))}else this.#Jt=String(this.valueInternal);return this.#Jt}formatValue(e){if(!e)return"undefined";const t=e.description||"";return"string"===e.type?'"'+t.replace(/\n/g,"")+'"':t}concatenate(e,t,r){let n=e;const s=this.children();for(let e=0;e<s.length;++e){const t=r(s[e]);if(n.length+t.length>100){n+=",";break}e&&(n+=", "),n+=t}return n+=t,n}get type(){return typeof this.valueInternal}get subtype(){return null===this.valueInternal?"null":Array.isArray(this.valueInternal)?"array":this.valueInternal instanceof Date?"date":void 0}get hasChildren(){return"object"==typeof this.valueInternal&&null!==this.valueInternal&&Boolean(Object.keys(this.valueInternal).length)}async getOwnProperties(e,t=!1){let r=this.children();return t&&(r=r.filter((e=>!function(e){const t=Number(e)>>>0;return String(t)===e}(e.name)))),{properties:r,internalProperties:null}}async getAllProperties(e,t,r=!1){return e?{properties:[],internalProperties:null}:await this.getOwnProperties(t,r)}children(){return this.hasChildren?(this.#Yt||(this.#Yt=Object.entries(this.valueInternal).map((([e,t])=>new _t(e,t instanceof Ft?t:Ft.fromLocalObject(t))))),this.#Yt):[]}arrayLength(){return Array.isArray(this.valueInternal)?this.valueInternal.length:0}async callFunction(e,t){const r=this.valueInternal,n=t?t.map((e=>e.value)):[];let s,i=!1;try{s=e.apply(r,n)}catch(e){i=!0}return{object:Ft.fromLocalObject(s),wasThrown:i}}async callFunctionJSON(e,t){const r=this.valueInternal,n=t?t.map((e=>e.value)):[];let s;try{s=e.apply(r,n)}catch(e){s=null}return s}}class zt{#Zt;constructor(e){this.#Zt=e}static objectAsArray(e){if(!e||"object"!==e.type||"array"!==e.subtype&&"typedarray"!==e.subtype)throw new Error("Object is empty or not an array");return new zt(e)}static async createFromRemoteObjects(e){if(!e.length)throw new Error("Input array is empty");const t=await e[0].callFunction((function(...e){return e}),e.map(Ft.toCallArgument));if(t.wasThrown||!t.object)throw new Error("Call function throws exceptions or returns empty value");return zt.objectAsArray(t.object)}async at(e){if(e<0||e>this.#Zt.arrayLength())throw new Error("Out of range");const t=await this.#Zt.callFunction((function(e){return this[e]}),[Ft.toCallArgument(e)]);if(t.wasThrown||!t.object)throw new Error("Exception in callFunction or result value is empty");return t.object}length(){return this.#Zt.arrayLength()}map(e){const t=[];for(let r=0;r<this.length();++r)t.push(this.at(r).then(e));return Promise.all(t)}object(){return this.#Zt}}class jt{#er;constructor(e){this.#er=e}static objectAsFunction(e){if("function"!==e.type)throw new Error("Object is empty or not a function");return new jt(e)}async targetFunction(){const e=await this.#er.getOwnProperties(!1),t=e.internalProperties?.find((({name:e})=>"[[TargetFunction]]"===e));return t?.value??this.#er}async targetFunctionDetails(){const e=await this.targetFunction(),t=await e.debuggerModel().functionDetailsPromise(e);return this.#er!==e&&e.release(),t}}class Vt{#er;#tr;#rr;constructor(e){this.#er=e}static objectAsError(e){if("error"!==e.subtype)throw new Error(`Object of type ${e.subtype} is not an error`);return new Vt(e)}get errorStack(){return this.#er.description??""}exceptionDetails(){return this.#tr||(this.#tr=this.#nr()),this.#tr}#nr(){return this.#er.objectId?this.#er.runtimeModel().getExceptionDetails(this.#er.objectId):Promise.resolve(void 0)}cause(){return this.#rr||(this.#rr=this.#sr()),this.#rr}async#sr(){const e=await this.#er.getAllProperties(!1,!1),t=e.properties?.find((e=>"cause"===e.name));return t?.value}}const Wt=/\(([0-9]+)\)/,Gt=/\[([0-9]+)\]/;var Kt=Object.freeze({__proto__:null,RemoteObject:Ft,RemoteObjectImpl:Bt,ScopeRemoteObject:Ht,ScopeRef:Ut,RemoteObjectProperty:_t,LocalJSONObject:qt,RemoteArrayBuffer:class{#Zt;constructor(e){if("object"!==e.type||"arraybuffer"!==e.subtype)throw new Error("Object is not an arraybuffer");this.#Zt=e}byteLength(){return this.#Zt.arrayBufferByteLength()}async bytes(e=0,t=this.byteLength()){if(e<0||e>=this.byteLength())throw new RangeError("start is out of range");if(t<e||t>this.byteLength())throw new RangeError("end is out of range");return await this.#Zt.callFunctionJSON((function(e,t){return[...new Uint8Array(this,e,t)]}),[{value:e},{value:t-e}])}object(){return this.#Zt}},RemoteArray:zt,RemoteFunction:jt,RemoteError:Vt,LinearMemoryInspectable:class{object;expression;constructor(e,t){if(!e.isLinearMemoryInspectable())throw new Error("object must be linear memory inspectable");this.object=e,this.expression=t}}});class Qt extends h{constructor(e){super(e)}async read(t,r,n){const s=await this.target().ioAgent().invoke_read({handle:t,offset:n,size:r});if(s.getError())throw new Error(s.getError());return s.eof?null:s.base64Encoded?e.Base64.decode(s.data):s.data}async close(e){(await this.target().ioAgent().invoke_close({handle:e})).getError()&&console.error("Could not close stream.")}async resolveBlob(e){const t=e instanceof Ft?e.objectId:e;if(!t)throw new Error("Remote object has undefined objectId");const r=await this.target().ioAgent().invoke_resolveBlob({objectId:t});if(r.getError())throw new Error(r.getError());return`blob:${r.uuid}`}async readToString(e){const t=[],r=new TextDecoder;for(;;){const n=await this.read(e,1048576);if(null===n){t.push(r.decode());break}n instanceof ArrayBuffer?t.push(r.decode(n,{stream:!0})):t.push(n)}return t.join("")}}h.register(Qt,{capabilities:131072,autostart:!0});var $t=Object.freeze({__proto__:null,IOModel:Qt});const Xt={loadCanceledDueToReloadOf:"Load canceled due to reload of inspected page"},Jt=n.i18n.registerUIStrings("core/sdk/PageResourceLoader.ts",Xt),Yt=n.i18n.getLocalizedString.bind(void 0,Jt);function Zt(e){return"extensionId"in e}let er=null;class tr extends e.ObjectWrapper.ObjectWrapper{#ir;#or;#ar;#lr;#dr;#cr;constructor(e,t){super(),this.#ir=0,this.#or=new Map,this.#ar=t,this.#lr=new Map,this.#dr=[],z.instance().addModelListener(Kn,Wn.PrimaryPageChanged,this.onPrimaryPageChanged,this),this.#cr=e}static instance({forceNew:e,loadOverride:t,maxConcurrentLoads:r}={forceNew:!1,loadOverride:null,maxConcurrentLoads:500}){return er&&!e||(er=new tr(t,r)),er}static removeInstance(){er=null}onPrimaryPageChanged(e){const{frame:t,type:r}=e.data;if(!t.isOutermostFrame())return;for(const{reject:e}of this.#dr)e(new Error(Yt(Xt.loadCanceledDueToReloadOf)));this.#dr=[];const n=t.resourceTreeModel().target(),s=new Map;for(const[e,t]of this.#lr.entries())"Activation"===r&&n===t.initiator.target&&s.set(e,t);this.#lr=s,this.dispatchEventToListeners("Update")}getResourcesLoaded(){return this.#lr}getScopedResourcesLoaded(){return new Map([...this.#lr].filter((([e,t])=>z.instance().isInScope(t.initiator.target)||Zt(t.initiator))))}getNumberOfResources(){return{loading:this.#ir,queued:this.#dr.length,resources:this.#lr.size}}getScopedNumberOfResources(){const e=z.instance();let t=0;for(const[r,n]of this.#or){const s=e.targetById(r);e.isInScope(s)&&(t+=n)}return{loading:t,resources:this.getScopedResourcesLoaded().size}}async acquireLoadSlot(e){if(this.#ir++,e){const t=this.#or.get(e.id())||0;this.#or.set(e.id(),t+1)}if(this.#ir>this.#ar){const e={resolve:()=>{},reject:()=>{}},t=new Promise(((t,r)=>{e.resolve=t,e.reject=r}));this.#dr.push(e),await t}}releaseLoadSlot(e){if(this.#ir--,e){const t=this.#or.get(e.id());t&&this.#or.set(e.id(),t-1)}const t=this.#dr.shift();t&&t.resolve()}static makeExtensionKey(e,t){if(Zt(t)&&t.extensionId)return`${e}-${t.extensionId}`;throw new Error("Invalid initiator")}static makeKey(e,t){if(t.frameId)return`${e}-${t.frameId}`;if(t.target)return`${e}-${t.target.id()}`;throw new Error("Invalid initiator")}resourceLoadedThroughExtension(e){const t=tr.makeExtensionKey(e.url,e.initiator);this.#lr.set(t,e),this.dispatchEventToListeners("Update")}async loadResource(e,t){if(Zt(t))throw new Error("Invalid initiator");const r=tr.makeKey(e,t),n={success:null,size:null,errorMessage:void 0,url:e,initiator:t};this.#lr.set(r,n),this.dispatchEventToListeners("Update");try{await this.acquireLoadSlot(t.target);const r=this.dispatchLoad(e,t),s=await r;if(n.errorMessage=s.errorDescription.message,n.success=s.success,s.success)return n.size=s.content.length,{content:s.content};throw new Error(s.errorDescription.message)}catch(e){throw void 0===n.errorMessage&&(n.errorMessage=e.message),null===n.success&&(n.success=!1),e}finally{this.releaseLoadSlot(t.target),this.dispatchEventToListeners("Update")}}async dispatchLoad(t,r){if(Zt(r))throw new Error("Invalid initiator");let n=null;if(this.#cr)return this.#cr(t);const s=new e.ParsedURL.ParsedURL(t),i=rr().get()&&s&&"file"!==s.scheme&&"data"!==s.scheme&&"devtools"!==s.scheme;if(a.userMetrics.developerResourceScheme(this.getDeveloperResourceScheme(s)),i){try{if(r.target){a.userMetrics.developerResourceLoaded(0);return await this.loadFromTarget(r.target,r.frameId,t)}const e=Dt.instance().getFrame(r.frameId);if(e){a.userMetrics.developerResourceLoaded(1);return await this.loadFromTarget(e.resourceTreeModel().target(),r.frameId,t)}}catch(e){e instanceof Error&&(a.userMetrics.developerResourceLoaded(2),n=e.message)}a.userMetrics.developerResourceLoaded(3)}else{const e=rr().get()?6:5;a.userMetrics.developerResourceLoaded(e)}const o=await ae.instance().loadResource(t);return i&&!o.success&&a.userMetrics.developerResourceLoaded(7),n&&(o.errorDescription.message=`Fetch through target failed: ${n}; Fallback: ${o.errorDescription.message}`),o}getDeveloperResourceScheme(e){if(!e||""===e.scheme)return 1;const t="localhost"===e.host||e.host.endsWith(".localhost");switch(e.scheme){case"file":return 7;case"data":return 6;case"blob":return 8;case"http":return t?4:2;case"https":return t?5:3}return 0}async loadFromTarget(t,r,n){const s=t.model(X),i=t.model(Qt),o=e.Settings.Settings.instance().moduleSetting("cache-disabled").get(),l=await s.loadNetworkResource(r,n,{disableCache:o,includeCredentials:!0});try{const e=l.stream?await i.readToString(l.stream):"";return{success:l.success,content:e,errorDescription:{statusCode:l.httpStatusCode||0,netError:l.netError,netErrorName:l.netErrorName,message:a.ResourceLoader.netErrorToMessage(l.netError,l.httpStatusCode,l.netErrorName)||"",urlValid:void 0}}}finally{l.stream&&i.close(l.stream)}}}function rr(){return e.Settings.Settings.instance().createSetting("load-through-target",!0)}var nr=Object.freeze({__proto__:null,ResourceKey:class{key;constructor(e){this.key=e}},PageResourceLoader:tr,getLoadThroughTargetSetting:rr});function sr(e,t){return e.map((e=>function(e,t){const r=new Map,n=[];let s=0,i=0;for(const[o,a]of function*(e){const t=new kr(e);let r=0,n=0;for(;t.hasNext();){","===t.peek()&&t.next();const[e,s]=[t.nextVLQ(),t.nextVLQ()];if(0===e&&s<r)throw new Error("Malformed original scope encoding: start/end items must be ordered w.r.t. source positions");if(r=s,!t.hasNext()||","===t.peek()){yield[n++,{line:e,column:s}];continue}const i={line:e,column:s,kind:t.nextVLQ(),flags:t.nextVLQ(),variables:[]};for(1&i.flags&&(i.name=t.nextVLQ());t.hasNext()&&","!==t.peek();)i.variables.push(t.nextVLQ());yield[n++,i]}}(e)){s+=a.line;const{column:e}=a;if(ir(a)){i+=a.kind;const l=dr(i,t);if(void 0===l)throw new Error(`Scope does not have a valid kind '${l}'`);const d={start:{line:s,column:e},end:{line:s,column:e},kind:l,name:dr(a.name,t),variables:a.variables.map((e=>t[e])),children:[]};n.push(d),r.set(o,d)}else{const t=n.pop();if(!t)throw new Error('Scope items not nested properly: encountered "end" item without "start" item');if(t.end={line:s,column:e},0===n.length)return{root:t,scopeForItemIndex:r};n[n.length-1].children.push(t)}}throw new Error("Malformed original scope encoding")}(e,t)))}function ir(e){return"kind"in e}function or(e,t,r){const n=[{start:{line:0,column:0},end:{line:0,column:0},isScope:!1,children:[],values:[]}],s=new Map;for(const i of function*(e){const t=new kr(e);let r=0;const n={line:0,column:0,defSourceIdx:0,defScopeIdx:0,callsiteSourceIdx:0,callsiteLine:0,callsiteColumn:0};for(;t.hasNext();){if(";"===t.peek()){t.next(),++r;continue}if(","===t.peek()){t.next();continue}if(n.column=t.nextVLQ()+(r===n.line?n.column:0),n.line=r,null===t.peekVLQ()){yield{line:r,column:n.column};continue}const e={line:r,column:n.column,flags:t.nextVLQ(),bindings:[]};if(1&e.flags){const r=t.nextVLQ(),s=t.nextVLQ();n.defScopeIdx=s+(0===r?n.defScopeIdx:0),n.defSourceIdx+=r,e.definition={sourceIdx:n.defSourceIdx,scopeIdx:n.defScopeIdx}}if(2&e.flags){const r=t.nextVLQ(),s=t.nextVLQ(),i=t.nextVLQ();n.callsiteColumn=i+(0===s&&0===r?n.callsiteColumn:0),n.callsiteLine=s+(0===r?n.callsiteLine:0),n.callsiteSourceIdx+=r,e.callsite={sourceIdx:n.callsiteSourceIdx,line:n.callsiteLine,column:n.callsiteColumn}}for(;t.hasNext()&&";"!==t.peek()&&","!==t.peek();){const r=[];e.bindings.push(r);const n=t.nextVLQ();if(n>=-1){r.push({line:e.line,column:e.column,nameIdx:n});continue}r.push({line:e.line,column:e.column,nameIdx:t.nextVLQ()});const s=-n;for(let e=0;e<s-1;++e){const e=t.nextVLQ(),n=t.nextVLQ(),s=t.nextVLQ(),i=r.at(-1)?.line??0,o=r.at(-1)?.column??0;r.push({line:e+i,column:n+(0===e?o:0),nameIdx:s})}}yield e}}(e))if(lr(i)){const e={start:{line:i.line,column:i.column},end:{line:i.line,column:i.column},isScope:Boolean(4&i.flags),values:[],children:[]};if(i.definition){const{scopeIdx:r,sourceIdx:n}=i.definition;if(!t[n])throw new Error("Invalid source index!");const s=t[n].scopeForItemIndex.get(r);if(!s)throw new Error("Invalid original scope index!");e.originalScope=s}if(i.callsite){const{sourceIdx:r,line:n,column:s}=i.callsite;if(!t[r])throw new Error("Invalid source index!");e.callsite={sourceIndex:r,line:n,column:s}}s.set(e,i),n.push(e)}else{const e=n.pop();if(!e)throw new Error('Range items not nested properly: encountered "end" item without "start" item');e.end={line:i.line,column:i.column},ar(e,r,s.get(e)?.bindings),n[n.length-1].children.push(e)}if(1!==n.length)throw new Error("Malformed generated range encoding");return n[0].children}function ar(e,t,r){void 0!==r&&(e.values=r.map((r=>{if(1===r.length)return dr(r[0].nameIdx,t);const n=r.map((e=>({from:{line:e.line,column:e.column},to:{line:e.line,column:e.column},value:dr(e.nameIdx,t)})));for(let e=1;e<n.length;++e)n[e-1].to={...n[e].from};return n[n.length-1].to={...e.end},n})))}function lr(e){return"flags"in e}function dr(e,t){if(!(void 0===e||e<0))return t[e]}var cr=Object.freeze({__proto__:null,decodeOriginalScopes:sr,decodeGeneratedRanges:or});class hr{#hr;#ur;constructor(e,t){this.#hr=e,this.#ur=t}static parseFromMap(e){if(!e.originalScopes||!e.generatedRanges)throw new Error("Cant create SourceMapScopesInfo without encoded scopes");const t=sr(e.originalScopes,e.names??[]),r=t.map((e=>e.root)),n=or(e.generatedRanges,t,e.names??[]);return new hr(r,n)}findInlinedFunctions(e,t){const r=[],n=this.#gr(e,t);for(let e=n.length-1;e>=0;--e){const t=n[e],s=t.originalScope;if("function"===s?.kind&&(t.isScope||t.callsite)&&(r.push({name:s.name??"",callsite:t.callsite}),t.isScope))break}return r}#gr(e,t){const r=[];return function n(s){for(const i of s)ur(i,e,t)&&(r.push(i),n(i.children))}(this.#ur),r}}function ur(e,t,r){return!(e.start.line>t||e.start.line===t&&e.start.column>r)&&!(e.end.line<t||e.end.line===t&&e.end.column<=r)}var gr=Object.freeze({__proto__:null,SourceMapScopesInfo:hr});function pr(e){return e.startsWith(")]}")&&(e=e.substring(e.indexOf("\n"))),65279===e.charCodeAt(0)&&(e=e.slice(1)),JSON.parse(e)}class mr{lineNumber;columnNumber;sourceURL;sourceLineNumber;sourceColumnNumber;name;constructor(e,t,r,n,s,i){this.lineNumber=e,this.columnNumber=t,this.sourceURL=r,this.sourceLineNumber=n,this.sourceColumnNumber=s,this.name=i}static compare(e,t){return e.lineNumber!==t.lineNumber?e.lineNumber-t.lineNumber:e.columnNumber-t.columnNumber}}function fr(e,t){return e.lineNumber-t.lineNumber||e.columnNumber-t.columnNumber}class br{startLineNumber;startColumnNumber;endLineNumber;endColumnNumber;name;children=[];constructor(e,t,r,n,s){this.startLineNumber=e,this.startColumnNumber=t,this.endLineNumber=r,this.endColumnNumber=n,this.name=s}scopeName(){return this.name}start(){return{lineNumber:this.startLineNumber,columnNumber:this.startColumnNumber}}end(){return{lineNumber:this.endLineNumber,columnNumber:this.endColumnNumber}}}const yr=new WeakMap;class vr{#pr;#mr;#fr;#br;#yr;#vr;#kr=null;constructor(t,r,n){this.#pr=n,this.#mr=t,this.#fr=r,this.#br=e.ParsedURL.schemeIs(r,"data:")?t:r,this.#yr=null,this.#vr=new Map,"sections"in this.#pr&&this.#pr.sections.find((e=>"url"in e))&&e.Console.Console.instance().warn(`SourceMap "${r}" contains unsupported "URL" field in one of its sections.`),this.eachSection(this.parseSources.bind(this))}compiledURL(){return this.#mr}url(){return this.#fr}sourceURLs(){return[...this.#vr.keys()]}embeddedContentByURL(e){const t=this.#vr.get(e);return t?t.content:null}hasScopeInfo(){return this.#Ir(),null!==this.#kr}findEntry(e,t,r){if(this.#Ir(),r&&null!==this.#kr){const n=this.#kr.findInlinedFunctions(e,t),{callsite:s}=n[r-1];return s?{lineNumber:e,columnNumber:t,sourceURL:this.sourceURLs()[s.sourceIndex],sourceLineNumber:s.line,sourceColumnNumber:s.column,name:void 0}:(console.error("Malformed source map. Expected to have a callsite info for index",r),null)}const n=this.mappings(),i=s.ArrayUtilities.upperBound(n,void 0,((r,n)=>e-n.lineNumber||t-n.columnNumber));return i?n[i-1]:null}findEntryRanges(e,t){const n=this.mappings(),i=s.ArrayUtilities.upperBound(n,void 0,((r,n)=>e-n.lineNumber||t-n.columnNumber));if(!i)return null;const o=i-1,a=n[o].sourceURL;if(!a)return null;const l=i<n.length?n[i].lineNumber:2**31-1,d=i<n.length?n[i].columnNumber:2**31-1,c=new r.TextRange.TextRange(n[o].lineNumber,n[o].columnNumber,l,d),h=this.reversedMappings(a),u=n[o].sourceLineNumber,g=n[o].sourceColumnNumber,p=s.ArrayUtilities.upperBound(h,void 0,((e,t)=>u-n[t].sourceLineNumber||g-n[t].sourceColumnNumber));if(!p)return null;const m=p<h.length?n[h[p]].sourceLineNumber:2**31-1,f=p<h.length?n[h[p]].sourceColumnNumber:2**31-1;return{range:c,sourceRange:new r.TextRange.TextRange(u,g,m,f),sourceURL:a}}sourceLineMapping(e,t,r){const n=this.mappings(),i=this.reversedMappings(e),o=s.ArrayUtilities.lowerBound(i,t,c),a=s.ArrayUtilities.upperBound(i,t,c);if(o>=i.length||n[i[o]].sourceLineNumber!==t)return null;const l=i.slice(o,a);if(!l.length)return null;const d=s.ArrayUtilities.lowerBound(l,r,((e,t)=>e-n[t].sourceColumnNumber));return d>=l.length?n[l[l.length-1]]:n[l[d]];function c(e,t){return e-n[t].sourceLineNumber}}findReverseIndices(e,t,r){const n=this.mappings(),i=this.reversedMappings(e),o=s.ArrayUtilities.upperBound(i,void 0,((e,s)=>t-n[s].sourceLineNumber||r-n[s].sourceColumnNumber));let a=o;for(;a>0&&n[i[a-1]].sourceLineNumber===n[i[o-1]].sourceLineNumber&&n[i[a-1]].sourceColumnNumber===n[i[o-1]].sourceColumnNumber;)--a;return i.slice(a,o)}findReverseEntries(e,t,r){const n=this.mappings();return this.findReverseIndices(e,t,r).map((e=>n[e]))}findReverseRanges(e,t,n){const s=this.mappings(),i=this.findReverseIndices(e,t,n),o=[];for(let e=0;e<i.length;++e){const t=i[e];let n=t+1;for(;e+1<i.length&&n===i[e+1];)++n,++e;const a=s[t].lineNumber,l=s[t].columnNumber,d=n<s.length?s[n].lineNumber:2**31-1,c=n<s.length?s[n].columnNumber:2**31-1;o.push(new r.TextRange.TextRange(a,l,d,c))}return o}mappings(){return this.#Ir(),this.#yr??[]}reversedMappings(e){return this.#Ir(),this.#vr.get(e)?.reverseMappings??[]}#Ir(){if(null===this.#yr){this.#yr=[];try{this.eachSection(this.parseMap.bind(this))}catch(e){console.error("Failed to parse source map",e),this.#yr=[]}this.mappings().sort(mr.compare),this.#wr(this.#yr),this.#pr=null}}#wr(e){const t=new Map;for(let r=0;r<e.length;r++){const n=e[r].sourceURL;if(!n)continue;let s=t.get(n);s||(s=[],t.set(n,s)),s.push(r)}for(const[e,n]of t.entries()){const t=this.#vr.get(e);t&&(n.sort(r),t.reverseMappings=n)}function r(t,r){const n=e[t],s=e[r];return n.sourceLineNumber-s.sourceLineNumber||n.sourceColumnNumber-s.sourceColumnNumber||n.lineNumber-s.lineNumber||n.columnNumber-s.columnNumber}}eachSection(e){if(this.#pr)if("sections"in this.#pr)for(const t of this.#pr.sections)"map"in t&&e(t.map,t.offset.line,t.offset.column);else e(this.#pr,0,0)}parseSources(t){const r=[],n=t.sourceRoot??"",s=new Set(t.ignoreList??t.x_google_ignoreList);for(let i=0;i<t.sources.length;++i){let o=t.sources[i];e.ParsedURL.ParsedURL.isRelativeURL(o)&&(o=n&&!n.endsWith("/")&&o&&!o.startsWith("/")?n.concat("/",o):n.concat(o));const a=e.ParsedURL.ParsedURL.completeURL(this.#br,o)||o,l=t.sourcesContent&&t.sourcesContent[i];if(r.push(a),!this.#vr.has(a)){const e=l??null,t=s.has(i);this.#vr.set(a,{content:e,ignoreListHint:t,reverseMappings:null,scopeTree:null})}}yr.set(t,r)}parseMap(e,t,r){let n=0,s=0,i=0,a=0;const l=yr.get(e),d=e.names??[],c=new kr(e.mappings);let h=l&&l[n];for(;;){if(","===c.peek())c.next();else{for(;";"===c.peek();)t+=1,r=0,c.next();if(!c.hasNext())break}if(r+=c.nextVLQ(),!c.hasNext()||this.isSeparator(c.peek())){this.mappings().push(new mr(t,r));continue}const e=c.nextVLQ();e&&(n+=e,l&&(h=l[n])),s+=c.nextVLQ(),i+=c.nextVLQ(),c.hasNext()&&!this.isSeparator(c.peek())?(a+=c.nextVLQ(),this.mappings().push(new mr(t,r,h,s,i,d[a]))):this.mappings().push(new mr(t,r,h,s,i))}o.Runtime.experiments.isEnabled("use-source-map-scopes")&&(this.parseBloombergScopes(e),this.#Sr(e))}parseBloombergScopes(e){if(!e.x_com_bloomberg_sourcesFunctionMappings)return;const t=yr.get(e);if(!t)return;const r=e.names??[],n=e.x_com_bloomberg_sourcesFunctionMappings;for(let e=0;e<t?.length;e++){if(!n[e]||!t[e])continue;const s=this.#vr.get(t[e]);if(!s)continue;const i=n[e];let o=0,a=0,l=0,d=0,c=0;const h=new kr(i),u=[];let g=!0;for(;h.hasNext();){if(g)g=!1;else{if(","!==h.peek())return;h.next()}o+=h.nextVLQ(),a+=h.nextVLQ(),l+=h.nextVLQ(),d+=h.nextVLQ(),c+=h.nextVLQ(),u.push(new br(a,l,d,c,r[o]??"<invalid>"))}s.scopeTree=this.buildScopeTree(u)}}buildScopeTree(e){const t=[];e.sort(((e,t)=>fr(e.start(),t.start())));const r=[];for(const n of e){const e=n.start();for(;r.length>0;){if(!(fr(r[r.length-1].end(),e)<0))break;r.pop()}r.length>0?r[r.length-1].children.push(n):t.push(n),r.push(n)}return t}#Sr(e){e.originalScopes&&e.generatedRanges&&(this.#kr=hr.parseFromMap(e))}findScopeEntry(e,t,r){const n=this.#vr.get(e);if(!n||!n.scopeTree)return null;const s={lineNumber:t,columnNumber:r};let i=null;for(;;){const e=(i?.children??n.scopeTree).find((e=>fr(e.start(),s)<=0&&fr(s,e.end())<=0));if(!e)return i;i=e}}isSeparator(e){return","===e||";"===e}reverseMapTextRanges(e,t){const n=this.reversedMappings(e),i=this.mappings();if(0===n.length)return[];let o=s.ArrayUtilities.lowerBound(n,t,(({startLine:e,startColumn:t},r)=>{const{sourceLineNumber:n,sourceColumnNumber:s}=i[r];return e-n||t-s}));for(;o===n.length||o>0&&(i[n[o]].sourceLineNumber>t.startLine||i[n[o]].sourceColumnNumber>t.startColumn);)o--;let a=o+1;for(;a<n.length;++a){const{sourceLineNumber:e,sourceColumnNumber:r}=i[n[a]];if(!(e<t.endLine||e===t.endLine&&r<t.endColumn))break}const l=[];for(let e=o;e<a;++e){const t=n[e],s=t+1,o=r.TextRange.TextRange.createUnboundedFromLocation(i[t].lineNumber,i[t].columnNumber);s<i.length&&(o.endLine=i[s].lineNumber,o.endColumn=i[s].columnNumber),l.push(o)}l.sort(r.TextRange.TextRange.comparator);let d=0;for(let e=1;e<l.length;++e)l[d].immediatelyPrecedes(l[e])?(l[d].endLine=l[e].endLine,l[d].endColumn=l[e].endColumn):l[++d]=l[e];return l.length=d+1,l}mapsOrigin(){const e=this.mappings();if(e.length>0){const t=e[0];return 0===t?.lineNumber||0===t.columnNumber}return!1}hasIgnoreListHint(e){return this.#vr.get(e)?.ignoreListHint??!1}findRanges(e,t){const n=this.mappings(),s=[];if(!n.length)return[];let i=null;0===n[0].lineNumber&&0===n[0].columnNumber||!t?.isStartMatching||(i=r.TextRange.TextRange.createUnboundedFromLocation(0,0),s.push(i));for(const{sourceURL:t,lineNumber:o,columnNumber:a}of n){const n=t&&e(t);i||!n?i&&!n&&(i.endLine=o,i.endColumn=a,i=null):(i=r.TextRange.TextRange.createUnboundedFromLocation(o,a),s.push(i))}return s}compatibleForURL(e,t){return this.embeddedContentByURL(e)===t.embeddedContentByURL(e)&&this.hasIgnoreListHint(e)===t.hasIgnoreListHint(e)}expandCallFrame(e){if(this.#Ir(),null===this.#kr)return[e];const t=this.#kr.findInlinedFunctions(e.location().lineNumber,e.location().columnNumber),r=[];for(const[n,s]of t.entries())r.push(e.createVirtualCallFrame(n,s.name));return r}}class kr{#Cr;#xr;constructor(e){this.#Cr=e,this.#xr=0}next(){return this.#Cr.charAt(this.#xr++)}nextCharCode(){return this.#Cr.charCodeAt(this.#xr++)}peek(){return this.#Cr.charAt(this.#xr)}hasNext(){return this.#xr<this.#Cr.length}nextVLQ(){let t=0,r=0,n=32;for(;32&n;){if(!this.hasNext())throw new Error("Unexpected end of input while decodling VLQ number!");const s=this.nextCharCode();if(n=e.Base64.BASE64_CODES[s],65!==s&&0===n)throw new Error(`Unexpected char '${String.fromCharCode(s)}' encountered while decoding`);t+=(31&n)<<r,r+=5}const s=1&t;return t>>=1,s?-t:t}peekVLQ(){const e=this.#xr;try{return this.nextVLQ()}catch{return null}finally{this.#xr=e}}}var Ir,wr=Object.freeze({__proto__:null,parseSourceMap:pr,SourceMapEntry:mr,SourceMap:vr,TokenIterator:kr});class Sr extends e.ObjectWrapper.ObjectWrapper{#Rr;#Tr;#Mr;#Pr;#Lr;constructor(e){super(),this.#Rr=e,this.#Tr=!0,this.#Lr=null,this.#Mr=new Map,this.#Pr=new Map,z.instance().addEventListener("InspectedURLChanged",this.inspectedURLChanged,this)}setEnabled(e){if(e===this.#Tr)return;const t=[...this.#Mr.entries()];for(const[e]of t)this.detachSourceMap(e);this.#Tr=e;for(const[e,{relativeSourceURL:r,relativeSourceMapURL:n}]of t)this.attachSourceMap(e,r,n)}static getBaseUrl(e){for(;e&&e.type()!==B.Frame;)e=e.parentTarget();return e?.inspectedURL()??s.DevToolsPath.EmptyUrlString}static resolveRelativeSourceURL(t,r){return r=e.ParsedURL.ParsedURL.completeURL(Sr.getBaseUrl(t),r)??r}inspectedURLChanged(e){if(e.data!==this.#Rr)return;const t=[...this.#Mr.entries()];for(const[e,{relativeSourceURL:r,relativeSourceMapURL:n}]of t)this.detachSourceMap(e),this.attachSourceMap(e,r,n)}sourceMapForClient(e){return this.#Mr.get(e)?.sourceMap}sourceMapForClientPromise(e){const t=this.#Mr.get(e);return t?t.sourceMapPromise:Promise.resolve(void 0)}clientForSourceMap(e){return this.#Pr.get(e)}attachSourceMap(t,r,n){if(this.#Mr.has(t))throw new Error("SourceMap is already attached or being attached to client");if(!n)return;let s={relativeSourceURL:r,relativeSourceMapURL:n,sourceMap:void 0,sourceMapPromise:Promise.resolve(void 0)};if(this.#Tr){const i=Sr.resolveRelativeSourceURL(this.#Rr,r),o=e.ParsedURL.ParsedURL.completeURL(i,n);if(o)if(this.#Lr&&console.error("Attaching source map may cancel previously attaching source map"),this.#Lr=t,this.dispatchEventToListeners(Ir.SourceMapWillAttach,{client:t}),this.#Lr===t){this.#Lr=null;const e=t.createPageResourceLoadInitiator();s.sourceMapPromise=async function(e,t){try{const{content:r}=await tr.instance().loadResource(e,t);return pr(r)}catch(t){throw new Error(`Could not load content for ${e}: ${t.message}`,{cause:t})}}(o,e).then((e=>{const r=new vr(i,o,e);return this.#Mr.get(t)===s&&(s.sourceMap=r,this.#Pr.set(r,t),this.dispatchEventToListeners(Ir.SourceMapAttached,{client:t,sourceMap:r})),r}),(()=>{this.#Mr.get(t)===s&&this.dispatchEventToListeners(Ir.SourceMapFailedToAttach,{client:t})}))}else this.#Lr&&console.error("Cancelling source map attach because another source map is attaching"),s=null,this.dispatchEventToListeners(Ir.SourceMapFailedToAttach,{client:t})}s&&this.#Mr.set(t,s)}cancelAttachSourceMap(e){e===this.#Lr?this.#Lr=null:this.#Lr?console.error("cancel attach source map requested but a different source map was being attached"):console.error("cancel attach source map requested but no source map was being attached")}detachSourceMap(e){const t=this.#Mr.get(e);if(!t)return;if(this.#Mr.delete(e),!this.#Tr)return;const{sourceMap:r}=t;r?(this.#Pr.delete(r),this.dispatchEventToListeners(Ir.SourceMapDetached,{client:e,sourceMap:r})):this.dispatchEventToListeners(Ir.SourceMapFailedToAttach,{client:e})}dispose(){z.instance().removeEventListener("InspectedURLChanged",this.inspectedURLChanged,this)}}!function(e){e.SourceMapWillAttach="SourceMapWillAttach",e.SourceMapFailedToAttach="SourceMapFailedToAttach",e.SourceMapAttached="SourceMapAttached",e.SourceMapDetached="SourceMapDetached"}(Ir||(Ir={}));var Cr,xr=Object.freeze({__proto__:null,SourceMapManager:Sr,get Events(){return Ir}});class Rr extends h{agent;#Er;#Ar;#Or;#Dr;#Nr;#Fr;#Br;#Hr;#Ur;#_r;#qr;#zr;#jr;#Tr;#Vr;#Wr;#Gr;constructor(t){super(t),this.#Tr=!1,this.#_r=null,this.#qr=null,this.#Er=t.model(Dn),this.#Nr=new Sr(t),this.agent=t.cssAgent(),this.#Fr=new Er(this),this.#Dr=t.model(Kn),this.#Dr&&this.#Dr.addEventListener(Wn.PrimaryPageChanged,this.onPrimaryPageChanged,this),t.registerCSSDispatcher(new Lr(this)),t.suspended()||this.enable(),this.#Ur=new Map,this.#Hr=new Map,this.#Or=new Map,this.#Vr=!1,this.#Ar=new Map,this.#zr=null,this.#jr=!1,this.#Wr=!1,this.#Br=new e.Throttler.Throttler(Dr),this.#Nr.setEnabled(e.Settings.Settings.instance().moduleSetting("css-source-maps-enabled").get()),e.Settings.Settings.instance().moduleSetting("css-source-maps-enabled").addChangeListener((e=>this.#Nr.setEnabled(e.data)))}async colorScheme(){if(!this.#Gr){const e=await(this.domModel()?.target().runtimeAgent().invoke_evaluate({expression:'window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches'}));!e||e.exceptionDetails||e.getError()||(this.#Gr=e.result.value?"dark":"light")}return this.#Gr}headersForSourceURL(e){const t=[];for(const r of this.getStyleSheetIdsForURL(e)){const e=this.styleSheetHeaderForId(r);e&&t.push(e)}return t}createRawLocationsByURL(e,t,r=0){const n=this.headersForSourceURL(e);n.sort((function(e,t){return e.startLine-t.startLine||e.startColumn-t.startColumn||e.id.localeCompare(t.id)}));const i=s.ArrayUtilities.upperBound(n,void 0,((e,n)=>t-n.startLine||r-n.startColumn));if(!i)return[];const o=[],a=n[i-1];for(let e=i-1;e>=0&&n[e].startLine===a.startLine&&n[e].startColumn===a.startColumn;--e)n[e].containsLocation(t,r)&&o.push(new Pr(n[e],t,r));return o}sourceMapManager(){return this.#Nr}static readableLayerName(e){return e||"<anonymous>"}static trimSourceURL(e){let t=e.lastIndexOf("/*# sourceURL=");if(-1===t&&(t=e.lastIndexOf("/*@ sourceURL="),-1===t))return e;const r=e.lastIndexOf("\n",t);if(-1===r)return e;const n=e.substr(r+1).split("\n",1)[0];return-1===n.search(/[\x20\t]*\/\*[#@] sourceURL=[\x20\t]*([^\s]*)[\x20\t]*\*\/[\x20\t]*$/)?e:e.substr(0,r)+e.substr(r+n.length+1)}domModel(){return this.#Er}async setStyleText(e,t,r,n){try{await this.ensureOriginalStyleSheetText(e);const{styles:s}=await this.agent.invoke_setStyleTexts({edits:[{styleSheetId:e,range:t.serializeToObject(),text:r}]});if(!s||1!==s.length)return!1;this.#Er.markUndoableState(!n);const i=new Mr(e,t,r,s[0]);return this.fireStyleSheetChanged(e,i),!0}catch(e){return console.error(e),!1}}async setSelectorText(e,t,r){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{selectorList:n}=await this.agent.invoke_setRuleSelector({styleSheetId:e,range:t,selector:r});if(!n)return!1;this.#Er.markUndoableState();const s=new Mr(e,t,r,n);return this.fireStyleSheetChanged(e,s),!0}catch(e){return console.error(e),!1}}async setPropertyRulePropertyName(e,t,r){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{propertyName:n}=await this.agent.invoke_setPropertyRulePropertyName({styleSheetId:e,range:t,propertyName:r});if(!n)return!1;this.#Er.markUndoableState();const s=new Mr(e,t,r,n);return this.fireStyleSheetChanged(e,s),!0}catch(e){return console.error(e),!1}}async setKeyframeKey(e,t,r){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{keyText:n}=await this.agent.invoke_setKeyframeKey({styleSheetId:e,range:t,keyText:r});if(!n)return!1;this.#Er.markUndoableState();const s=new Mr(e,t,r,n);return this.fireStyleSheetChanged(e,s),!0}catch(e){return console.error(e),!1}}startCoverage(){return this.#Vr=!0,this.agent.invoke_startRuleUsageTracking()}async takeCoverageDelta(){const e=await this.agent.invoke_takeCoverageDelta();return{timestamp:e&&e.timestamp||0,coverage:e&&e.coverage||[]}}setLocalFontsEnabled(e){return this.agent.invoke_setLocalFontsEnabled({enabled:e})}async stopCoverage(){this.#Vr=!1,await this.agent.invoke_stopRuleUsageTracking()}async getMediaQueries(){const{medias:e}=await this.agent.invoke_getMediaQueries();return e?Je.parseMediaArrayPayload(this,e):[]}async getRootLayer(e){const{rootLayer:t}=await this.agent.invoke_getLayersForNode({nodeId:e});return t}isEnabled(){return this.#Tr}async enable(){await this.agent.invoke_enable(),this.#Tr=!0,this.#Vr&&await this.startCoverage(),this.dispatchEventToListeners(Cr.ModelWasEnabled)}async getMatchedStyles(e){const t=await this.agent.invoke_getMatchedStylesForNode({nodeId:e});if(t.getError())return null;const r=this.#Er.nodeForId(e);return r?await wt.create({cssModel:this,node:r,inlinePayload:t.inlineStyle||null,attributesPayload:t.attributesStyle||null,matchedPayload:t.matchedCSSRules||[],pseudoPayload:t.pseudoElements||[],inheritedPayload:t.inherited||[],inheritedPseudoPayload:t.inheritedPseudoElements||[],animationsPayload:t.cssKeyframesRules||[],parentLayoutNodeId:t.parentLayoutNodeId,positionTryRules:t.cssPositionTryRules||[],propertyRules:t.cssPropertyRules??[],cssPropertyRegistrations:t.cssPropertyRegistrations??[],fontPaletteValuesRule:t.cssFontPaletteValuesRule}):null}async getClassNames(e){const{classNames:t}=await this.agent.invoke_collectClassNames({styleSheetId:e});return t||[]}async getComputedStyle(e){return this.isEnabled()||await this.enable(),this.#Fr.computedStylePromise(e)}async getBackgroundColors(e){const t=await this.agent.invoke_getBackgroundColors({nodeId:e});return t.getError()?null:{backgroundColors:t.backgroundColors||null,computedFontSize:t.computedFontSize||"",computedFontWeight:t.computedFontWeight||""}}async getPlatformFonts(e){const{fonts:t}=await this.agent.invoke_getPlatformFontsForNode({nodeId:e});return t}allStyleSheets(){const e=[...this.#Ur.values()];return e.sort((function(e,t){return e.sourceURL<t.sourceURL?-1:e.sourceURL>t.sourceURL?1:e.startLine-t.startLine||e.startColumn-t.startColumn})),e}async getInlineStyles(e){const t=await this.agent.invoke_getInlineStylesForNode({nodeId:e});if(t.getError()||!t.inlineStyle)return null;const r=new st(this,null,t.inlineStyle,rt.Inline),n=t.attributesStyle?new st(this,null,t.attributesStyle,rt.Attributes):null;return new Ar(r,n)}forcePseudoState(e,t,r){const n=e.marker(Tr)||[],i=n.includes(t);if(r){if(i)return!1;n.push(t),e.setMarker(Tr,n)}else{if(!i)return!1;s.ArrayUtilities.removeElement(n,t),n.length?e.setMarker(Tr,n):e.setMarker(Tr,null)}return void 0!==e.id&&(this.agent.invoke_forcePseudoState({nodeId:e.id,forcedPseudoClasses:n}),this.dispatchEventToListeners(Cr.PseudoStateForced,{node:e,pseudoClass:t,enable:r}),!0)}pseudoState(e){return e.marker(Tr)||[]}async setMediaText(e,t,r){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{media:n}=await this.agent.invoke_setMediaText({styleSheetId:e,range:t,text:r});if(!n)return!1;this.#Er.markUndoableState();const s=new Mr(e,t,r,n);return this.fireStyleSheetChanged(e,s),!0}catch(e){return console.error(e),!1}}async setContainerQueryText(e,t,r){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{containerQuery:n}=await this.agent.invoke_setContainerQueryText({styleSheetId:e,range:t,text:r});if(!n)return!1;this.#Er.markUndoableState();const s=new Mr(e,t,r,n);return this.fireStyleSheetChanged(e,s),!0}catch(e){return console.error(e),!1}}async setSupportsText(e,t,r){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{supports:n}=await this.agent.invoke_setSupportsText({styleSheetId:e,range:t,text:r});if(!n)return!1;this.#Er.markUndoableState();const s=new Mr(e,t,r,n);return this.fireStyleSheetChanged(e,s),!0}catch(e){return console.error(e),!1}}async setScopeText(e,t,r){a.userMetrics.actionTaken(a.UserMetrics.Action.StyleRuleEdited);try{await this.ensureOriginalStyleSheetText(e);const{scope:n}=await this.agent.invoke_setScopeText({styleSheetId:e,range:t,text:r});if(!n)return!1;this.#Er.markUndoableState();const s=new Mr(e,t,r,n);return this.fireStyleSheetChanged(e,s),!0}catch(e){return console.error(e),!1}}async addRule(e,t,r){try{await this.ensureOriginalStyleSheetText(e);const{rule:n}=await this.agent.invoke_addRule({styleSheetId:e,ruleText:t,location:r});if(!n)return null;this.#Er.markUndoableState();const s=new Mr(e,r,t,n);return this.fireStyleSheetChanged(e,s),new ct(this,n)}catch(e){return console.error(e),null}}async requestViaInspectorStylesheet(e){const t=e.frameId()||(this.#Dr&&this.#Dr.mainFrame?this.#Dr.mainFrame.id:null),r=[...this.#Ur.values()].find((e=>e.frameId===t&&e.isViaInspector()));if(r)return r;if(!t)return null;try{const{styleSheetId:e}=await this.agent.invoke_createStyleSheet({frameId:t});return e&&this.#Ur.get(e)||null}catch(e){return console.error(e),null}}mediaQueryResultChanged(){this.#Gr=void 0,this.dispatchEventToListeners(Cr.MediaQueryResultChanged)}fontsUpdated(e){e&&this.#Ar.set(e.src,new he(e)),this.dispatchEventToListeners(Cr.FontsUpdated)}fontFaces(){return[...this.#Ar.values()]}fontFaceForSource(e){return this.#Ar.get(e)}styleSheetHeaderForId(e){return this.#Ur.get(e)||null}styleSheetHeaders(){return[...this.#Ur.values()]}fireStyleSheetChanged(e,t){this.dispatchEventToListeners(Cr.StyleSheetChanged,{styleSheetId:e,edit:t})}ensureOriginalStyleSheetText(e){const t=this.styleSheetHeaderForId(e);if(!t)return Promise.resolve(null);let r=this.#Or.get(t);return r||(r=this.getStyleSheetText(t.id),this.#Or.set(t,r),this.originalContentRequestedForTest(t)),r}originalContentRequestedForTest(e){}originalStyleSheetText(e){return this.ensureOriginalStyleSheetText(e.id)}getAllStyleSheetHeaders(){return this.#Ur.values()}styleSheetAdded(e){console.assert(!this.#Ur.get(e.styleSheetId)),e.loadingFailed&&(e.hasSourceURL=!1,e.isConstructed=!0,e.isInline=!1,e.isMutable=!1,e.sourceURL="",e.sourceMapURL=void 0);const t=new Et(this,e);this.#Ur.set(e.styleSheetId,t);const r=t.resourceURL();let n=this.#Hr.get(r);if(n||(n=new Map,this.#Hr.set(r,n)),n){let e=n.get(t.frameId);e||(e=new Set,n.set(t.frameId,e)),e.add(t.id)}this.#Nr.attachSourceMap(t,t.sourceURL,t.sourceMapURL),this.dispatchEventToListeners(Cr.StyleSheetAdded,t)}styleSheetRemoved(e){const t=this.#Ur.get(e);if(console.assert(Boolean(t)),!t)return;this.#Ur.delete(e);const r=t.resourceURL(),n=this.#Hr.get(r);if(console.assert(Boolean(n),"No frameId to styleSheetId map is available for given style sheet URL."),n){const s=n.get(t.frameId);s&&(s.delete(e),s.size||(n.delete(t.frameId),n.size||this.#Hr.delete(r)))}this.#Or.delete(t),this.#Nr.detachSourceMap(t),this.dispatchEventToListeners(Cr.StyleSheetRemoved,t)}getStyleSheetIdsForURL(e){const t=this.#Hr.get(e);if(!t)return[];const r=[];for(const e of t.values())r.push(...e);return r}async setStyleSheetText(e,t,r){const n=this.#Ur.get(e);if(!n)return"Unknown stylesheet in CSS.setStyleSheetText";t=Rr.trimSourceURL(t),n.hasSourceURL&&(t+="\n/*# sourceURL="+n.sourceURL+" */"),await this.ensureOriginalStyleSheetText(e);const s=(await this.agent.invoke_setStyleSheetText({styleSheetId:n.id,text:t})).sourceMapURL;return this.#Nr.detachSourceMap(n),n.setSourceMapURL(s),this.#Nr.attachSourceMap(n,n.sourceURL,n.sourceMapURL),null===s?"Error in CSS.setStyleSheetText":(this.#Er.markUndoableState(!r),this.fireStyleSheetChanged(e),null)}async getStyleSheetText(e){try{const{text:t}=await this.agent.invoke_getStyleSheetText({styleSheetId:e});return t&&Rr.trimSourceURL(t)}catch(e){return null}}async onPrimaryPageChanged(e){e.data.frame.backForwardCacheDetails.restoredFromCache?(await this.suspendModel(),await this.resumeModel()):"Activation"!==e.data.type&&(this.resetStyleSheets(),this.resetFontFaces())}resetStyleSheets(){const e=[...this.#Ur.values()];this.#Hr.clear(),this.#Ur.clear();for(const t of e)this.#Nr.detachSourceMap(t),this.dispatchEventToListeners(Cr.StyleSheetRemoved,t)}resetFontFaces(){this.#Ar.clear()}async suspendModel(){this.#Tr=!1,await this.agent.invoke_disable(),this.resetStyleSheets(),this.resetFontFaces()}async resumeModel(){return this.enable()}setEffectivePropertyValueForNode(e,t,r){this.agent.invoke_setEffectivePropertyValueForNode({nodeId:e,propertyName:t,value:r})}cachedMatchedCascadeForNode(e){if(this.#_r!==e&&this.discardCachedMatchedCascade(),this.#_r=e,!this.#qr){if(!e.id)return Promise.resolve(null);this.#qr=this.getMatchedStyles(e.id)}return this.#qr}discardCachedMatchedCascade(){this.#_r=null,this.#qr=null}createCSSPropertyTracker(e){return new Or(this,e)}enableCSSPropertyTracker(e){const t=e.getTrackedProperties();0!==t.length&&(this.agent.invoke_trackComputedStyleUpdates({propertiesToTrack:t}),this.#jr=!0,this.#zr=e,this.pollComputedStyleUpdates())}disableCSSPropertyTracker(){this.#jr=!1,this.#zr=null,this.agent.invoke_trackComputedStyleUpdates({propertiesToTrack:[]})}async pollComputedStyleUpdates(){if(!this.#Wr){if(this.#jr){this.#Wr=!0;const e=await this.agent.invoke_takeComputedStyleUpdates();if(this.#Wr=!1,e.getError()||!e.nodeIds||!this.#jr)return;this.#zr&&this.#zr.dispatchEventToListeners("TrackedCSSPropertiesUpdated",e.nodeIds.map((e=>this.#Er.nodeForId(e))))}this.#jr&&this.#Br.schedule(this.pollComputedStyleUpdates.bind(this))}}dispose(){this.disableCSSPropertyTracker(),super.dispose(),this.#Nr.dispose()}getAgent(){return this.agent}}!function(e){e.FontsUpdated="FontsUpdated",e.MediaQueryResultChanged="MediaQueryResultChanged",e.ModelWasEnabled="ModelWasEnabled",e.PseudoStateForced="PseudoStateForced",e.StyleSheetAdded="StyleSheetAdded",e.StyleSheetChanged="StyleSheetChanged",e.StyleSheetRemoved="StyleSheetRemoved"}(Cr||(Cr={}));const Tr="pseudo-state-marker";class Mr{styleSheetId;oldRange;newRange;newText;payload;constructor(e,t,n,s){this.styleSheetId=e,this.oldRange=t,this.newRange=r.TextRange.TextRange.fromEdit(t,n),this.newText=n,this.payload=s}}class Pr{#ze;styleSheetId;url;lineNumber;columnNumber;constructor(e,t,r){this.#ze=e.cssModel(),this.styleSheetId=e.id,this.url=e.resourceURL(),this.lineNumber=t,this.columnNumber=r||0}cssModel(){return this.#ze}header(){return this.#ze.styleSheetHeaderForId(this.styleSheetId)}}class Lr{#it;constructor(e){this.#it=e}mediaQueryResultChanged(){this.#it.mediaQueryResultChanged()}fontsUpdated({font:e}){this.#it.fontsUpdated(e)}styleSheetChanged({styleSheetId:e}){this.#it.fireStyleSheetChanged(e)}styleSheetAdded({header:e}){this.#it.styleSheetAdded(e)}styleSheetRemoved({styleSheetId:e}){this.#it.styleSheetRemoved(e)}}class Er{#it;#Kr;constructor(e){this.#it=e,this.#Kr=new Map}computedStylePromise(e){let t=this.#Kr.get(e);return t||(t=this.#it.getAgent().invoke_getComputedStyleForNode({nodeId:e}).then((({computedStyle:t})=>{if(this.#Kr.delete(e),!t||!t.length)return null;const r=new Map;for(const e of t)r.set(e.name,e.value);return r})),this.#Kr.set(e,t),t)}}class Ar{inlineStyle;attributesStyle;constructor(e,t){this.inlineStyle=e,this.attributesStyle=t}}class Or extends e.ObjectWrapper.ObjectWrapper{#it;#Qr;constructor(e,t){super(),this.#it=e,this.#Qr=t}start(){this.#it.enableCSSPropertyTracker(this)}stop(){this.#it.disableCSSPropertyTracker()}getTrackedProperties(){return this.#Qr}}const Dr=1e3;h.register(Rr,{capabilities:2,autostart:!0});var Nr=Object.freeze({__proto__:null,CSSModel:Rr,get Events(){return Cr},Edit:Mr,CSSLocation:Pr,InlineStyleResult:Ar,CSSPropertyTracker:Or});class Fr extends h{#$r;#Xr;#Jr;#Yr;constructor(e){super(e),e.registerHeapProfilerDispatcher(new Br(this)),this.#$r=!1,this.#Xr=e.heapProfilerAgent(),this.#Jr=e.model(_r),this.#Yr=0}debuggerModel(){return this.#Jr.debuggerModel()}runtimeModel(){return this.#Jr}async enable(){this.#$r||(this.#$r=!0,await this.#Xr.invoke_enable())}async startSampling(e){if(this.#Yr++)return!1;const t=await this.#Xr.invoke_startSampling({samplingInterval:e||16384});return Boolean(t.getError())}async stopSampling(){if(!this.#Yr)throw new Error("Sampling profiler is not running.");if(--this.#Yr)return this.getSamplingProfile();const e=await this.#Xr.invoke_stopSampling();return e.getError()?null:e.profile}async getSamplingProfile(){const e=await this.#Xr.invoke_getSamplingProfile();return e.getError()?null:e.profile}async collectGarbage(){const e=await this.#Xr.invoke_collectGarbage();return Boolean(e.getError())}async snapshotObjectIdForObjectId(e){const t=await this.#Xr.invoke_getHeapObjectId({objectId:e});return t.getError()?null:t.heapSnapshotObjectId}async objectForSnapshotObjectId(e,t){const r=await this.#Xr.invoke_getObjectByHeapObjectId({objectId:e,objectGroup:t});return r.getError()?null:this.#Jr.createRemoteObject(r.result)}async addInspectedHeapObject(e){const t=await this.#Xr.invoke_addInspectedHeapObject({heapObjectId:e});return Boolean(t.getError())}async takeHeapSnapshot(e){await this.#Xr.invoke_takeHeapSnapshot(e)}async startTrackingHeapObjects(e){const t=await this.#Xr.invoke_startTrackingHeapObjects({trackAllocations:e});return Boolean(t.getError())}async stopTrackingHeapObjects(e){const t=await this.#Xr.invoke_stopTrackingHeapObjects({reportProgress:e});return Boolean(t.getError())}heapStatsUpdate(e){this.dispatchEventToListeners("HeapStatsUpdate",e)}lastSeenObjectId(e,t){this.dispatchEventToListeners("LastSeenObjectId",{lastSeenObjectId:e,timestamp:t})}addHeapSnapshotChunk(e){this.dispatchEventToListeners("AddHeapSnapshotChunk",e)}reportHeapSnapshotProgress(e,t,r){this.dispatchEventToListeners("ReportHeapSnapshotProgress",{done:e,total:t,finished:r})}resetProfiles(){this.dispatchEventToListeners("ResetProfiles",this)}}class Br{#Zr;constructor(e){this.#Zr=e}heapStatsUpdate({statsUpdate:e}){this.#Zr.heapStatsUpdate(e)}lastSeenObjectId({lastSeenObjectId:e,timestamp:t}){this.#Zr.lastSeenObjectId(e,t)}addHeapSnapshotChunk({chunk:e}){this.#Zr.addHeapSnapshotChunk(e)}reportHeapSnapshotProgress({done:e,total:t,finished:r}){this.#Zr.reportHeapSnapshotProgress(e,t,r)}resetProfiles(){this.#Zr.resetProfiles()}}h.register(Fr,{capabilities:4,autostart:!1});var Hr,Ur=Object.freeze({__proto__:null,HeapProfilerModel:Fr});class _r extends h{agent;#en;#tn;constructor(t){super(t),this.agent=t.runtimeAgent(),this.target().registerRuntimeDispatcher(new qr(this)),this.agent.invoke_enable(),this.#en=new Map,this.#tn=zr.comparator,e.Settings.Settings.instance().moduleSetting("custom-formatters").get()&&this.agent.invoke_setCustomObjectFormatterEnabled({enabled:!0}),e.Settings.Settings.instance().moduleSetting("custom-formatters").addChangeListener(this.customFormattersStateChanged.bind(this))}static isSideEffectFailure(e){const t="exceptionDetails"in e&&e.exceptionDetails;return Boolean(t&&t.exception&&t.exception.description&&t.exception.description.startsWith("EvalError: Possible side-effect in debug-evaluate"))}debuggerModel(){return this.target().model(rn)}heapProfilerModel(){return this.target().model(Fr)}executionContexts(){return[...this.#en.values()].sort(this.executionContextComparator())}setExecutionContextComparator(e){this.#tn=e}executionContextComparator(){return this.#tn}defaultExecutionContext(){for(const e of this.executionContexts())if(e.isDefault)return e;return null}executionContext(e){return this.#en.get(e)||null}executionContextCreated(e){const t=e.auxData||{isDefault:!0},r=new zr(this,e.id,e.uniqueId,e.name,e.origin,t.isDefault,t.frameId);this.#en.set(r.id,r),this.dispatchEventToListeners(Hr.ExecutionContextCreated,r)}executionContextDestroyed(e){const t=this.#en.get(e);t&&(this.debuggerModel().executionContextDestroyed(t),this.#en.delete(e),this.dispatchEventToListeners(Hr.ExecutionContextDestroyed,t))}fireExecutionContextOrderChanged(){this.dispatchEventToListeners(Hr.ExecutionContextOrderChanged,this)}executionContextsCleared(){this.debuggerModel().globalObjectCleared();const e=this.executionContexts();this.#en.clear();for(let t=0;t<e.length;++t)this.dispatchEventToListeners(Hr.ExecutionContextDestroyed,e[t])}createRemoteObject(e){return console.assert("object"==typeof e,"Remote object payload should only be an object"),new Bt(this,e.objectId,e.type,e.subtype,e.value,e.unserializableValue,e.description,e.preview,e.customPreview,e.className)}createScopeRemoteObject(e,t){return new Ht(this,e.objectId,t,e.type,e.subtype,e.value,e.unserializableValue,e.description,e.preview)}createRemoteObjectFromPrimitiveValue(e){const t=typeof e;let r;const n=Ft.unserializableDescription(e);return null!==n&&(r=n),void 0!==r&&(e=void 0),new Bt(this,void 0,t,void 0,e,r)}createRemotePropertyFromPrimitiveValue(e,t){return new _t(e,this.createRemoteObjectFromPrimitiveValue(t))}discardConsoleEntries(){this.agent.invoke_discardConsoleEntries()}releaseObjectGroup(e){this.agent.invoke_releaseObjectGroup({objectGroup:e})}releaseEvaluationResult(e){if("object"in e&&e.object&&e.object.release(),"exceptionDetails"in e&&e.exceptionDetails&&e.exceptionDetails.exception){const t=e.exceptionDetails.exception;this.createRemoteObject({type:t.type,objectId:t.objectId}).release()}}runIfWaitingForDebugger(){this.agent.invoke_runIfWaitingForDebugger()}customFormattersStateChanged({data:e}){this.agent.invoke_setCustomObjectFormatterEnabled({enabled:e})}async compileScript(e,t,r,n){const s=await this.agent.invoke_compileScript({expression:e,sourceURL:t,persistScript:r,executionContextId:n});return s.getError()?(console.error(s.getError()),null):{scriptId:s.scriptId,exceptionDetails:s.exceptionDetails}}async runScript(e,t,r,n,s,i,o,a){const l=await this.agent.invoke_runScript({scriptId:e,executionContextId:t,objectGroup:r,silent:n,includeCommandLineAPI:s,returnByValue:i,generatePreview:o,awaitPromise:a}),d=l.getError();return d?(console.error(d),{error:d}):{object:this.createRemoteObject(l.result),exceptionDetails:l.exceptionDetails}}async queryObjects(e){if(!e.objectId)return{error:"Prototype should be an Object."};const t=await this.agent.invoke_queryObjects({prototypeObjectId:e.objectId,objectGroup:"console"}),r=t.getError();return r?(console.error(r),{error:r}):{objects:this.createRemoteObject(t.objects)}}async isolateId(){const e=await this.agent.invoke_getIsolateId();return e.getError()||!e.id?this.target().id():e.id}async heapUsage(){const e=await this.agent.invoke_getHeapUsage();return e.getError()?null:e}inspectRequested(t,r,n){const s=this.createRemoteObject(t);if(null!==r&&"object"==typeof r){if("copyToClipboard"in r&&Boolean(r.copyToClipboard))return void this.copyRequested(s);if("queryObjects"in r&&r.queryObjects)return void this.queryObjectsRequested(s,n)}s.isNode()?e.Revealer.reveal(s).then(s.release.bind(s)):"function"!==s.type?s.release():jt.objectAsFunction(s).targetFunctionDetails().then((function(t){if(s.release(),!t||!t.location)return;e.Revealer.reveal(t.location)}))}async addBinding(e){return await this.agent.invoke_addBinding(e)}async removeBinding(e){return await this.agent.invoke_removeBinding(e)}bindingCalled(e){this.dispatchEventToListeners(Hr.BindingCalled,e)}copyRequested(t){if(!t.objectId)return void a.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(t.unserializableValue()||t.value);const r=e.Settings.Settings.instance().moduleSetting("text-editor-indent").get();t.callFunctionJSON((function(e){const t=e.subtype,r=e.indent;if("node"===t)return this instanceof Element?this.outerHTML:void 0;if(t&&void 0===this)return String(t);try{return JSON.stringify(this,null,r)}catch(e){return String(this)}}),[{value:{subtype:t.subtype,indent:r}}]).then(a.InspectorFrontendHost.InspectorFrontendHostInstance.copyText.bind(a.InspectorFrontendHost.InspectorFrontendHostInstance))}async queryObjectsRequested(t,r){const n=await this.queryObjects(t);t.release(),"error"in n?e.Console.Console.instance().error(n.error):this.dispatchEventToListeners(Hr.QueryObjectRequested,{objects:n.objects,executionContextId:r})}static simpleTextFromException(e){let t=e.text;if(e.exception&&e.exception.description){let r=e.exception.description;-1!==r.indexOf("\n")&&(r=r.substring(0,r.indexOf("\n"))),t+=" "+r}return t}exceptionThrown(e,t){const r={timestamp:e,details:t};this.dispatchEventToListeners(Hr.ExceptionThrown,r)}exceptionRevoked(e){this.dispatchEventToListeners(Hr.ExceptionRevoked,e)}consoleAPICalled(e,t,r,n,s,i){const o={type:e,args:t,executionContextId:r,timestamp:n,stackTrace:s,context:i};this.dispatchEventToListeners(Hr.ConsoleAPICalled,o)}executionContextIdForScriptId(e){const t=this.debuggerModel().scriptForId(e);return t?t.executionContextId:0}executionContextForStackTrace(e){let t=e;for(;t&&!t.callFrames.length;)t=t.parent||null;return t&&t.callFrames.length?this.executionContextIdForScriptId(t.callFrames[0].scriptId):0}terminateExecution(){return this.agent.invoke_terminateExecution()}async getExceptionDetails(e){const t=await this.agent.invoke_getExceptionDetails({errorObjectId:e});if(!t.getError())return t.exceptionDetails}}!function(e){e.BindingCalled="BindingCalled",e.ExecutionContextCreated="ExecutionContextCreated",e.ExecutionContextDestroyed="ExecutionContextDestroyed",e.ExecutionContextChanged="ExecutionContextChanged",e.ExecutionContextOrderChanged="ExecutionContextOrderChanged",e.ExceptionThrown="ExceptionThrown",e.ExceptionRevoked="ExceptionRevoked",e.ConsoleAPICalled="ConsoleAPICalled",e.QueryObjectRequested="QueryObjectRequested"}(Hr||(Hr={}));class qr{#rn;constructor(e){this.#rn=e}executionContextCreated({context:e}){this.#rn.executionContextCreated(e)}executionContextDestroyed({executionContextId:e}){this.#rn.executionContextDestroyed(e)}executionContextsCleared(){this.#rn.executionContextsCleared()}exceptionThrown({timestamp:e,exceptionDetails:t}){this.#rn.exceptionThrown(e,t)}exceptionRevoked({exceptionId:e}){this.#rn.exceptionRevoked(e)}consoleAPICalled({type:e,args:t,executionContextId:r,timestamp:n,stackTrace:s,context:i}){this.#rn.consoleAPICalled(e,t,r,n,s,i)}inspectRequested({object:e,hints:t,executionContextId:r}){this.#rn.inspectRequested(e,t,r)}bindingCalled(e){this.#rn.bindingCalled(e)}}class zr{id;uniqueId;name;#nn;origin;isDefault;runtimeModel;debuggerModel;frameId;constructor(e,t,r,n,s,i,o){this.id=t,this.uniqueId=r,this.name=n,this.#nn=null,this.origin=s,this.isDefault=i,this.runtimeModel=e,this.debuggerModel=e.debuggerModel(),this.frameId=o,this.setLabelInternal("")}target(){return this.runtimeModel.target()}static comparator(e,t){function r(e){return e.parentTarget()?.type()!==B.Frame?5:e.type()===B.Frame?4:e.type()===B.ServiceWorker?3:e.type()===B.Worker||e.type()===B.SharedWorker?2:1}function n(e){let t=e;const r=[];for(;t;)r.push(t),t=t.parentTarget();return r.reverse()}const s=n(e.target()),i=n(t.target());let o,a;for(let e=0;;e++)if(!s[e]||!i[e]||s[e]!==i[e]){o=s[e],a=i[e];break}if(!o&&a)return-1;if(!a&&o)return 1;if(o&&a){const e=r(o)-r(a);return e?-e:o.id().localeCompare(a.id())}return e.isDefault?-1:t.isDefault?1:e.name.localeCompare(t.name)}async evaluate(e,t,r){return this.debuggerModel.selectedCallFrame()?this.debuggerModel.evaluateOnSelectedCallFrame(e):this.evaluateGlobal(e,t,r)}globalObject(e,t){const r={expression:"this",objectGroup:e,includeCommandLineAPI:!1,silent:!0,returnByValue:!1,generatePreview:t};return this.evaluateGlobal(r,!1,!1)}async evaluateGlobal(e,t,r){e.expression||(e.expression="this");const n=await this.runtimeModel.agent.invoke_evaluate({expression:e.expression,objectGroup:e.objectGroup,includeCommandLineAPI:e.includeCommandLineAPI,silent:e.silent,returnByValue:e.returnByValue,generatePreview:e.generatePreview,userGesture:t,awaitPromise:r,throwOnSideEffect:e.throwOnSideEffect,timeout:e.timeout,disableBreaks:e.disableBreaks,replMode:e.replMode,allowUnsafeEvalBlockedByCSP:e.allowUnsafeEvalBlockedByCSP,...this.uniqueId?{uniqueContextId:this.uniqueId}:{contextId:this.id}}),s=n.getError();return s?(console.error(s),{error:s}):{object:this.runtimeModel.createRemoteObject(n.result),exceptionDetails:n.exceptionDetails}}async globalLexicalScopeNames(){const e=await this.runtimeModel.agent.invoke_globalLexicalScopeNames({executionContextId:this.id});return e.getError()?[]:e.names}label(){return this.#nn}setLabel(e){this.setLabelInternal(e),this.runtimeModel.dispatchEventToListeners(Hr.ExecutionContextChanged,this)}setLabelInternal(t){if(t)return void(this.#nn=t);if(this.name)return void(this.#nn=this.name);const r=e.ParsedURL.ParsedURL.fromString(this.origin);this.#nn=r?r.lastPathComponentWithFragment():""}}h.register(_r,{capabilities:4,autostart:!0});var jr=Object.freeze({__proto__:null,RuntimeModel:_r,get Events(){return Hr},ExecutionContext:zr});const Vr={scriptRemovedOrDeleted:"Script removed or deleted.",unableToFetchScriptSource:"Unable to fetch script source."},Wr=n.i18n.registerUIStrings("core/sdk/Script.ts",Vr),Gr=n.i18n.getLocalizedString.bind(void 0,Wr);let Kr=null;class Qr{debuggerModel;scriptId;sourceURL;lineOffset;columnOffset;endLine;endColumn;executionContextId;hash;#sn;#in;sourceMapURL;debugSymbols;hasSourceURL;contentLength;originStackTrace;#on;#an;#ln;#dn;isModule;constructor(e,t,r,n,s,i,o,a,l,d,c,h,u,g,p,m,f,b,y,v){this.debuggerModel=e,this.scriptId=t,this.sourceURL=r,this.lineOffset=n,this.columnOffset=s,this.endLine=i,this.endColumn=o,this.isModule=p,this.executionContextId=a,this.hash=l,this.#sn=d,this.#in=c,this.sourceMapURL=h,this.debugSymbols=y,this.hasSourceURL=u,this.contentLength=g,this.originStackTrace=m,this.#on=f,this.#an=b,this.#ln=null,this.#dn=v}embedderName(){return this.#dn}target(){return this.debuggerModel.target()}static trimSourceURLComment(e){let t=e.lastIndexOf("//# sourceURL=");if(-1===t&&(t=e.lastIndexOf("//@ sourceURL="),-1===t))return e;const r=e.lastIndexOf("\n",t);if(-1===r)return e;return e.substr(r+1).match(Xr)?e.substr(0,r):e}isContentScript(){return this.#sn}codeOffset(){return this.#on}isJavaScript(){return"JavaScript"===this.#an}isWasm(){return"WebAssembly"===this.#an}scriptLanguage(){return this.#an}executionContext(){return this.debuggerModel.runtimeModel().executionContext(this.executionContextId)}isLiveEdit(){return this.#in}contentURL(){return this.sourceURL}contentType(){return e.ResourceType.resourceTypes.Script}async loadTextContent(){const t=await this.debuggerModel.target().debuggerAgent().invoke_getScriptSource({scriptId:this.scriptId});if(t.getError())throw new Error(t.getError());const{scriptSource:n,bytecode:s}=t;if(s)return new r.ContentData.ContentData(s,!0,"application/wasm");let i=n||"";return this.hasSourceURL&&e.ParsedURL.schemeIs(this.sourceURL,"snippet:")&&(i=Qr.trimSourceURLComment(i)),new r.ContentData.ContentData(i,!1,"text/javascript")}async loadWasmContent(){if(!this.isWasm())throw new Error("Not a wasm script");const t=await this.debuggerModel.target().debuggerAgent().invoke_disassembleWasmModule({scriptId:this.scriptId});if(t.getError()){const t=await this.loadTextContent();return await async function(t){const n=e.Worker.WorkerWrapper.fromURL(new URL("../../entrypoints/wasmparser_worker/wasmparser_worker-entrypoint.js",import.meta.url)),s=new Promise(((e,t)=>{n.onmessage=({data:n})=>{if("method"in n&&"disassemble"===n.method)if("error"in n)t(n.error);else if("result"in n){const{lines:t,offsets:s,functionBodyOffsets:i}=n.result;e(new r.WasmDisassembly.WasmDisassembly(t,s,i))}},n.onerror=t}));n.postMessage({method:"disassemble",params:{content:t}});try{return await s}finally{n.terminate()}}(t.base64)}const{streamId:n,functionBodyOffsets:s,chunk:{lines:i,bytecodeOffsets:o}}=t,a=[],l=[];let d=i.reduce(((e,t)=>e+t.length+1),0);const c="<truncated>";if(n)for(;;){const e=await this.debuggerModel.target().debuggerAgent().invoke_nextWasmDisassemblyChunk({streamId:n});if(e.getError())throw new Error(e.getError());const{chunk:{lines:t,bytecodeOffsets:r}}=e;if(d+=t.reduce(((e,t)=>e+t.length+1),0),0===t.length)break;if(d>=999999989){a.push([c]),l.push([0]);break}a.push(t),l.push(r)}const h=[];for(let e=0;e<s.length;e+=2)h.push({start:s[e],end:s[e+1]});return new r.WasmDisassembly.WasmDisassembly(i.concat(...a),o.concat(...l),h)}requestContentData(){if(!this.#ln){const e=65535;if(this.hash&&!this.#in&&this.contentLength>e){Kr||(Kr={cache:new Map,registry:new FinalizationRegistry((e=>Kr?.cache.delete(e)))});const e=[this.#an,this.contentLength,this.lineOffset,this.columnOffset,this.endLine,this.endColumn,this.#on,this.hash].join(":"),t=Kr.cache.get(e)?.deref();t?this.#ln=t:(this.#ln=this.requestContentInternal(),Kr.cache.set(e,new WeakRef(this.#ln)),Kr.registry.register(this.#ln,e))}else this.#ln=this.requestContentInternal()}return this.#ln}async requestContent(){const e=await this.requestContentData();return r.ContentData.ContentData.asDeferredContent(e)}async requestContentInternal(){if(!this.scriptId)return{error:Gr(Vr.scriptRemovedOrDeleted)};try{return this.isWasm()?await this.loadWasmContent():await this.loadTextContent()}catch(e){return{error:Gr(Vr.unableToFetchScriptSource)}}}async getWasmBytecode(){const e=await this.debuggerModel.target().debuggerAgent().invoke_getWasmBytecode({scriptId:this.scriptId});return(await fetch(`data:application/wasm;base64,${e.bytecode}`)).arrayBuffer()}originalContentProvider(){return new r.StaticContentProvider.StaticContentProvider(this.contentURL(),this.contentType(),(()=>this.requestContentData()))}async searchInContent(e,t,n){if(!this.scriptId)return[];const s=await this.debuggerModel.target().debuggerAgent().invoke_searchInContent({scriptId:this.scriptId,query:e,caseSensitive:t,isRegex:n});return r.TextUtils.performSearchInSearchMatches(s.result||[],e,t,n)}appendSourceURLCommentIfNeeded(e){return this.hasSourceURL?e+"\n //# sourceURL="+this.sourceURL:e}async editSource(e){e=Qr.trimSourceURLComment(e),e=this.appendSourceURLCommentIfNeeded(e);if(r.ContentData.ContentData.textOr(await this.requestContentData(),null)===e)return{changed:!1,status:"Ok"};const t=await this.debuggerModel.target().debuggerAgent().invoke_setScriptSource({scriptId:this.scriptId,scriptSource:e,allowTopFrameEditing:!0});if(t.getError())throw new Error(`Script#editSource failed for script with id ${this.scriptId}: ${t.getError()}`);return t.getError()||"Ok"!==t.status||(this.#ln=Promise.resolve(new r.ContentData.ContentData(e,!1,"text/javascript"))),this.debuggerModel.dispatchEventToListeners(on.ScriptSourceWasEdited,{script:this,status:t.status}),{changed:!0,status:t.status,exceptionDetails:t.exceptionDetails}}rawLocation(e,t){return this.containsLocation(e,t)?new ln(this.debuggerModel,this.scriptId,e,t):null}isInlineScript(){const e=!this.lineOffset&&!this.columnOffset;return!this.isWasm()&&Boolean(this.sourceURL)&&!e}isAnonymousScript(){return!this.sourceURL}async setBlackboxedRanges(e){return!(await this.debuggerModel.target().debuggerAgent().invoke_setBlackboxedRanges({scriptId:this.scriptId,positions:e})).getError()}containsLocation(e,t){const r=e===this.lineOffset&&t>=this.columnOffset||e>this.lineOffset,n=e<this.endLine||e===this.endLine&&t<=this.endColumn;return r&&n}get frameId(){return"string"!=typeof this[$r]&&(this[$r]=function(e){const t=e.executionContext();if(t)return t.frameId||null;const r=e.debuggerModel.target().model(Kn);if(!r||!r.mainFrame)return null;return r.mainFrame.id}(this)),this[$r]}get isBreakpointCondition(){return[pn,gn].includes(this.sourceURL)}sourceMap(){return this.debuggerModel.sourceMapManager().sourceMapForClient(this)}createPageResourceLoadInitiator(){return{target:this.target(),frameId:this.frameId,initiatorUrl:this.embedderName()}}rawLocationToRelativeLocation(e){let{lineNumber:t,columnNumber:r}=e;return!this.hasSourceURL&&this.isInlineScript()&&(t-=this.lineOffset,0===t&&void 0!==r&&(r-=this.columnOffset)),{lineNumber:t,columnNumber:r}}relativeLocationToRawLocation(e){let{lineNumber:t,columnNumber:r}=e;return!this.hasSourceURL&&this.isInlineScript()&&(0===t&&void 0!==r&&(r+=this.columnOffset),t+=this.lineOffset),{lineNumber:t,columnNumber:r}}}const $r=Symbol("frameid");const Xr=/^[\x20\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/;var Jr=Object.freeze({__proto__:null,Script:Qr,sourceURLRegex:Xr});const Yr={local:"Local",closure:"Closure",block:"Block",script:"Script",withBlock:"`With` block",catchBlock:"`Catch` block",global:"Global",module:"Module",expression:"Expression",exception:"Exception",returnValue:"Return value"},Zr=n.i18n.registerUIStrings("core/sdk/DebuggerModel.ts",Yr),en=n.i18n.getLocalizedString.bind(void 0,Zr);function tn(e){function t(e,t){return e.lineNumber-t.lineNumber||e.columnNumber-t.columnNumber}function r(e,r){if(e.scriptId!==r.scriptId)return!1;const n=t(e.start,r.start);return n<0?t(e.end,r.start)>=0:!(n>0)||t(e.start,r.end)<=0}if(0===e.length)return[];e.sort(((e,r)=>e.scriptId<r.scriptId?-1:e.scriptId>r.scriptId?1:t(e.start,r.start)||t(e.end,r.end)));let n=e[0];const s=[];for(let i=1;i<e.length;++i){const o=e[i];r(n,o)?t(n.end,o.end)<=0&&(n={...n,end:o.end}):(s.push(n),n=o)}return s.push(n),s}class rn extends h{agent;runtimeModelInternal;#cn;#hn;#un;#gn;#pn;continueToLocationCallback;#mn;#fn;#bn;#yn;#vn;#kn;#In;evaluateOnCallFrameCallback;#wn;#Sn=new e.ObjectWrapper.ObjectWrapper;#Cn;#xn;constructor(t){super(t),t.registerDebuggerDispatcher(new an(this)),this.agent=t.debuggerAgent(),this.runtimeModelInternal=t.model(_r),this.#cn=new Sr(t),this.#hn=null,this.#un=new Map,this.#gn=new Map,this.#pn=[],this.continueToLocationCallback=null,this.#mn=null,this.#fn=!1,this.#bn=null,this.#yn=0,this.#vn=null,this.#kn=null,this.#In=null,this.evaluateOnCallFrameCallback=null,this.#wn=null,this.#Cn=null,this.#xn=!1,e.Settings.Settings.instance().moduleSetting("pause-on-exception-enabled").addChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("pause-on-caught-exception").addChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("pause-on-uncaught-exception").addChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("disable-async-stack-traces").addChangeListener(this.asyncStackTracesStateChanged,this),e.Settings.Settings.instance().moduleSetting("breakpoints-active").addChangeListener(this.breakpointsActiveChanged,this),t.suspended()||this.enableDebugger(),this.#cn.setEnabled(e.Settings.Settings.instance().moduleSetting("js-source-maps-enabled").get()),e.Settings.Settings.instance().moduleSetting("js-source-maps-enabled").addChangeListener((e=>this.#cn.setEnabled(e.data)));const r=t.model(Kn);r&&r.addEventListener(Wn.FrameNavigated,this.onFrameNavigated,this)}sourceMapManager(){return this.#cn}runtimeModel(){return this.runtimeModelInternal}debuggerEnabled(){return Boolean(this.#fn)}debuggerId(){return this.#bn}async enableDebugger(){if(this.#fn)return;this.#fn=!0;const t=o.Runtime.Runtime.queryParam("remoteFrontend")||o.Runtime.Runtime.queryParam("ws")?1e7:1e8,r=this.agent.invoke_enable({maxScriptsCacheSize:t});let n;o.Runtime.experiments.isEnabled("instrumentation-breakpoints")&&(n=this.agent.invoke_setInstrumentationBreakpoint({instrumentation:"beforeScriptExecution"})),this.pauseOnExceptionStateChanged(),this.asyncStackTracesStateChanged(),e.Settings.Settings.instance().moduleSetting("breakpoints-active").get()||this.breakpointsActiveChanged(),this.dispatchEventToListeners(on.DebuggerWasEnabled,this);const[s]=await Promise.all([r,n]);this.registerDebugger(s)}async syncDebuggerId(){const e=o.Runtime.Runtime.queryParam("remoteFrontend")||o.Runtime.Runtime.queryParam("ws")?1e7:1e8,t=this.agent.invoke_enable({maxScriptsCacheSize:e});return t.then(this.registerDebugger.bind(this)),t}onFrameNavigated(){rn.shouldResyncDebuggerId||(rn.shouldResyncDebuggerId=!0)}registerDebugger(e){if(e.getError())return void(this.#fn=!1);const{debuggerId:t}=e;nn.set(t,this),this.#bn=t,this.dispatchEventToListeners(on.DebuggerIsReadyToPause,this)}isReadyToPause(){return Boolean(this.#bn)}static async modelForDebuggerId(e){return rn.shouldResyncDebuggerId&&(await rn.resyncDebuggerIdForModels(),rn.shouldResyncDebuggerId=!1),nn.get(e)||null}static async resyncDebuggerIdForModels(){const e=nn.values();for(const t of e)t.debuggerEnabled()&&await t.syncDebuggerId()}async disableDebugger(){this.#fn&&(this.#fn=!1,await this.asyncStackTracesStateChanged(),await this.agent.invoke_disable(),this.#xn=!1,this.globalObjectCleared(),this.dispatchEventToListeners(on.DebuggerWasDisabled,this),"string"==typeof this.#bn&&nn.delete(this.#bn),this.#bn=null)}skipAllPauses(e){this.#yn&&(clearTimeout(this.#yn),this.#yn=0),this.agent.invoke_setSkipAllPauses({skip:e})}skipAllPausesUntilReloadOrTimeout(e){this.#yn&&clearTimeout(this.#yn),this.agent.invoke_setSkipAllPauses({skip:!0}),this.#yn=window.setTimeout(this.skipAllPauses.bind(this,!1),e)}pauseOnExceptionStateChanged(){const t=e.Settings.Settings.instance().moduleSetting("pause-on-caught-exception").get();let r;const n=e.Settings.Settings.instance().moduleSetting("pause-on-uncaught-exception").get();r=t&&n?"all":t?"caught":n?"uncaught":"none",this.agent.invoke_setPauseOnExceptions({state:r})}asyncStackTracesStateChanged(){const t=!e.Settings.Settings.instance().moduleSetting("disable-async-stack-traces").get()&&this.#fn?32:0;return this.agent.invoke_setAsyncCallStackDepth({maxDepth:t})}breakpointsActiveChanged(){this.agent.invoke_setBreakpointsActive({active:e.Settings.Settings.instance().moduleSetting("breakpoints-active").get()})}setComputeAutoStepRangesCallback(e){this.#kn=e}async computeAutoStepSkipList(e){let t=[];if(this.#kn&&this.#hn&&this.#hn.callFrames.length>0){const[r]=this.#hn.callFrames;t=await this.#kn.call(null,e,r)}return tn(t.map((({start:e,end:t})=>({scriptId:e.scriptId,start:{lineNumber:e.lineNumber,columnNumber:e.columnNumber},end:{lineNumber:t.lineNumber,columnNumber:t.columnNumber}}))))}async stepInto(){const e=await this.computeAutoStepSkipList("StepInto");this.agent.invoke_stepInto({breakOnAsyncCall:!1,skipList:e})}async stepOver(){this.#Cn=this.#hn?.callFrames[0]?.functionLocation()??null;const e=await this.computeAutoStepSkipList("StepOver");this.agent.invoke_stepOver({skipList:e})}async stepOut(){const e=await this.computeAutoStepSkipList("StepOut");0!==e.length?this.agent.invoke_stepOver({skipList:e}):this.agent.invoke_stepOut()}scheduleStepIntoAsync(){this.computeAutoStepSkipList("StepInto").then((e=>{this.agent.invoke_stepInto({breakOnAsyncCall:!0,skipList:e})}))}resume(){this.agent.invoke_resume({terminateOnResume:!1}),this.#xn=!1}pause(){this.#xn=!0,this.skipAllPauses(!1),this.agent.invoke_pause()}async setBreakpointByURL(t,r,n,i){let o;if(this.target().type()===B.Node&&e.ParsedURL.schemeIs(t,"file:")){const r=e.ParsedURL.ParsedURL.urlToRawPathString(t,a.Platform.isWin());o=`${s.StringUtilities.escapeForRegExp(r)}|${s.StringUtilities.escapeForRegExp(t)}`,a.Platform.isWin()&&r.match(/^.:\\/)&&(o=`[${r[0].toUpperCase()}${r[0].toLowerCase()}]`+o.substr(1))}let l=0;const d=this.#gn.get(t)||[];for(let e=0,t=d.length;e<t;++e){const t=d[e];r===t.lineOffset&&(l=l?Math.min(l,t.columnOffset):t.columnOffset)}n=Math.max(n||0,l);const c=await this.agent.invoke_setBreakpointByUrl({lineNumber:r,url:o?void 0:t,urlRegex:o,columnNumber:n,condition:i});if(c.getError())return{locations:[],breakpointId:null};let h=[];return c.locations&&(h=c.locations.map((e=>ln.fromPayload(this,e)))),{locations:h,breakpointId:c.breakpointId}}async setBreakpointInAnonymousScript(e,t,r,n){const s=await this.agent.invoke_setBreakpointByUrl({lineNumber:t,scriptHash:e,columnNumber:r,condition:n});if(s.getError())return{locations:[],breakpointId:null};let i=[];return s.locations&&(i=s.locations.map((e=>ln.fromPayload(this,e)))),{locations:i,breakpointId:s.breakpointId}}async removeBreakpoint(e){await this.agent.invoke_removeBreakpoint({breakpointId:e})}async getPossibleBreakpoints(e,t,r){const n=await this.agent.invoke_getPossibleBreakpoints({start:e.payload(),end:t?t.payload():void 0,restrictToFunction:r});return n.getError()||!n.locations?[]:n.locations.map((e=>dn.fromPayload(this,e)))}async fetchAsyncStackTrace(e){const t=await this.agent.invoke_getStackTrace({stackTraceId:e});return t.getError()?null:t.stackTrace}breakpointResolved(e,t){this.#Sn.dispatchEventToListeners(e,ln.fromPayload(this,t))}globalObjectCleared(){this.resetDebuggerPausedDetails(),this.reset(),this.dispatchEventToListeners(on.GlobalObjectCleared,this)}reset(){for(const e of this.#un.values())this.#cn.detachSourceMap(e);this.#un.clear(),this.#gn.clear(),this.#pn=[],this.#Cn=null}scripts(){return Array.from(this.#un.values())}scriptForId(e){return this.#un.get(e)||null}scriptsForSourceURL(e){return this.#gn.get(e)||[]}scriptsForExecutionContext(e){const t=[];for(const r of this.#un.values())r.executionContextId===e.id&&t.push(r);return t}get callFrames(){return this.#hn?this.#hn.callFrames:null}debuggerPausedDetails(){return this.#hn}async setDebuggerPausedDetails(e){return this.#xn=!1,this.#hn=e,!(this.#vn&&!await this.#vn.call(null,e,this.#Cn))&&(this.#Cn=null,this.dispatchEventToListeners(on.DebuggerPaused,this),this.setSelectedCallFrame(e.callFrames[0]),!0)}resetDebuggerPausedDetails(){this.#xn=!1,this.#hn=null,this.setSelectedCallFrame(null)}setBeforePausedCallback(e){this.#vn=e}setExpandCallFramesCallback(e){this.#In=e}setEvaluateOnCallFrameCallback(e){this.evaluateOnCallFrameCallback=e}setSynchronizeBreakpointsCallback(e){this.#wn=e}async pausedScript(t,r,n,s,i,o){if("instrumentation"===r){const e=this.scriptForId(n.scriptId);return this.#wn&&e&&await this.#wn(e),void this.resume()}const a=new un(this,t,r,n,s,i,o);if(await this.#Rn(a),this.continueToLocationCallback){const e=this.continueToLocationCallback;if(this.continueToLocationCallback=null,e(a))return}await this.setDebuggerPausedDetails(a)?e.EventTarget.fireEvent("DevTools.DebuggerPaused"):this.#Cn?this.stepOver():this.stepInto()}async#Rn(e){if(this.#In&&(e.callFrames=await this.#In.call(null,e.callFrames)),!o.Runtime.experiments.isEnabled("use-source-map-scopes"))return;const t=[];for(const r of e.callFrames){const e=await this.sourceMapManager().sourceMapForClientPromise(r.script);e?.hasScopeInfo()?t.push(...e.expandCallFrame(r)):t.push(r)}e.callFrames=t}resumedScript(){this.resetDebuggerPausedDetails(),this.dispatchEventToListeners(on.DebuggerResumed,this)}parsedScriptSource(e,t,r,n,s,i,o,a,l,d,c,h,u,g,p,m,f,b,y,v){const k=this.#un.get(e);if(k)return k;let I=!1;l&&"isDefault"in l&&(I=!l.isDefault);const w=new Qr(this,e,t,r,n,s,i,o,a,I,d,c,h,g,p,m,f,b,y,v);this.registerScript(w),this.dispatchEventToListeners(on.ParsedScriptSource,w),w.sourceMapURL&&!u&&this.#cn.attachSourceMap(w,w.sourceURL,w.sourceMapURL);return u&&w.isAnonymousScript()&&(this.#pn.push(w),this.collectDiscardedScripts()),w}setSourceMapURL(e,t){this.#cn.detachSourceMap(e),e.sourceMapURL=t,this.#cn.attachSourceMap(e,e.sourceURL,e.sourceMapURL)}async setDebugInfoURL(e,t){this.#In&&this.#hn&&(this.#hn.callFrames=await this.#In.call(null,this.#hn.callFrames)),this.dispatchEventToListeners(on.DebugInfoAttached,e)}executionContextDestroyed(e){for(const t of this.#un.values())t.executionContextId===e.id&&this.#cn.detachSourceMap(t)}registerScript(e){if(this.#un.set(e.scriptId,e),e.isAnonymousScript())return;let t=this.#gn.get(e.sourceURL);t||(t=[],this.#gn.set(e.sourceURL,t)),t.unshift(e)}unregisterScript(e){console.assert(e.isAnonymousScript()),this.#un.delete(e.scriptId)}collectDiscardedScripts(){if(this.#pn.length<1e3)return;const e=this.#pn.splice(0,100);for(const t of e)this.unregisterScript(t),this.dispatchEventToListeners(on.DiscardedAnonymousScriptSource,t)}createRawLocation(e,t,r,n){return this.createRawLocationByScriptId(e.scriptId,t,r,n)}createRawLocationByURL(e,t,r,n){for(const s of this.#gn.get(e)||[])if(!(s.lineOffset>t||s.lineOffset===t&&void 0!==r&&s.columnOffset>r||s.endLine<t||s.endLine===t&&void 0!==r&&s.endColumn<=r))return new ln(this,s.scriptId,t,r,n);return null}createRawLocationByScriptId(e,t,r,n){return new ln(this,e,t,r,n)}createRawLocationsByStackTrace(e){const t=[];for(let r=e;r;r=r.parent)for(const{scriptId:e,lineNumber:n,columnNumber:s}of r.callFrames)t.push(this.createRawLocationByScriptId(e,n,s));return t}isPaused(){return Boolean(this.debuggerPausedDetails())}isPausing(){return this.#xn}setSelectedCallFrame(e){this.#mn!==e&&(this.#mn=e,this.dispatchEventToListeners(on.CallFrameSelected,this))}selectedCallFrame(){return this.#mn}async evaluateOnSelectedCallFrame(e){const t=this.selectedCallFrame();if(!t)throw new Error("No call frame selected");return t.evaluate(e)}functionDetailsPromise(e){return e.getAllProperties(!1,!1).then(function(e){if(!e)return null;let t=null;if(e.internalProperties)for(const r of e.internalProperties)"[[FunctionLocation]]"===r.name&&(t=r.value);let r=null;if(e.properties)for(const t of e.properties)"name"===t.name&&t.value&&"string"===t.value.type&&(r=t.value);let n=null;t&&(n=this.createRawLocationByScriptId(t.value.scriptId,t.value.lineNumber,t.value.columnNumber));return{location:n,functionName:r?r.value:""}}.bind(this))}async setVariableValue(e,t,r,n){return(await this.agent.invoke_setVariableValue({scopeNumber:e,variableName:t,newValue:r,callFrameId:n})).getError()}addBreakpointListener(e,t,r){this.#Sn.addEventListener(e,t,r)}removeBreakpointListener(e,t,r){this.#Sn.removeEventListener(e,t,r)}async setBlackboxPatterns(e){return!(await this.agent.invoke_setBlackboxPatterns({patterns:e})).getError()}dispose(){this.#cn.dispose(),this.#bn&&nn.delete(this.#bn),e.Settings.Settings.instance().moduleSetting("pause-on-exception-enabled").removeChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("pause-on-caught-exception").removeChangeListener(this.pauseOnExceptionStateChanged,this),e.Settings.Settings.instance().moduleSetting("disable-async-stack-traces").removeChangeListener(this.asyncStackTracesStateChanged,this)}async suspendModel(){await this.disableDebugger()}async resumeModel(){await this.enableDebugger()}static shouldResyncDebuggerId=!1;getContinueToLocationCallback(){return this.continueToLocationCallback}getEvaluateOnCallFrameCallback(){return this.evaluateOnCallFrameCallback}}const nn=new Map;var sn,on;!function(e){e.DontPauseOnExceptions="none",e.PauseOnAllExceptions="all",e.PauseOnCaughtExceptions="caught",e.PauseOnUncaughtExceptions="uncaught"}(sn||(sn={})),function(e){e.DebuggerWasEnabled="DebuggerWasEnabled",e.DebuggerWasDisabled="DebuggerWasDisabled",e.DebuggerPaused="DebuggerPaused",e.DebuggerResumed="DebuggerResumed",e.DebugInfoAttached="DebugInfoAttached",e.ParsedScriptSource="ParsedScriptSource",e.DiscardedAnonymousScriptSource="DiscardedAnonymousScriptSource",e.GlobalObjectCleared="GlobalObjectCleared",e.CallFrameSelected="CallFrameSelected",e.DebuggerIsReadyToPause="DebuggerIsReadyToPause",e.ScriptSourceWasEdited="ScriptSourceWasEdited"}(on||(on={}));class an{#Tn;constructor(e){this.#Tn=e}paused({callFrames:e,reason:t,data:r,hitBreakpoints:n,asyncStackTrace:s,asyncStackTraceId:i}){this.#Tn.debuggerEnabled()&&this.#Tn.pausedScript(e,t,r,n||[],s,i)}resumed(){this.#Tn.debuggerEnabled()&&this.#Tn.resumedScript()}scriptParsed({scriptId:e,url:t,startLine:r,startColumn:n,endLine:s,endColumn:i,executionContextId:o,hash:a,executionContextAuxData:l,isLiveEdit:d,sourceMapURL:c,hasSourceURL:h,length:u,isModule:g,stackTrace:p,codeOffset:m,scriptLanguage:f,debugSymbols:b,embedderName:y}){this.#Tn.debuggerEnabled()&&this.#Tn.parsedScriptSource(e,t,r,n,s,i,o,a,l,Boolean(d),c,Boolean(h),!1,u||0,g||null,p||null,m||null,f||null,b||null,y||null)}scriptFailedToParse({scriptId:e,url:t,startLine:r,startColumn:n,endLine:s,endColumn:i,executionContextId:o,hash:a,executionContextAuxData:l,sourceMapURL:d,hasSourceURL:c,length:h,isModule:u,stackTrace:g,codeOffset:p,scriptLanguage:m,embedderName:f}){this.#Tn.debuggerEnabled()&&this.#Tn.parsedScriptSource(e,t,r,n,s,i,o,a,l,!1,d,Boolean(c),!0,h||0,u||null,g||null,p||null,m||null,null,f||null)}breakpointResolved({breakpointId:e,location:t}){this.#Tn.debuggerEnabled()&&this.#Tn.breakpointResolved(e,t)}}class ln{debuggerModel;scriptId;lineNumber;columnNumber;inlineFrameIndex;constructor(e,t,r,n,s){this.debuggerModel=e,this.scriptId=t,this.lineNumber=r,this.columnNumber=n||0,this.inlineFrameIndex=s||0}static fromPayload(e,t,r){return new ln(e,t.scriptId,t.lineNumber,t.columnNumber,r)}payload(){return{scriptId:this.scriptId,lineNumber:this.lineNumber,columnNumber:this.columnNumber}}script(){return this.debuggerModel.scriptForId(this.scriptId)}continueToLocation(e){e&&(this.debuggerModel.continueToLocationCallback=this.paused.bind(this,e)),this.debuggerModel.agent.invoke_continueToLocation({location:this.payload(),targetCallFrames:"current"})}paused(e,t){const r=t.callFrames[0].location();return r.scriptId===this.scriptId&&r.lineNumber===this.lineNumber&&r.columnNumber===this.columnNumber&&(e(),!0)}id(){return this.debuggerModel.target().id()+":"+this.scriptId+":"+this.lineNumber+":"+this.columnNumber}}class dn extends ln{type;constructor(e,t,r,n,s){super(e,t,r,n),s&&(this.type=s)}static fromPayload(e,t){return new dn(e,t.scriptId,t.lineNumber,t.columnNumber,t.type)}}class cn{debuggerModel;script;payload;#Mn;#Pn;#Ln;inlineFrameIndex;functionName;#En;#An;missingDebugInfoDetails;exception;canBeRestarted;constructor(e,t,r,n,s,i=null){this.debuggerModel=e,this.script=t,this.payload=r,this.#Mn=ln.fromPayload(e,r.location,n),this.#Pn=[],this.#Ln=null,this.inlineFrameIndex=n||0,this.functionName=s||r.functionName,this.missingDebugInfoDetails=null,this.canBeRestarted=Boolean(r.canBeRestarted),this.exception=i;for(let e=0;e<r.scopeChain.length;++e){const t=new hn(this,e);this.#Pn.push(t),"local"===t.type()&&(this.#Ln=t)}r.functionLocation&&(this.#En=ln.fromPayload(e,r.functionLocation)),this.#An=r.returnValue?this.debuggerModel.runtimeModel().createRemoteObject(r.returnValue):null}static fromPayloadArray(e,t,r){const n=[];for(let s=0;s<t.length;++s){const i=t[s],o=e.scriptForId(i.location.scriptId);if(o){const t=0===s?r:null;n.push(new cn(e,o,i,void 0,void 0,t))}}return n}createVirtualCallFrame(e,t){return new cn(this.debuggerModel,this.script,this.payload,e,t)}get id(){return this.payload.callFrameId}scopeChain(){return this.#Pn}localScope(){return this.#Ln}thisObject(){return this.payload.this?this.debuggerModel.runtimeModel().createRemoteObject(this.payload.this):null}returnValue(){return this.#An}async setReturnValue(e){if(!this.#An)return null;const t=await this.debuggerModel.agent.invoke_evaluateOnCallFrame({callFrameId:this.id,expression:e,silent:!0,objectGroup:"backtrace"});if(t.getError()||t.exceptionDetails)return null;return(await this.debuggerModel.agent.invoke_setReturnValue({newValue:t.result})).getError()?null:(this.#An=this.debuggerModel.runtimeModel().createRemoteObject(t.result),this.#An)}location(){return this.#Mn}functionLocation(){return this.#En||null}async evaluate(e){const t=this.debuggerModel,r=t.runtimeModel(),n=t.getEvaluateOnCallFrameCallback();if(n){const t=await n(this,e);if(t)return t}const s=await this.debuggerModel.agent.invoke_evaluateOnCallFrame({callFrameId:this.id,expression:e.expression,objectGroup:e.objectGroup,includeCommandLineAPI:e.includeCommandLineAPI,silent:e.silent,returnByValue:e.returnByValue,generatePreview:e.generatePreview,throwOnSideEffect:e.throwOnSideEffect,timeout:e.timeout}),i=s.getError();return i?{error:i}:{object:r.createRemoteObject(s.result),exceptionDetails:s.exceptionDetails}}async restart(){console.assert(this.canBeRestarted,"This frame can not be restarted."),await this.debuggerModel.agent.invoke_restartFrame({callFrameId:this.id,mode:"StepInto"})}getPayload(){return this.payload}}class hn{#On;#Dn;#g;#h;#Nn;#Fn;#Zt;constructor(e,t){this.#On=e,this.#Dn=e.getPayload().scopeChain[t],this.#g=this.#Dn.type,this.#h=this.#Dn.name,this.#Nn=t,this.#Zt=null;const r=this.#Dn.startLocation?ln.fromPayload(e.debuggerModel,this.#Dn.startLocation):null,n=this.#Dn.endLocation?ln.fromPayload(e.debuggerModel,this.#Dn.endLocation):null;r&&n&&r.scriptId===n.scriptId?this.#Fn={start:r,end:n}:this.#Fn=null}callFrame(){return this.#On}type(){return this.#g}typeName(){switch(this.#g){case"local":return en(Yr.local);case"closure":return en(Yr.closure);case"catch":return en(Yr.catchBlock);case"eval":return n.i18n.lockedString("Eval");case"block":return en(Yr.block);case"script":return en(Yr.script);case"with":return en(Yr.withBlock);case"global":return en(Yr.global);case"module":return en(Yr.module);case"wasm-expression-stack":return en(Yr.expression)}return""}name(){return this.#h}range(){return this.#Fn}object(){if(this.#Zt)return this.#Zt;const e=this.#On.debuggerModel.runtimeModel(),t="with"!==this.#g&&"global"!==this.#g;return this.#Zt=t?e.createScopeRemoteObject(this.#Dn.object,new Ut(this.#Nn,this.#On.id)):e.createRemoteObject(this.#Dn.object),this.#Zt}description(){return"with"!==this.#g&&"global"!==this.#g?"":this.#Dn.object.description||""}icon(){}extraProperties(){if(0!==this.#Nn||"local"!==this.#g||this.#On.script.isWasm())return[];const e=[],t=this.#On.exception;t&&e.push(new _t(en(Yr.exception),t,void 0,void 0,void 0,void 0,void 0,!0));const r=this.#On.returnValue();return r&&e.push(new _t(en(Yr.returnValue),r,void 0,void 0,void 0,void 0,void 0,!0,this.#On.setReturnValue.bind(this.#On))),e}}class un{debuggerModel;callFrames;reason;auxData;breakpointIds;asyncStackTrace;asyncStackTraceId;constructor(e,t,r,n,s,i,o){this.debuggerModel=e,this.reason=r,this.auxData=n,this.breakpointIds=s,i&&(this.asyncStackTrace=this.cleanRedundantFrames(i)),this.asyncStackTraceId=o,this.callFrames=cn.fromPayloadArray(e,t,this.exception())}exception(){return"exception"!==this.reason&&"promiseRejection"!==this.reason?null:this.debuggerModel.runtimeModel().createRemoteObject(this.auxData)}cleanRedundantFrames(e){let t=e,r=null;for(;t;)r&&!t.callFrames.length?r.parent=t.parent:r=t,t=t.parent;return e}}h.register(rn,{capabilities:4,autostart:!0});const gn="debugger://logpoint",pn="debugger://breakpoint";var mn=Object.freeze({__proto__:null,sortAndMergeRanges:tn,DebuggerModel:rn,get PauseOnExceptionsState(){return sn},get Events(){return on},Location:ln,BreakLocation:dn,CallFrame:cn,Scope:hn,DebuggerPausedDetails:un,LOGPOINT_SOURCE_URL:gn,COND_BREAKPOINT_SOURCE_URL:pn});class fn{#Bn;#Hn;constructor(){const t="rgba";this.#Bn=[new e.Color.Legacy([.9607843137254902,.592156862745098,.5803921568627451,1],t),new e.Color.Legacy([.9411764705882353,.7490196078431373,.2980392156862745,1],t),new e.Color.Legacy([.8313725490196079,.9294117647058824,.19215686274509805,1],t),new e.Color.Legacy([.6196078431372549,.9215686274509803,.2784313725490196,1],t),new e.Color.Legacy([.3568627450980392,.8196078431372549,.8431372549019608,1],t),new e.Color.Legacy([.7372549019607844,.807843137254902,.984313725490196,1],t),new e.Color.Legacy([.7764705882352941,.7450980392156863,.9333333333333333,1],t),new e.Color.Legacy([.8156862745098039,.5803921568627451,.9176470588235294,1],t),new e.Color.Legacy([.9215686274509803,.5803921568627451,.8117647058823529,1],t)],this.#Hn=0}next(){const e=this.#Bn[this.#Hn];return this.#Hn++,this.#Hn>=this.#Bn.length&&(this.#Hn=0),e}}var bn=Object.freeze({__proto__:null,OverlayColorGenerator:fn});class yn{#Un;#Bn;#_n;#qn;#zn;#jn;#Vn;#Wn;#Gn;#Kn;#Qn;#$n;#Xn;#Jn;#Yn;constructor(t,r){this.#Un=t,this.#Yn=r,this.#_n=e.Settings.Settings.instance().createLocalSetting("persistent-highlight-setting",[]),this.#qn=new Map,this.#zn=new Map,this.#jn=new Map,this.#Vn=new Map,this.#Wn=new Map,this.#Bn=new Map,this.#Gn=new fn,this.#Kn=new fn,this.#Qn=e.Settings.Settings.instance().moduleSetting("show-grid-line-labels"),this.#Qn.addChangeListener(this.onSettingChange,this),this.#$n=e.Settings.Settings.instance().moduleSetting("extend-grid-lines"),this.#$n.addChangeListener(this.onSettingChange,this),this.#Xn=e.Settings.Settings.instance().moduleSetting("show-grid-areas"),this.#Xn.addChangeListener(this.onSettingChange,this),this.#Jn=e.Settings.Settings.instance().moduleSetting("show-grid-track-sizes"),this.#Jn.addChangeListener(this.onSettingChange,this)}onSettingChange(){this.resetOverlay()}buildGridHighlightConfig(e){const t=this.colorOfGrid(e).asLegacyColor(),r=t.setAlpha(.1).asLegacyColor(),n=t.setAlpha(.3).asLegacyColor(),s=t.setAlpha(.8).asLegacyColor(),i=this.#$n.get(),o="lineNumbers"===this.#Qn.get(),a=o,l="lineNames"===this.#Qn.get();return{rowGapColor:n.toProtocolRGBA(),rowHatchColor:s.toProtocolRGBA(),columnGapColor:n.toProtocolRGBA(),columnHatchColor:s.toProtocolRGBA(),gridBorderColor:t.toProtocolRGBA(),gridBorderDash:!1,rowLineColor:t.toProtocolRGBA(),columnLineColor:t.toProtocolRGBA(),rowLineDash:!0,columnLineDash:!0,showGridExtensionLines:i,showPositiveLineNumbers:o,showNegativeLineNumbers:a,showLineNames:l,showAreaNames:this.#Xn.get(),showTrackSizes:this.#Jn.get(),areaBorderColor:t.toProtocolRGBA(),gridBackgroundColor:r.toProtocolRGBA()}}buildFlexContainerHighlightConfig(e){const t=this.colorOfFlex(e).asLegacyColor();return{containerBorder:{color:t.toProtocolRGBA(),pattern:"dashed"},itemSeparator:{color:t.toProtocolRGBA(),pattern:"dotted"},lineSeparator:{color:t.toProtocolRGBA(),pattern:"dashed"},mainDistributedSpace:{hatchColor:t.toProtocolRGBA()},crossDistributedSpace:{hatchColor:t.toProtocolRGBA()}}}buildScrollSnapContainerHighlightConfig(t){return{snapAreaBorder:{color:e.Color.PageHighlight.GridBorder.toProtocolRGBA(),pattern:"dashed"},snapportBorder:{color:e.Color.PageHighlight.GridBorder.toProtocolRGBA()},scrollMarginColor:e.Color.PageHighlight.Margin.toProtocolRGBA(),scrollPaddingColor:e.Color.PageHighlight.Padding.toProtocolRGBA()}}highlightGridInOverlay(e){this.#qn.set(e,this.buildGridHighlightConfig(e)),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#Yn.onGridOverlayStateChanged({nodeId:e,enabled:!0})}isGridHighlighted(e){return this.#qn.has(e)}colorOfGrid(e){let t=this.#Bn.get(e);return t||(t=this.#Gn.next(),this.#Bn.set(e,t)),t}setColorOfGrid(e,t){this.#Bn.set(e,t)}hideGridInOverlay(e){this.#qn.has(e)&&(this.#qn.delete(e),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#Yn.onGridOverlayStateChanged({nodeId:e,enabled:!1}))}highlightScrollSnapInOverlay(e){this.#zn.set(e,this.buildScrollSnapContainerHighlightConfig(e)),this.updateHighlightsInOverlay(),this.#Yn.onScrollSnapOverlayStateChanged({nodeId:e,enabled:!0}),this.savePersistentHighlightSetting()}isScrollSnapHighlighted(e){return this.#zn.has(e)}hideScrollSnapInOverlay(e){this.#zn.has(e)&&(this.#zn.delete(e),this.updateHighlightsInOverlay(),this.#Yn.onScrollSnapOverlayStateChanged({nodeId:e,enabled:!1}),this.savePersistentHighlightSetting())}highlightFlexInOverlay(e){this.#jn.set(e,this.buildFlexContainerHighlightConfig(e)),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#Yn.onFlexOverlayStateChanged({nodeId:e,enabled:!0})}isFlexHighlighted(e){return this.#jn.has(e)}colorOfFlex(e){let t=this.#Bn.get(e);return t||(t=this.#Kn.next(),this.#Bn.set(e,t)),t}setColorOfFlex(e,t){this.#Bn.set(e,t)}hideFlexInOverlay(e){this.#jn.has(e)&&(this.#jn.delete(e),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#Yn.onFlexOverlayStateChanged({nodeId:e,enabled:!1}))}highlightContainerQueryInOverlay(e){this.#Vn.set(e,this.buildContainerQueryContainerHighlightConfig()),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#Yn.onContainerQueryOverlayStateChanged({nodeId:e,enabled:!0})}hideContainerQueryInOverlay(e){this.#Vn.has(e)&&(this.#Vn.delete(e),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting(),this.#Yn.onContainerQueryOverlayStateChanged({nodeId:e,enabled:!1}))}isContainerQueryHighlighted(e){return this.#Vn.has(e)}buildContainerQueryContainerHighlightConfig(){return{containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},descendantBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"}}}highlightIsolatedElementInOverlay(e){this.#Wn.set(e,this.buildIsolationModeHighlightConfig()),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting()}hideIsolatedElementInOverlay(e){this.#Wn.has(e)&&(this.#Wn.delete(e),this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting())}isIsolatedElementHighlighted(e){return this.#Wn.has(e)}buildIsolationModeHighlightConfig(){return{resizerColor:e.Color.IsolationModeHighlight.Resizer.toProtocolRGBA(),resizerHandleColor:e.Color.IsolationModeHighlight.ResizerHandle.toProtocolRGBA(),maskColor:e.Color.IsolationModeHighlight.Mask.toProtocolRGBA()}}hideAllInOverlayWithoutSave(){this.#jn.clear(),this.#qn.clear(),this.#zn.clear(),this.#Vn.clear(),this.#Wn.clear(),this.updateHighlightsInOverlay()}refreshHighlights(){const e=this.updateHighlightsForDeletedNodes(this.#qn),t=this.updateHighlightsForDeletedNodes(this.#jn),r=this.updateHighlightsForDeletedNodes(this.#zn),n=this.updateHighlightsForDeletedNodes(this.#Vn),s=this.updateHighlightsForDeletedNodes(this.#Wn);(t||e||r||n||s)&&(this.updateHighlightsInOverlay(),this.savePersistentHighlightSetting())}updateHighlightsForDeletedNodes(e){let t=!1;for(const r of e.keys())null===this.#Un.getDOMModel().nodeForId(r)&&(e.delete(r),t=!0);return t}resetOverlay(){for(const e of this.#qn.keys())this.#qn.set(e,this.buildGridHighlightConfig(e));for(const e of this.#jn.keys())this.#jn.set(e,this.buildFlexContainerHighlightConfig(e));for(const e of this.#zn.keys())this.#zn.set(e,this.buildScrollSnapContainerHighlightConfig(e));for(const e of this.#Vn.keys())this.#Vn.set(e,this.buildContainerQueryContainerHighlightConfig());for(const e of this.#Wn.keys())this.#Wn.set(e,this.buildIsolationModeHighlightConfig());this.updateHighlightsInOverlay()}updateHighlightsInOverlay(){const e=this.#qn.size>0||this.#jn.size>0||this.#Vn.size>0||this.#Wn.size>0;this.#Un.setShowViewportSizeOnResize(!e),this.updateGridHighlightsInOverlay(),this.updateFlexHighlightsInOverlay(),this.updateScrollSnapHighlightsInOverlay(),this.updateContainerQueryHighlightsInOverlay(),this.updateIsolatedElementHighlightsInOverlay()}updateGridHighlightsInOverlay(){const e=this.#Un,t=[];for(const[e,r]of this.#qn.entries())t.push({nodeId:e,gridHighlightConfig:r});e.target().overlayAgent().invoke_setShowGridOverlays({gridNodeHighlightConfigs:t})}updateFlexHighlightsInOverlay(){const e=this.#Un,t=[];for(const[e,r]of this.#jn.entries())t.push({nodeId:e,flexContainerHighlightConfig:r});e.target().overlayAgent().invoke_setShowFlexOverlays({flexNodeHighlightConfigs:t})}updateScrollSnapHighlightsInOverlay(){const e=this.#Un,t=[];for(const[e,r]of this.#zn.entries())t.push({nodeId:e,scrollSnapContainerHighlightConfig:r});e.target().overlayAgent().invoke_setShowScrollSnapOverlays({scrollSnapHighlightConfigs:t})}updateContainerQueryHighlightsInOverlay(){const e=this.#Un,t=[];for(const[e,r]of this.#Vn.entries())t.push({nodeId:e,containerQueryContainerHighlightConfig:r});e.target().overlayAgent().invoke_setShowContainerQueryOverlays({containerQueryHighlightConfigs:t})}updateIsolatedElementHighlightsInOverlay(){const e=this.#Un,t=[];for(const[e,r]of this.#Wn.entries())t.push({nodeId:e,isolationModeHighlightConfig:r});e.target().overlayAgent().invoke_setShowIsolatedElements({isolatedElementHighlightConfigs:t})}async restoreHighlightsForDocument(){this.#jn=new Map,this.#qn=new Map,this.#zn=new Map,this.#Vn=new Map,this.#Wn=new Map;const e=await this.#Un.getDOMModel().requestDocument(),t=e?e.documentURL:s.DevToolsPath.EmptyUrlString;await Promise.all(this.#_n.get().map((async e=>{if(e.url===t)return this.#Un.getDOMModel().pushNodeByPathToFrontend(e.path).then((t=>{const r=this.#Un.getDOMModel().nodeForId(t);if(r)switch(e.type){case"GRID":this.#qn.set(r.id,this.buildGridHighlightConfig(r.id)),this.#Yn.onGridOverlayStateChanged({nodeId:r.id,enabled:!0});break;case"FLEX":this.#jn.set(r.id,this.buildFlexContainerHighlightConfig(r.id)),this.#Yn.onFlexOverlayStateChanged({nodeId:r.id,enabled:!0});break;case"CONTAINER_QUERY":this.#Vn.set(r.id,this.buildContainerQueryContainerHighlightConfig()),this.#Yn.onContainerQueryOverlayStateChanged({nodeId:r.id,enabled:!0});break;case"SCROLL_SNAP":this.#zn.set(r.id,this.buildScrollSnapContainerHighlightConfig(r.id)),this.#Yn.onScrollSnapOverlayStateChanged({nodeId:r.id,enabled:!0});break;case"ISOLATED_ELEMENT":this.#Wn.set(r.id,this.buildIsolationModeHighlightConfig())}}))}))),this.updateHighlightsInOverlay()}currentUrl(){const e=this.#Un.getDOMModel().existingDocument();return e?e.documentURL:s.DevToolsPath.EmptyUrlString}getPersistentHighlightSettingForOneType(e,t){const r=[];for(const n of e.keys()){const e=this.#Un.getDOMModel().nodeForId(n);e&&r.push({url:this.currentUrl(),path:e.path(),type:t})}return r}savePersistentHighlightSetting(){const e=this.currentUrl(),t=[...this.#_n.get().filter((t=>t.url!==e)),...this.getPersistentHighlightSettingForOneType(this.#qn,"GRID"),...this.getPersistentHighlightSettingForOneType(this.#jn,"FLEX"),...this.getPersistentHighlightSettingForOneType(this.#Vn,"CONTAINER_QUERY"),...this.getPersistentHighlightSettingForOneType(this.#zn,"SCROLL_SNAP"),...this.getPersistentHighlightSettingForOneType(this.#Wn,"ISOLATED_ELEMENT")];this.#_n.set(t)}}var vn=Object.freeze({__proto__:null,OverlayPersistentHighlighter:yn});const kn={pausedInDebugger:"Paused in debugger"},In=n.i18n.registerUIStrings("core/sdk/OverlayModel.ts",kn),wn=n.i18n.getLocalizedString.bind(void 0,In),Sn={mac:{x:85,y:0,width:185,height:40},linux:{x:0,y:0,width:196,height:34},windows:{x:0,y:0,width:238,height:33}};class Cn extends h{#Er;overlayAgent;#Tn;#Zn;#es;#ts;#rs;#ns;#ss;#is;#os;#as;#ls;#ds;#cs;#hs;#us;#gs;#ps;#ms;constructor(t){super(t),this.#Er=t.model(Dn),t.registerOverlayDispatcher(this),this.overlayAgent=t.overlayAgent(),this.#Tn=t.model(rn),this.#Tn&&(e.Settings.Settings.instance().moduleSetting("disable-paused-state-overlay").addChangeListener(this.updatePausedInDebuggerMessage,this),this.#Tn.addEventListener(on.DebuggerPaused,this.updatePausedInDebuggerMessage,this),this.#Tn.addEventListener(on.DebuggerResumed,this.updatePausedInDebuggerMessage,this),this.#Tn.addEventListener(on.GlobalObjectCleared,this.updatePausedInDebuggerMessage,this)),this.#Zn=!1,this.#es=null,this.#ts=new Rn(this),this.#rs=this.#ts,this.#ns=e.Settings.Settings.instance().moduleSetting("show-paint-rects"),this.#ss=e.Settings.Settings.instance().moduleSetting("show-layout-shift-regions"),this.#is=e.Settings.Settings.instance().moduleSetting("show-ad-highlights"),this.#os=e.Settings.Settings.instance().moduleSetting("show-debug-borders"),this.#as=e.Settings.Settings.instance().moduleSetting("show-fps-counter"),this.#ls=e.Settings.Settings.instance().moduleSetting("show-scroll-bottleneck-rects"),this.#ds=e.Settings.Settings.instance().moduleSetting("show-web-vitals"),this.#cs=[],this.#hs=!0,t.suspended()||(this.overlayAgent.invoke_enable(),this.wireAgentToSettings()),this.#us=new yn(this,{onGridOverlayStateChanged:({nodeId:e,enabled:t})=>this.dispatchEventToListeners("PersistentGridOverlayStateChanged",{nodeId:e,enabled:t}),onFlexOverlayStateChanged:({nodeId:e,enabled:t})=>this.dispatchEventToListeners("PersistentFlexContainerOverlayStateChanged",{nodeId:e,enabled:t}),onContainerQueryOverlayStateChanged:({nodeId:e,enabled:t})=>this.dispatchEventToListeners("PersistentContainerQueryOverlayStateChanged",{nodeId:e,enabled:t}),onScrollSnapOverlayStateChanged:({nodeId:e,enabled:t})=>this.dispatchEventToListeners("PersistentScrollSnapOverlayStateChanged",{nodeId:e,enabled:t})}),this.#Er.addEventListener(Mn.NodeRemoved,(()=>{this.#us&&this.#us.refreshHighlights()})),this.#Er.addEventListener(Mn.DocumentUpdated,(()=>{this.#us&&(this.#us.hideAllInOverlayWithoutSave(),t.suspended()||this.#us.restoreHighlightsForDocument())})),this.#gs=new Tn(this),this.#ps=!1,this.#ms=new xn(this.#Er.cssModel())}static highlightObjectAsDOMNode(e){const t=e.runtimeModel().target().model(Dn);t&&t.overlayModel().highlightInOverlay({object:e,selectorList:void 0})}static hideDOMNodeHighlight(){for(const e of z.instance().models(Cn))e.delayedHideHighlight(0)}static async muteHighlight(){return Promise.all(z.instance().models(Cn).map((e=>e.suspendModel())))}static async unmuteHighlight(){return Promise.all(z.instance().models(Cn).map((e=>e.resumeModel())))}static highlightRect(e){for(const t of z.instance().models(Cn))t.highlightRect(e)}static clearHighlight(){for(const e of z.instance().models(Cn))e.clearHighlight()}getDOMModel(){return this.#Er}highlightRect({x:e,y:t,width:r,height:n,color:s,outlineColor:i}){const o=s||{r:255,g:0,b:255,a:.3},a=i||{r:255,g:0,b:255,a:.5};return this.overlayAgent.invoke_highlightRect({x:e,y:t,width:r,height:n,color:o,outlineColor:a})}clearHighlight(){return this.overlayAgent.invoke_hideHighlight()}async wireAgentToSettings(){this.#cs=[this.#ns.addChangeListener((()=>this.overlayAgent.invoke_setShowPaintRects({result:this.#ns.get()}))),this.#ss.addChangeListener((()=>this.overlayAgent.invoke_setShowLayoutShiftRegions({result:this.#ss.get()}))),this.#is.addChangeListener((()=>this.overlayAgent.invoke_setShowAdHighlights({show:this.#is.get()}))),this.#os.addChangeListener((()=>this.overlayAgent.invoke_setShowDebugBorders({show:this.#os.get()}))),this.#as.addChangeListener((()=>this.overlayAgent.invoke_setShowFPSCounter({show:this.#as.get()}))),this.#ls.addChangeListener((()=>this.overlayAgent.invoke_setShowScrollBottleneckRects({show:this.#ls.get()}))),this.#ds.addChangeListener((()=>this.overlayAgent.invoke_setShowWebVitals({show:this.#ds.get()})))],this.#ns.get()&&this.overlayAgent.invoke_setShowPaintRects({result:!0}),this.#ss.get()&&this.overlayAgent.invoke_setShowLayoutShiftRegions({result:!0}),this.#is.get()&&this.overlayAgent.invoke_setShowAdHighlights({show:!0}),this.#os.get()&&this.overlayAgent.invoke_setShowDebugBorders({show:!0}),this.#as.get()&&this.overlayAgent.invoke_setShowFPSCounter({show:!0}),this.#ls.get()&&this.overlayAgent.invoke_setShowScrollBottleneckRects({show:!0}),this.#ds.get()&&this.overlayAgent.invoke_setShowWebVitals({show:!0}),this.#Tn&&this.#Tn.isPaused()&&this.updatePausedInDebuggerMessage(),await this.overlayAgent.invoke_setShowViewportSizeOnResize({show:this.#hs}),this.#us?.resetOverlay()}async suspendModel(){e.EventTarget.removeEventListeners(this.#cs),await this.overlayAgent.invoke_disable()}async resumeModel(){await Promise.all([this.overlayAgent.invoke_enable(),this.wireAgentToSettings()])}setShowViewportSizeOnResize(e){this.#hs!==e&&(this.#hs=e,this.target().suspended()||this.overlayAgent.invoke_setShowViewportSizeOnResize({show:e}))}updatePausedInDebuggerMessage(){if(this.target().suspended())return;const t=this.#Tn&&this.#Tn.isPaused()&&!e.Settings.Settings.instance().moduleSetting("disable-paused-state-overlay").get()?wn(kn.pausedInDebugger):void 0;this.overlayAgent.invoke_setPausedInDebuggerMessage({message:t})}setHighlighter(e){this.#rs=e||this.#ts}async setInspectMode(e,t=!0){await this.#Er.requestDocument(),this.#Zn="none"!==e,this.dispatchEventToListeners("InspectModeWillBeToggled",this),this.#rs.setInspectMode(e,this.buildHighlightConfig("all",t))}inspectModeEnabled(){return this.#Zn}highlightInOverlay(e,t,r){if(this.#ps)return;this.#es&&(clearTimeout(this.#es),this.#es=null);const n=this.buildHighlightConfig(t);void 0!==r&&(n.showInfo=r),this.#rs.highlightInOverlay(e,n)}highlightInOverlayForTwoSeconds(e){this.highlightInOverlay(e),this.delayedHideHighlight(2e3)}highlightGridInPersistentOverlay(e){this.#us&&this.#us.highlightGridInOverlay(e)}isHighlightedGridInPersistentOverlay(e){return!!this.#us&&this.#us.isGridHighlighted(e)}hideGridInPersistentOverlay(e){this.#us&&this.#us.hideGridInOverlay(e)}highlightScrollSnapInPersistentOverlay(e){this.#us&&this.#us.highlightScrollSnapInOverlay(e)}isHighlightedScrollSnapInPersistentOverlay(e){return!!this.#us&&this.#us.isScrollSnapHighlighted(e)}hideScrollSnapInPersistentOverlay(e){this.#us&&this.#us.hideScrollSnapInOverlay(e)}highlightFlexContainerInPersistentOverlay(e){this.#us&&this.#us.highlightFlexInOverlay(e)}isHighlightedFlexContainerInPersistentOverlay(e){return!!this.#us&&this.#us.isFlexHighlighted(e)}hideFlexContainerInPersistentOverlay(e){this.#us&&this.#us.hideFlexInOverlay(e)}highlightContainerQueryInPersistentOverlay(e){this.#us&&this.#us.highlightContainerQueryInOverlay(e)}isHighlightedContainerQueryInPersistentOverlay(e){return!!this.#us&&this.#us.isContainerQueryHighlighted(e)}hideContainerQueryInPersistentOverlay(e){this.#us&&this.#us.hideContainerQueryInOverlay(e)}highlightSourceOrderInOverlay(t){const r={parentOutlineColor:e.Color.SourceOrderHighlight.ParentOutline.toProtocolRGBA(),childOutlineColor:e.Color.SourceOrderHighlight.ChildOutline.toProtocolRGBA()};this.#gs.highlightSourceOrderInOverlay(t,r)}colorOfGridInPersistentOverlay(e){return this.#us?this.#us.colorOfGrid(e).asString("hex"):null}setColorOfGridInPersistentOverlay(t,r){if(!this.#us)return;const n=e.Color.parse(r);n&&(this.#us.setColorOfGrid(t,n),this.#us.resetOverlay())}colorOfFlexInPersistentOverlay(e){return this.#us?this.#us.colorOfFlex(e).asString("hex"):null}setColorOfFlexInPersistentOverlay(t,r){if(!this.#us)return;const n=e.Color.parse(r);n&&(this.#us.setColorOfFlex(t,n),this.#us.resetOverlay())}hideSourceOrderInOverlay(){this.#gs.hideSourceOrderHighlight()}setSourceOrderActive(e){this.#ps=e}sourceOrderModeActive(){return this.#ps}highlightIsolatedElementInPersistentOverlay(e){this.#us&&this.#us.highlightIsolatedElementInOverlay(e)}hideIsolatedElementInPersistentOverlay(e){this.#us&&this.#us.hideIsolatedElementInOverlay(e)}isHighlightedIsolatedElementInPersistentOverlay(e){return!!this.#us&&this.#us.isIsolatedElementHighlighted(e)}delayedHideHighlight(e){null===this.#es&&(this.#es=window.setTimeout((()=>this.highlightInOverlay({clear:!0})),e))}highlightFrame(e){this.#es&&(clearTimeout(this.#es),this.#es=null),this.#rs.highlightFrame(e)}showHingeForDualScreen(e){if(e){const{x:t,y:r,width:n,height:s,contentColor:i,outlineColor:o}=e;this.overlayAgent.invoke_setShowHinge({hingeConfig:{rect:{x:t,y:r,width:n,height:s},contentColor:i,outlineColor:o}})}else this.overlayAgent.invoke_setShowHinge({})}setWindowControlsPlatform(e){this.#ms.selectedPlatform=e}setWindowControlsThemeColor(e){this.#ms.themeColor=e}getWindowControlsConfig(){return this.#ms.config}async toggleWindowControlsToolbar(e){const t=e?{windowControlsOverlayConfig:this.#ms.config}:{},r=this.overlayAgent.invoke_setShowWindowControlsOverlay(t),n=this.#ms.toggleEmulatedOverlay(e);await Promise.all([r,n]),this.setShowViewportSizeOnResize(!e)}buildHighlightConfig(t="all",r=!1){const n=e.Settings.Settings.instance().moduleSetting("show-metrics-rulers").get(),s={showInfo:"all"===t||"container-outline"===t,showRulers:n,showStyles:r,showAccessibilityInfo:r,showExtensionLines:n,gridHighlightConfig:{},flexContainerHighlightConfig:{},flexItemHighlightConfig:{},contrastAlgorithm:o.Runtime.experiments.isEnabled("apca")?"apca":"aa"};return"all"!==t&&"content"!==t||(s.contentColor=e.Color.PageHighlight.Content.toProtocolRGBA()),"all"!==t&&"padding"!==t||(s.paddingColor=e.Color.PageHighlight.Padding.toProtocolRGBA()),"all"!==t&&"border"!==t||(s.borderColor=e.Color.PageHighlight.Border.toProtocolRGBA()),"all"!==t&&"margin"!==t||(s.marginColor=e.Color.PageHighlight.Margin.toProtocolRGBA()),"all"===t&&(s.eventTargetColor=e.Color.PageHighlight.EventTarget.toProtocolRGBA(),s.shapeColor=e.Color.PageHighlight.Shape.toProtocolRGBA(),s.shapeMarginColor=e.Color.PageHighlight.ShapeMargin.toProtocolRGBA(),s.gridHighlightConfig={rowGapColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA(),rowHatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),columnGapColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA(),columnHatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),rowLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),columnLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),rowLineDash:!0,columnLineDash:!0},s.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},itemSeparator:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dotted"},lineSeparator:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},mainDistributedSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()},crossDistributedSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()},rowGapSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()},columnGapSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()}},s.flexItemHighlightConfig={baseSizeBox:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA()},baseSizeBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dotted"},flexibilityArrow:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA()}}),t.endsWith("gap")&&(s.gridHighlightConfig={gridBorderColor:e.Color.PageHighlight.GridBorder.toProtocolRGBA(),gridBorderDash:!0},"gap"!==t&&"row-gap"!==t||(s.gridHighlightConfig.rowGapColor=e.Color.PageHighlight.GapBackground.toProtocolRGBA(),s.gridHighlightConfig.rowHatchColor=e.Color.PageHighlight.GapHatch.toProtocolRGBA()),"gap"!==t&&"column-gap"!==t||(s.gridHighlightConfig.columnGapColor=e.Color.PageHighlight.GapBackground.toProtocolRGBA(),s.gridHighlightConfig.columnHatchColor=e.Color.PageHighlight.GapHatch.toProtocolRGBA())),t.endsWith("gap")&&(s.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"}},"gap"!==t&&"row-gap"!==t||(s.flexContainerHighlightConfig.rowGapSpace={hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()}),"gap"!==t&&"column-gap"!==t||(s.flexContainerHighlightConfig.columnGapSpace={hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()})),"grid-areas"===t&&(s.gridHighlightConfig={rowLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),columnLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),rowLineDash:!0,columnLineDash:!0,showAreaNames:!0,areaBorderColor:e.Color.PageHighlight.GridAreaBorder.toProtocolRGBA()}),"grid-template-columns"===t&&(s.contentColor=e.Color.PageHighlight.Content.toProtocolRGBA(),s.gridHighlightConfig={columnLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),columnLineDash:!0}),"grid-template-rows"===t&&(s.contentColor=e.Color.PageHighlight.Content.toProtocolRGBA(),s.gridHighlightConfig={rowLineColor:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),rowLineDash:!0}),"justify-content"===t&&(s.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},mainDistributedSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()}}),"align-content"===t&&(s.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},crossDistributedSpace:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:e.Color.PageHighlight.GapBackground.toProtocolRGBA()}}),"align-items"===t&&(s.flexContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},lineSeparator:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"},crossAlignment:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA()}}),"flexibility"===t&&(s.flexItemHighlightConfig={baseSizeBox:{hatchColor:e.Color.PageHighlight.GapHatch.toProtocolRGBA()},baseSizeBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dotted"},flexibilityArrow:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA()}}),"container-outline"===t&&(s.containerQueryContainerHighlightConfig={containerBorder:{color:e.Color.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:"dashed"}}),s}nodeHighlightRequested({nodeId:e}){const t=this.#Er.nodeForId(e);t&&this.dispatchEventToListeners("HighlightNodeRequested",t)}static setInspectNodeHandler(e){Cn.inspectNodeHandler=e}inspectNodeRequested({backendNodeId:t}){const r=new En(this.target(),t);Cn.inspectNodeHandler?r.resolvePromise().then((e=>{e&&Cn.inspectNodeHandler&&Cn.inspectNodeHandler(e)})):e.Revealer.reveal(r),this.dispatchEventToListeners("InspectModeExited")}screenshotRequested({viewport:e}){this.dispatchEventToListeners("ScreenshotRequested",e),this.dispatchEventToListeners("InspectModeExited")}inspectModeCanceled(){this.dispatchEventToListeners("InspectModeExited")}static inspectNodeHandler=null;getOverlayAgent(){return this.overlayAgent}async hasStyleSheetText(e){return this.#ms.initializeStyleSheetText(e)}}class xn{#it;#fs;#bs;#ys;#vs={showCSS:!1,selectedPlatform:"Windows",themeColor:"#ffffff"};constructor(e){this.#it=e}get selectedPlatform(){return this.#vs.selectedPlatform}set selectedPlatform(e){this.#vs.selectedPlatform=e}get themeColor(){return this.#vs.themeColor}set themeColor(e){this.#vs.themeColor=e}get config(){return this.#vs}async initializeStyleSheetText(e){if(this.#fs&&e===this.#ys)return!0;const t=this.#ks(e);if(!t)return!1;if(this.#bs=this.#Is(t),!this.#bs)return!1;const r=await this.#it.getStyleSheetText(this.#bs);return!!r&&(this.#fs=r,this.#ys=e,!0)}async toggleEmulatedOverlay(e){if(this.#bs&&this.#fs)if(e){const e=xn.#ws(this.#vs.selectedPlatform.toLowerCase(),this.#fs);e&&await this.#it.setStyleSheetText(this.#bs,e,!1)}else await this.#it.setStyleSheetText(this.#bs,this.#fs,!1)}static#ws(e,t){const r=Sn[e];return xn.#Ss(r.x,r.y,r.width,r.height,t)}#ks(t){const r=e.ParsedURL.ParsedURL.extractOrigin(t),n=this.#it.styleSheetHeaders().find((e=>e.sourceURL&&e.sourceURL.includes(r)));return n?.sourceURL}#Is(e){const t=this.#it.getStyleSheetIdsForURL(e);return t.length>0?t[0]:void 0}static#Ss(e,t,r,n,s){if(!s)return;return s.replace(/: env\(titlebar-area-x(?:,[^)]*)?\);/g,`: env(titlebar-area-x, ${e}px);`).replace(/: env\(titlebar-area-y(?:,[^)]*)?\);/g,`: env(titlebar-area-y, ${t}px);`).replace(/: env\(titlebar-area-width(?:,[^)]*)?\);/g,`: env(titlebar-area-width, calc(100% - ${r}px));`).replace(/: env\(titlebar-area-height(?:,[^)]*)?\);/g,`: env(titlebar-area-height, ${n}px);`)}transformStyleSheetforTesting(e,t,r,n,s){return xn.#Ss(e,t,r,n,s)}}class Rn{#Un;constructor(e){this.#Un=e}highlightInOverlay(e,t){const{node:r,deferredNode:n,object:s,selectorList:i}={node:void 0,deferredNode:void 0,object:void 0,selectorList:void 0,...e},o=r?r.id:void 0,a=n?n.backendNodeId():void 0,l=s?s.objectId:void 0;o||a||l?this.#Un.target().overlayAgent().invoke_highlightNode({highlightConfig:t,nodeId:o,backendNodeId:a,objectId:l,selector:i}):this.#Un.target().overlayAgent().invoke_hideHighlight()}async setInspectMode(e,t){await this.#Un.target().overlayAgent().invoke_setInspectMode({mode:e,highlightConfig:t})}highlightFrame(t){this.#Un.target().overlayAgent().invoke_highlightFrame({frameId:t,contentColor:e.Color.PageHighlight.Content.toProtocolRGBA(),contentOutlineColor:e.Color.PageHighlight.ContentOutline.toProtocolRGBA()})}}class Tn{#Un;constructor(e){this.#Un=e}highlightSourceOrderInOverlay(e,t){this.#Un.setSourceOrderActive(!0),this.#Un.setShowViewportSizeOnResize(!1),this.#Un.getOverlayAgent().invoke_highlightSourceOrder({sourceOrderConfig:t,nodeId:e.id})}hideSourceOrderHighlight(){this.#Un.setSourceOrderActive(!1),this.#Un.setShowViewportSizeOnResize(!0),this.#Un.clearHighlight()}}h.register(Cn,{capabilities:2,autostart:!0});var Mn,Pn=Object.freeze({__proto__:null,OverlayModel:Cn,WindowControls:xn,SourceOrderHighlighter:Tn});class Ln{#Cs;#xs;ownerDocument;#Rs;id;index;#Ts;#Ms;#Ps;#Ls;nodeValueInternal;#Es;#As;#Os;#Ds;#Ns;#Fs;#Bs;#Hs;#Us;assignedSlot;shadowRootsInternal;#_s;#qs;#zs;childNodeCountInternal;childrenInternal;nextSibling;previousSibling;firstChild;lastChild;parentNode;templateContentInternal;contentDocumentInternal;childDocumentPromiseForTesting;#js;publicId;systemId;internalSubset;name;value;constructor(e){this.#Cs=e,this.#xs=this.#Cs.getAgent(),this.index=void 0,this.#Bs=null,this.#Hs=new Map,this.#Us=[],this.assignedSlot=null,this.shadowRootsInternal=[],this.#_s=new Map,this.#qs=new Map,this.#zs=0,this.childrenInternal=null,this.nextSibling=null,this.previousSibling=null,this.firstChild=null,this.lastChild=null,this.parentNode=null}static create(e,t,r,n){const s=new Ln(e);return s.init(t,r,n),s}init(e,t,r){if(this.#xs=this.#Cs.getAgent(),this.ownerDocument=e,this.#Rs=t,this.id=r.nodeId,this.#Ts=r.backendNodeId,this.#Cs.registerNode(this),this.#Ms=r.nodeType,this.#Ps=r.nodeName,this.#Ls=r.localName,this.nodeValueInternal=r.nodeValue,this.#Es=r.pseudoType,this.#As=r.pseudoIdentifier,this.#Os=r.shadowRootType,this.#Ds=r.frameId||null,this.#Ns=r.xmlVersion,this.#Fs=Boolean(r.isSVG),r.attributes&&this.setAttributesPayload(r.attributes),this.childNodeCountInternal=r.childNodeCount||0,r.shadowRoots)for(let e=0;e<r.shadowRoots.length;++e){const t=r.shadowRoots[e],n=Ln.create(this.#Cs,this.ownerDocument,!0,t);this.shadowRootsInternal.push(n),n.parentNode=this}r.templateContent&&(this.templateContentInternal=Ln.create(this.#Cs,this.ownerDocument,!0,r.templateContent),this.templateContentInternal.parentNode=this,this.childrenInternal=[]);const n=new Set(["EMBED","IFRAME","OBJECT","FENCEDFRAME"]);r.contentDocument?(this.contentDocumentInternal=new On(this.#Cs,r.contentDocument),this.contentDocumentInternal.parentNode=this,this.childrenInternal=[]):r.frameId&&n.has(r.nodeName)&&(this.childDocumentPromiseForTesting=this.requestChildDocument(r.frameId,this.#Cs.target()),this.childrenInternal=[]),r.importedDocument&&(this.#js=Ln.create(this.#Cs,this.ownerDocument,!0,r.importedDocument),this.#js.parentNode=this,this.childrenInternal=[]),r.distributedNodes&&this.setDistributedNodePayloads(r.distributedNodes),r.assignedSlot&&this.setAssignedSlot(r.assignedSlot),r.children&&this.setChildrenPayload(r.children),this.setPseudoElements(r.pseudoElements),this.#Ms===Node.ELEMENT_NODE?(this.ownerDocument&&!this.ownerDocument.documentElement&&"HTML"===this.#Ps&&(this.ownerDocument.documentElement=this),this.ownerDocument&&!this.ownerDocument.body&&"BODY"===this.#Ps&&(this.ownerDocument.body=this)):this.#Ms===Node.DOCUMENT_TYPE_NODE?(this.publicId=r.publicId,this.systemId=r.systemId,this.internalSubset=r.internalSubset):this.#Ms===Node.ATTRIBUTE_NODE&&(this.name=r.name,this.value=r.value)}async requestChildDocument(e,t){const r=await Dt.instance().getOrWaitForFrame(e,t),n=r.resourceTreeModel()?.target().model(Dn);return n?.requestDocument()||null}isAdFrameNode(){if(this.isIframe()&&this.#Ds){const e=Dt.instance().getFrame(this.#Ds);return!!e&&"none"!==e.adFrameType()}return!1}isSVGNode(){return this.#Fs}isMediaNode(){return"AUDIO"===this.#Ps||"VIDEO"===this.#Ps}isViewTransitionPseudoNode(){return!!this.#Es&&["view-transition","view-transition-group","view-transition-image-pair","view-transition-old","view-transition-new"].includes(this.#Es)}creationStackTrace(){if(this.#Bs)return this.#Bs;const e=this.#xs.invoke_getNodeStackTraces({nodeId:this.id});return this.#Bs=e.then((e=>e.creation||null)),this.#Bs}get subtreeMarkerCount(){return this.#zs}domModel(){return this.#Cs}backendNodeId(){return this.#Ts}children(){return this.childrenInternal?this.childrenInternal.slice():null}setChildren(e){this.childrenInternal=e}hasAttributes(){return this.#_s.size>0}childNodeCount(){return this.childNodeCountInternal}setChildNodeCount(e){this.childNodeCountInternal=e}hasShadowRoots(){return Boolean(this.shadowRootsInternal.length)}shadowRoots(){return this.shadowRootsInternal.slice()}templateContent(){return this.templateContentInternal||null}contentDocument(){return this.contentDocumentInternal||null}setContentDocument(e){this.contentDocumentInternal=e}isIframe(){return"IFRAME"===this.#Ps}importedDocument(){return this.#js||null}nodeType(){return this.#Ms}nodeName(){return this.#Ps}pseudoType(){return this.#Es}pseudoIdentifier(){return this.#As}hasPseudoElements(){return this.#Hs.size>0}pseudoElements(){return this.#Hs}beforePseudoElement(){return this.#Hs.get("before")?.at(-1)}afterPseudoElement(){return this.#Hs.get("after")?.at(-1)}markerPseudoElement(){return this.#Hs.get("marker")?.at(-1)}backdropPseudoElement(){return this.#Hs.get("backdrop")?.at(-1)}viewTransitionPseudoElements(){return[...this.#Hs.get("view-transition")||[],...this.#Hs.get("view-transition-group")||[],...this.#Hs.get("view-transition-image-pair")||[],...this.#Hs.get("view-transition-old")||[],...this.#Hs.get("view-transition-new")||[]]}hasAssignedSlot(){return null!==this.assignedSlot}isInsertionPoint(){return!this.isXMLNode()&&("SHADOW"===this.#Ps||"CONTENT"===this.#Ps||"SLOT"===this.#Ps)}distributedNodes(){return this.#Us}isInShadowTree(){return this.#Rs}ancestorShadowHost(){const e=this.ancestorShadowRoot();return e?e.parentNode:null}ancestorShadowRoot(){if(!this.#Rs)return null;let e=this;for(;e&&!e.isShadowRoot();)e=e.parentNode;return e}ancestorUserAgentShadowRoot(){const e=this.ancestorShadowRoot();return e&&e.shadowRootType()===Ln.ShadowRootTypes.UserAgent?e:null}isShadowRoot(){return Boolean(this.#Os)}shadowRootType(){return this.#Os||null}nodeNameInCorrectCase(){const e=this.shadowRootType();return e?"#shadow-root ("+e+")":this.localName()?this.localName().length!==this.nodeName().length?this.nodeName():this.localName():this.nodeName()}setNodeName(e,t){this.#xs.invoke_setNodeName({nodeId:this.id,name:e}).then((e=>{e.getError()||this.#Cs.markUndoableState(),t&&t(e.getError()||null,this.#Cs.nodeForId(e.nodeId))}))}localName(){return this.#Ls}nodeValue(){return this.nodeValueInternal}setNodeValueInternal(e){this.nodeValueInternal=e}setNodeValue(e,t){this.#xs.invoke_setNodeValue({nodeId:this.id,value:e}).then((e=>{e.getError()||this.#Cs.markUndoableState(),t&&t(e.getError()||null)}))}getAttribute(e){const t=this.#_s.get(e);return t?t.value:void 0}setAttribute(e,t,r){this.#xs.invoke_setAttributesAsText({nodeId:this.id,text:t,name:e}).then((e=>{e.getError()||this.#Cs.markUndoableState(),r&&r(e.getError()||null)}))}setAttributeValue(e,t,r){this.#xs.invoke_setAttributeValue({nodeId:this.id,name:e,value:t}).then((e=>{e.getError()||this.#Cs.markUndoableState(),r&&r(e.getError()||null)}))}setAttributeValuePromise(e,t){return new Promise((r=>this.setAttributeValue(e,t,r)))}attributes(){return[...this.#_s.values()]}async removeAttribute(e){(await this.#xs.invoke_removeAttribute({nodeId:this.id,name:e})).getError()||(this.#_s.delete(e),this.#Cs.markUndoableState())}getChildNodes(e){this.childrenInternal?e(this.children()):this.#xs.invoke_requestChildNodes({nodeId:this.id}).then((t=>{e(t.getError()?null:this.children())}))}async getSubtree(e,t){return(await this.#xs.invoke_requestChildNodes({nodeId:this.id,depth:e,pierce:t})).getError()?null:this.childrenInternal}async getOuterHTML(){const{outerHTML:e}=await this.#xs.invoke_getOuterHTML({nodeId:this.id});return e}setOuterHTML(e,t){this.#xs.invoke_setOuterHTML({nodeId:this.id,outerHTML:e}).then((e=>{e.getError()||this.#Cs.markUndoableState(),t&&t(e.getError()||null)}))}removeNode(e){return this.#xs.invoke_removeNode({nodeId:this.id}).then((t=>{t.getError()||this.#Cs.markUndoableState(),e&&e(t.getError()||null)}))}async copyNode(){const{outerHTML:e}=await this.#xs.invoke_getOuterHTML({nodeId:this.id});return null!==e&&a.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(e),e}path(){function e(e){return e.#Ps.length?void 0!==e.index?e.index:e.parentNode?e.isShadowRoot()?e.shadowRootType()===Ln.ShadowRootTypes.UserAgent?"u":"a":e.nodeType()===Node.DOCUMENT_NODE?"d":null:null:null}const t=[];let r=this;for(;r;){const n=e(r);if(null===n)break;t.push([n,r.#Ps]),r=r.parentNode}return t.reverse(),t.join(",")}isAncestor(e){if(!e)return!1;let t=e.parentNode;for(;t;){if(this===t)return!0;t=t.parentNode}return!1}isDescendant(e){return null!==e&&e.isAncestor(this)}frameOwnerFrameId(){return this.#Ds}frameId(){let e=this.parentNode||this;for(;!e.#Ds&&e.parentNode;)e=e.parentNode;return e.#Ds}setAttributesPayload(e){let t=!this.#_s||e.length!==2*this.#_s.size;const r=this.#_s||new Map;this.#_s=new Map;for(let n=0;n<e.length;n+=2){const s=e[n],i=e[n+1];if(this.addAttribute(s,i),t)continue;const o=r.get(s);o&&o.value===i||(t=!0)}return t}insertChild(e,t){if(!this.childrenInternal)throw new Error("DOMNode._children is expected to not be null.");const r=Ln.create(this.#Cs,this.ownerDocument,this.#Rs,t);return this.childrenInternal.splice(e?this.childrenInternal.indexOf(e)+1:0,0,r),this.renumber(),r}removeChild(e){const t=e.pseudoType();if(t){const r=this.#Hs.get(t)?.filter((t=>t!==e));r&&r.length>0?this.#Hs.set(t,r):this.#Hs.delete(t)}else{const t=this.shadowRootsInternal.indexOf(e);if(-1!==t)this.shadowRootsInternal.splice(t,1);else{if(!this.childrenInternal)throw new Error("DOMNode._children is expected to not be null.");if(-1===this.childrenInternal.indexOf(e))throw new Error("DOMNode._children is expected to contain the node to be removed.");this.childrenInternal.splice(this.childrenInternal.indexOf(e),1)}}e.parentNode=null,this.#zs-=e.#zs,e.#zs&&this.#Cs.dispatchEventToListeners(Mn.MarkersChanged,this),this.renumber()}setChildrenPayload(e){this.childrenInternal=[];for(let t=0;t<e.length;++t){const r=e[t],n=Ln.create(this.#Cs,this.ownerDocument,this.#Rs,r);this.childrenInternal.push(n)}this.renumber()}setPseudoElements(e){if(e)for(let t=0;t<e.length;++t){const r=Ln.create(this.#Cs,this.ownerDocument,this.#Rs,e[t]);r.parentNode=this;const n=r.pseudoType();if(!n)throw new Error("DOMNode.pseudoType() is expected to be defined.");const s=this.#Hs.get(n);s?s.push(r):this.#Hs.set(n,[r])}}setDistributedNodePayloads(e){this.#Us=[];for(const t of e)this.#Us.push(new An(this.#Cs.target(),t.backendNodeId,t.nodeType,t.nodeName))}setAssignedSlot(e){this.assignedSlot=new An(this.#Cs.target(),e.backendNodeId,e.nodeType,e.nodeName)}renumber(){if(!this.childrenInternal)throw new Error("DOMNode._children is expected to not be null.");if(this.childNodeCountInternal=this.childrenInternal.length,0===this.childNodeCountInternal)return this.firstChild=null,void(this.lastChild=null);this.firstChild=this.childrenInternal[0],this.lastChild=this.childrenInternal[this.childNodeCountInternal-1];for(let e=0;e<this.childNodeCountInternal;++e){const t=this.childrenInternal[e];t.index=e,t.nextSibling=e+1<this.childNodeCountInternal?this.childrenInternal[e+1]:null,t.previousSibling=e-1>=0?this.childrenInternal[e-1]:null,t.parentNode=this}}addAttribute(e,t){const r={name:e,value:t,_node:this};this.#_s.set(e,r)}setAttributeInternal(e,t){const r=this.#_s.get(e);r?r.value=t:this.addAttribute(e,t)}removeAttributeInternal(e){this.#_s.delete(e)}copyTo(e,t,r){this.#xs.invoke_copyTo({nodeId:this.id,targetNodeId:e.id,insertBeforeNodeId:t?t.id:void 0}).then((e=>{e.getError()||this.#Cs.markUndoableState(),r&&r(e.getError()||null,this.#Cs.nodeForId(e.nodeId))}))}moveTo(e,t,r){this.#xs.invoke_moveTo({nodeId:this.id,targetNodeId:e.id,insertBeforeNodeId:t?t.id:void 0}).then((e=>{e.getError()||this.#Cs.markUndoableState(),r&&r(e.getError()||null,this.#Cs.nodeForId(e.nodeId))}))}isXMLNode(){return Boolean(this.#Ns)}setMarker(e,t){if(null!==t){if(this.parentNode&&!this.#qs.has(e))for(let e=this;e;e=e.parentNode)++e.#zs;this.#qs.set(e,t);for(let e=this;e;e=e.parentNode)this.#Cs.dispatchEventToListeners(Mn.MarkersChanged,e)}else{if(!this.#qs.has(e))return;this.#qs.delete(e);for(let e=this;e;e=e.parentNode)--e.#zs;for(let e=this;e;e=e.parentNode)this.#Cs.dispatchEventToListeners(Mn.MarkersChanged,e)}}marker(e){return this.#qs.get(e)||null}getMarkerKeysForTest(){return[...this.#qs.keys()]}traverseMarkers(e){!function t(r){if(r.#zs){for(const t of r.#qs.keys())e(r,t);if(r.childrenInternal)for(const e of r.childrenInternal)t(e)}}(this)}resolveURL(t){if(!t)return t;for(let r=this;r;r=r.parentNode)if(r instanceof On&&r.baseURL)return e.ParsedURL.ParsedURL.completeURL(r.baseURL,t);return null}highlight(e){this.#Cs.overlayModel().highlightInOverlay({node:this,selectorList:void 0},e)}highlightForTwoSeconds(){this.#Cs.overlayModel().highlightInOverlayForTwoSeconds({node:this,selectorList:void 0})}async resolveToObject(e,t){const{object:r}=await this.#xs.invoke_resolveNode({nodeId:this.id,backendNodeId:void 0,executionContextId:t,objectGroup:e});return r&&this.#Cs.runtimeModelInternal.createRemoteObject(r)||null}async boxModel(){const{model:e}=await this.#xs.invoke_getBoxModel({nodeId:this.id});return e}async setAsInspectedNode(){let e=this;for(e&&e.pseudoType()&&(e=e.parentNode);e;){let t=e.ancestorUserAgentShadowRoot();if(!t)break;if(t=e.ancestorShadowHost(),!t)break;e=t}if(!e)throw new Error("In DOMNode.setAsInspectedNode: node is expected to not be null.");await this.#xs.invoke_setInspectedNode({nodeId:e.id})}enclosingElementOrSelf(){let e=this;return e&&e.nodeType()===Node.TEXT_NODE&&e.parentNode&&(e=e.parentNode),e&&e.nodeType()!==Node.ELEMENT_NODE&&(e=null),e}async callFunction(e,t=[]){const r=await this.resolveToObject();if(!r)return null;const n=await r.callFunction(e,t.map((e=>Ft.toCallArgument(e))));return r.release(),n.wasThrown||!n.object?null:{value:n.object.value}}async scrollIntoView(){const e=this.enclosingElementOrSelf();if(!e)return;await e.callFunction((function(){this.scrollIntoViewIfNeeded(!0)}))&&e.highlightForTwoSeconds()}async focus(){const e=this.enclosingElementOrSelf();if(!e)throw new Error("DOMNode.focus expects node to not be null.");await e.callFunction((function(){this.focus()}))&&(e.highlightForTwoSeconds(),await this.#Cs.target().pageAgent().invoke_bringToFront())}simpleSelector(){const e=this.localName()||this.nodeName().toLowerCase();if(this.nodeType()!==Node.ELEMENT_NODE)return e;const t=this.getAttribute("type"),r=this.getAttribute("id"),n=this.getAttribute("class");if("input"===e&&t&&!r&&!n)return e+'[type="'+CSS.escape(t)+'"]';if(r)return e+"#"+CSS.escape(r);if(n){return("div"===e?"":e)+"."+n.trim().split(/\s+/g).map((e=>CSS.escape(e))).join(".")}return this.pseudoIdentifier()?`${e}(${this.pseudoIdentifier()})`:e}async getAnchorBySpecifier(e){const t=await this.#xs.invoke_getAnchorElement({nodeId:this.id,anchorSpecifier:e});return t.getError()?null:this.domModel().nodeForId(t.nodeId)}}!function(e){let t;!function(e){e.UserAgent="user-agent",e.Open="open",e.Closed="closed"}(t=e.ShadowRootTypes||(e.ShadowRootTypes={}))}(Ln||(Ln={}));class En{#Cs;#Ts;constructor(e,t){this.#Cs=e.model(Dn),this.#Ts=t}resolve(e){this.resolvePromise().then(e)}async resolvePromise(){const e=await this.#Cs.pushNodesByBackendIdsToFrontend(new Set([this.#Ts]));return e&&e.get(this.#Ts)||null}backendNodeId(){return this.#Ts}domModel(){return this.#Cs}highlight(){this.#Cs.overlayModel().highlightInOverlay({deferredNode:this,selectorList:void 0})}}class An{nodeType;nodeName;deferredNode;constructor(e,t,r,n){this.nodeType=r,this.nodeName=n,this.deferredNode=new En(e,t)}}class On extends Ln{body;documentElement;documentURL;baseURL;constructor(e,t){super(e),this.body=null,this.documentElement=null,this.init(this,!1,t),this.documentURL=t.documentURL||"",this.baseURL=t.baseURL||""}}class Dn extends h{agent;idToDOMNode=new Map;#Vs;#Ws;runtimeModelInternal;#Gs;#Ks;#Qs;#$s;#Xs;constructor(e){super(e),this.agent=e.domAgent(),this.#Vs=null,this.#Ws=new Set,e.registerDOMDispatcher(new Nn(this)),this.runtimeModelInternal=e.model(_r),this.#Ks=null,e.suspended()||this.agent.invoke_enable({}),o.Runtime.experiments.isEnabled("capture-node-creation-stacks")&&this.agent.invoke_setNodeStackTracesEnabled({enable:!0})}runtimeModel(){return this.runtimeModelInternal}cssModel(){return this.target().model(Rr)}overlayModel(){return this.target().model(Cn)}static cancelSearch(){for(const e of z.instance().models(Dn))e.cancelSearch()}scheduleMutationEvent(e){this.hasEventListeners(Mn.DOMMutated)&&(this.#Gs=(this.#Gs||0)+1,Promise.resolve().then(function(e,t){if(!this.hasEventListeners(Mn.DOMMutated)||this.#Gs!==t)return;this.dispatchEventToListeners(Mn.DOMMutated,e)}.bind(this,e,this.#Gs)))}requestDocument(){return this.#Vs?Promise.resolve(this.#Vs):(this.#Ks||(this.#Ks=this.requestDocumentInternal()),this.#Ks)}async getOwnerNodeForFrame(e){const t=await this.agent.invoke_getFrameOwner({frameId:e});return t.getError()?null:new En(this.target(),t.backendNodeId)}async requestDocumentInternal(){const e=await this.agent.invoke_getDocument({});if(e.getError())return null;const{root:t}=e;if(this.#Ks=null,t&&this.setDocument(t),!this.#Vs)return console.error("No document"),null;const r=this.parentModel();if(r&&!this.#Qs){await r.requestDocument();const e=this.target().model(Kn)?.mainFrame;if(e){const t=await r.agent.invoke_getFrameOwner({frameId:e.id});!t.getError()&&t.nodeId&&(this.#Qs=r.nodeForId(t.nodeId))}}if(this.#Qs){const e=this.#Qs.contentDocument();this.#Qs.setContentDocument(this.#Vs),this.#Qs.setChildren([]),this.#Vs?(this.#Vs.parentNode=this.#Qs,this.dispatchEventToListeners(Mn.NodeInserted,this.#Vs)):e&&this.dispatchEventToListeners(Mn.NodeRemoved,{node:e,parent:this.#Qs})}return this.#Vs}existingDocument(){return this.#Vs}async pushNodeToFrontend(e){await this.requestDocument();const{nodeId:t}=await this.agent.invoke_requestNode({objectId:e});return t?this.nodeForId(t):null}pushNodeByPathToFrontend(e){return this.requestDocument().then((()=>this.agent.invoke_pushNodeByPathToFrontend({path:e}))).then((({nodeId:e})=>e))}async pushNodesByBackendIdsToFrontend(e){await this.requestDocument();const t=[...e],{nodeIds:r}=await this.agent.invoke_pushNodesByBackendIdsToFrontend({backendNodeIds:t});if(!r)return null;const n=new Map;for(let e=0;e<r.length;++e)r[e]&&n.set(t[e],this.nodeForId(r[e]));return n}attributeModified(e,t,r){const n=this.idToDOMNode.get(e);n&&(n.setAttributeInternal(t,r),this.dispatchEventToListeners(Mn.AttrModified,{node:n,name:t}),this.scheduleMutationEvent(n))}attributeRemoved(e,t){const r=this.idToDOMNode.get(e);r&&(r.removeAttributeInternal(t),this.dispatchEventToListeners(Mn.AttrRemoved,{node:r,name:t}),this.scheduleMutationEvent(r))}inlineStyleInvalidated(e){e.forEach((e=>this.#Ws.add(e))),this.#$s||(this.#$s=window.setTimeout(this.loadNodeAttributes.bind(this),20))}loadNodeAttributes(){this.#$s=void 0;for(const e of this.#Ws)this.agent.invoke_getAttributes({nodeId:e}).then((({attributes:t})=>{if(!t)return;const r=this.idToDOMNode.get(e);r&&r.setAttributesPayload(t)&&(this.dispatchEventToListeners(Mn.AttrModified,{node:r,name:"style"}),this.scheduleMutationEvent(r))}));this.#Ws.clear()}characterDataModified(e,t){const r=this.idToDOMNode.get(e);r?(r.setNodeValueInternal(t),this.dispatchEventToListeners(Mn.CharacterDataModified,r),this.scheduleMutationEvent(r)):console.error("nodeId could not be resolved to a node")}nodeForId(e){return e&&this.idToDOMNode.get(e)||null}documentUpdated(){const e=Boolean(this.#Vs);this.setDocument(null),this.parentModel()&&e&&!this.#Ks&&this.requestDocument()}setDocument(e){this.idToDOMNode=new Map,this.#Vs=e&&"nodeId"in e?new On(this,e):null,Bn.instance().dispose(this),this.parentModel()||this.dispatchEventToListeners(Mn.DocumentUpdated,this)}setDocumentForTest(e){this.setDocument(e)}setDetachedRoot(e){"#document"===e.nodeName?new On(this,e):Ln.create(this,null,!1,e)}setChildNodes(e,t){if(!e&&t.length)return void this.setDetachedRoot(t[0]);const r=this.idToDOMNode.get(e);r?.setChildrenPayload(t)}childNodeCountUpdated(e,t){const r=this.idToDOMNode.get(e);r?(r.setChildNodeCount(t),this.dispatchEventToListeners(Mn.ChildNodeCountUpdated,r),this.scheduleMutationEvent(r)):console.error("nodeId could not be resolved to a node")}childNodeInserted(e,t,r){const n=this.idToDOMNode.get(e),s=this.idToDOMNode.get(t);if(!n)return void console.error("parentId could not be resolved to a node");const i=n.insertChild(s,r);this.idToDOMNode.set(i.id,i),this.dispatchEventToListeners(Mn.NodeInserted,i),this.scheduleMutationEvent(i)}childNodeRemoved(e,t){const r=this.idToDOMNode.get(e),n=this.idToDOMNode.get(t);r&&n?(r.removeChild(n),this.unbind(n),this.dispatchEventToListeners(Mn.NodeRemoved,{node:n,parent:r}),this.scheduleMutationEvent(n)):console.error("parentId or nodeId could not be resolved to a node")}shadowRootPushed(e,t){const r=this.idToDOMNode.get(e);if(!r)return;const n=Ln.create(this,r.ownerDocument,!0,t);n.parentNode=r,this.idToDOMNode.set(n.id,n),r.shadowRootsInternal.unshift(n),this.dispatchEventToListeners(Mn.NodeInserted,n),this.scheduleMutationEvent(n)}shadowRootPopped(e,t){const r=this.idToDOMNode.get(e);if(!r)return;const n=this.idToDOMNode.get(t);n&&(r.removeChild(n),this.unbind(n),this.dispatchEventToListeners(Mn.NodeRemoved,{node:n,parent:r}),this.scheduleMutationEvent(n))}pseudoElementAdded(e,t){const r=this.idToDOMNode.get(e);if(!r)return;const n=Ln.create(this,r.ownerDocument,!1,t);n.parentNode=r,this.idToDOMNode.set(n.id,n);const s=n.pseudoType();if(!s)throw new Error("DOMModel._pseudoElementAdded expects pseudoType to be defined.");const i=r.pseudoElements().get(s);if(i){if(!s.startsWith("view-transition"))throw new Error("DOMModel.pseudoElementAdded expects parent to not already have this pseudo type added; only view-transition* pseudo elements can coexist under the same parent.");i.push(n)}else r.pseudoElements().set(s,[n]);this.dispatchEventToListeners(Mn.NodeInserted,n),this.scheduleMutationEvent(n)}topLayerElementsUpdated(){this.dispatchEventToListeners(Mn.TopLayerElementsChanged)}pseudoElementRemoved(e,t){const r=this.idToDOMNode.get(e);if(!r)return;const n=this.idToDOMNode.get(t);n&&(r.removeChild(n),this.unbind(n),this.dispatchEventToListeners(Mn.NodeRemoved,{node:n,parent:r}),this.scheduleMutationEvent(n))}distributedNodesUpdated(e,t){const r=this.idToDOMNode.get(e);r&&(r.setDistributedNodePayloads(t),this.dispatchEventToListeners(Mn.DistributedNodesChanged,r),this.scheduleMutationEvent(r))}unbind(e){this.idToDOMNode.delete(e.id);const t=e.children();for(let e=0;t&&e<t.length;++e)this.unbind(t[e]);for(let t=0;t<e.shadowRootsInternal.length;++t)this.unbind(e.shadowRootsInternal[t]);const r=e.pseudoElements();for(const e of r.values())for(const t of e)this.unbind(t);const n=e.templateContent();n&&this.unbind(n)}async getNodesByStyle(e,t=!1){if(await this.requestDocument(),!this.#Vs)throw new Error("DOMModel.getNodesByStyle expects to have a document.");const r=await this.agent.invoke_getNodesForSubtreeByStyle({nodeId:this.#Vs.id,computedStyles:e,pierce:t});if(r.getError())throw r.getError();return r.nodeIds}async performSearch(e,t){const r=await this.agent.invoke_performSearch({query:e,includeUserAgentShadowDOM:t});return r.getError()||(this.#Xs=r.searchId),r.getError()?0:r.resultCount}async searchResult(e){if(!this.#Xs)return null;const{nodeIds:t}=await this.agent.invoke_getSearchResults({searchId:this.#Xs,fromIndex:e,toIndex:e+1});return t&&1===t.length?this.nodeForId(t[0]):null}cancelSearch(){this.#Xs&&(this.agent.invoke_discardSearchResults({searchId:this.#Xs}),this.#Xs=void 0)}classNamesPromise(e){return this.agent.invoke_collectClassNamesFromSubtree({nodeId:e}).then((({classNames:e})=>e||[]))}querySelector(e,t){return this.agent.invoke_querySelector({nodeId:e,selector:t}).then((({nodeId:e})=>e))}querySelectorAll(e,t){return this.agent.invoke_querySelectorAll({nodeId:e,selector:t}).then((({nodeIds:e})=>e))}getTopLayerElements(){return this.agent.invoke_getTopLayerElements().then((({nodeIds:e})=>e))}getElementByRelation(e,t){return this.agent.invoke_getElementByRelation({nodeId:e,relation:t}).then((({nodeId:e})=>e))}markUndoableState(e){Bn.instance().markUndoableState(this,e||!1)}async nodeForLocation(e,t,r){const n=await this.agent.invoke_getNodeForLocation({x:e,y:t,includeUserAgentShadowDOM:r});return n.getError()||!n.nodeId?null:this.nodeForId(n.nodeId)}async getContainerForNode(e,t,r,n){const{nodeId:s}=await this.agent.invoke_getContainerForNode({nodeId:e,containerName:t,physicalAxes:r,logicalAxes:n});return s?this.nodeForId(s):null}pushObjectAsNodeToFrontend(e){return e.isNode()&&e.objectId?this.pushNodeToFrontend(e.objectId):Promise.resolve(null)}suspendModel(){return this.agent.invoke_disable().then((()=>this.setDocument(null)))}async resumeModel(){await this.agent.invoke_enable({})}dispose(){Bn.instance().dispose(this)}parentModel(){const e=this.target().parentTarget();return e?e.model(Dn):null}getAgent(){return this.agent}registerNode(e){this.idToDOMNode.set(e.id,e)}}!function(e){e.AttrModified="AttrModified",e.AttrRemoved="AttrRemoved",e.CharacterDataModified="CharacterDataModified",e.DOMMutated="DOMMutated",e.NodeInserted="NodeInserted",e.NodeRemoved="NodeRemoved",e.DocumentUpdated="DocumentUpdated",e.ChildNodeCountUpdated="ChildNodeCountUpdated",e.DistributedNodesChanged="DistributedNodesChanged",e.MarkersChanged="MarkersChanged",e.TopLayerElementsChanged="TopLayerElementsChanged"}(Mn||(Mn={}));class Nn{#Er;constructor(e){this.#Er=e}documentUpdated(){this.#Er.documentUpdated()}attributeModified({nodeId:e,name:t,value:r}){this.#Er.attributeModified(e,t,r)}attributeRemoved({nodeId:e,name:t}){this.#Er.attributeRemoved(e,t)}inlineStyleInvalidated({nodeIds:e}){this.#Er.inlineStyleInvalidated(e)}characterDataModified({nodeId:e,characterData:t}){this.#Er.characterDataModified(e,t)}setChildNodes({parentId:e,nodes:t}){this.#Er.setChildNodes(e,t)}childNodeCountUpdated({nodeId:e,childNodeCount:t}){this.#Er.childNodeCountUpdated(e,t)}childNodeInserted({parentNodeId:e,previousNodeId:t,node:r}){this.#Er.childNodeInserted(e,t,r)}childNodeRemoved({parentNodeId:e,nodeId:t}){this.#Er.childNodeRemoved(e,t)}shadowRootPushed({hostId:e,root:t}){this.#Er.shadowRootPushed(e,t)}shadowRootPopped({hostId:e,rootId:t}){this.#Er.shadowRootPopped(e,t)}pseudoElementAdded({parentId:e,pseudoElement:t}){this.#Er.pseudoElementAdded(e,t)}pseudoElementRemoved({parentId:e,pseudoElementId:t}){this.#Er.pseudoElementRemoved(e,t)}distributedNodesUpdated({insertionPointId:e,distributedNodes:t}){this.#Er.distributedNodesUpdated(e,t)}topLayerElementsUpdated(){this.#Er.topLayerElementsUpdated()}}let Fn=null;class Bn{#Rt;#Hn;#Js;constructor(){this.#Rt=[],this.#Hn=0,this.#Js=null}static instance(e={forceNew:null}){const{forceNew:t}=e;return Fn&&!t||(Fn=new Bn),Fn}async markUndoableState(e,t){this.#Js&&e!==this.#Js&&(this.#Js.markUndoableState(),this.#Js=null),t&&this.#Js===e||(this.#Rt=this.#Rt.slice(0,this.#Hn),this.#Rt.push(e),this.#Hn=this.#Rt.length,t?this.#Js=e:(await e.getAgent().invoke_markUndoableState(),this.#Js=null))}async undo(){if(0===this.#Hn)return Promise.resolve();--this.#Hn,this.#Js=null,await this.#Rt[this.#Hn].getAgent().invoke_undo()}async redo(){if(this.#Hn>=this.#Rt.length)return Promise.resolve();++this.#Hn,this.#Js=null,await this.#Rt[this.#Hn-1].getAgent().invoke_redo()}dispose(e){let t=0;for(let r=0;r<this.#Hn;++r)this.#Rt[r]===e&&++t;s.ArrayUtilities.removeElement(this.#Rt,e),this.#Hn-=t,this.#Js===e&&(this.#Js=null)}}h.register(Dn,{capabilities:2,autostart:!0});var Hn=Object.freeze({__proto__:null,get DOMNode(){return Ln},DeferredDOMNode:En,DOMNodeShortcut:An,DOMDocument:On,DOMModel:Dn,get Events(){return Mn},DOMModelUndoStack:Bn});class Un{#Dr;#Ys;#Zs;#ei;#ti;#ri;#ni;#si;#ii;#oi;#ai;#li;#di=null;#ci=null;constructor(t,r,n,i,o,a,l,d,c,h){this.#Dr=t,this.#Ys=r,this.url=n,this.#ei=i,this.#ti=o,this.#ri=a,this.#ni=l||e.ResourceType.resourceTypes.Other,this.#si=d,this.#ii=!1,this.#oi=c&&s.DateUtilities.isValid(c)?c:null,this.#ai=h}lastModified(){if(this.#oi||!this.#Ys)return this.#oi;const e=this.#Ys.responseLastModified(),t=e?new Date(e):null;return this.#oi=t&&s.DateUtilities.isValid(t)?t:null,this.#oi}contentSize(){return"number"!=typeof this.#ai&&this.#Ys?this.#Ys.resourceSize:this.#ai}get request(){return this.#Ys}get url(){return this.#Zs}set url(t){this.#Zs=t,this.#li=new e.ParsedURL.ParsedURL(t)}get parsedURL(){return this.#li}get documentURL(){return this.#ei}get frameId(){return this.#ti}get loaderId(){return this.#ri}get displayName(){return this.#li?this.#li.displayName:""}resourceType(){return this.#Ys?this.#Ys.resourceType():this.#ni}get mimeType(){return this.#Ys?this.#Ys.mimeType:this.#si}get content(){return this.#di?.isTextContent?this.#di.text:this.#di?.base64??null}get isGenerated(){return this.#ii}set isGenerated(e){this.#ii=e}contentURL(){return this.#Zs}contentType(){return this.resourceType()===e.ResourceType.resourceTypes.Document&&-1!==this.mimeType.indexOf("javascript")?e.ResourceType.resourceTypes.Script:this.resourceType()}async requestContent(){const e=await this.requestContentData();return r.ContentData.ContentData.asDeferredContent(e)}async requestContentData(){return this.#di?this.#di:(this.#ci||(this.#ci=this.innerRequestContent().then((e=>(r.ContentData.ContentData.isError(e)||(this.#di=e),this.#ci=null,e)))),this.#ci)}canonicalMimeType(){return this.contentType().canonicalMimeType()||this.mimeType}async searchInContent(e,t,n){if(!this.frameId)return[];if(this.request)return this.request.searchInContent(e,t,n);const s=await this.#Dr.target().pageAgent().invoke_searchInResource({frameId:this.frameId,url:this.url,query:e,caseSensitive:t,isRegex:n});return r.TextUtils.performSearchInSearchMatches(s.result||[],e,t,n)}async populateImageSource(e){const t=await this.requestContentData();r.ContentData.ContentData.isError(t)||(e.src=t.asDataUrl()??this.#Zs)}async innerRequestContent(){if(this.request)return this.request.requestContentData();const e=await this.#Dr.target().pageAgent().invoke_getResourceContent({frameId:this.frameId,url:this.url}),t=e.getError();return t?{error:t}:new r.ContentData.ContentData(e.content,e.base64Encoded,this.mimeType)}hasTextContent(){return!!this.#di?.isTextContent||(this.#ni.isTextType()||s.MimeType.isTextType(this.mimeType))}frame(){return this.#ti?this.#Dr.frameForId(this.#ti):null}statusCode(){return this.#Ys?this.#Ys.statusCode:0}}var _n,qn=Object.freeze({__proto__:null,Resource:Un});class zn extends h{#hi;#ui;#gi;constructor(e){super(e),this.#hi="",this.#ui="",this.#gi=new Set}updateSecurityOrigins(e){const t=this.#gi;this.#gi=e;for(const e of t)this.#gi.has(e)||this.dispatchEventToListeners(_n.SecurityOriginRemoved,e);for(const e of this.#gi)t.has(e)||this.dispatchEventToListeners(_n.SecurityOriginAdded,e)}securityOrigins(){return[...this.#gi]}mainSecurityOrigin(){return this.#hi}unreachableMainSecurityOrigin(){return this.#ui}setMainSecurityOrigin(e,t){this.#hi=e,this.#ui=t||null,this.dispatchEventToListeners(_n.MainSecurityOriginChanged,{mainSecurityOrigin:this.#hi,unreachableMainSecurityOrigin:this.#ui})}}!function(e){e.SecurityOriginAdded="SecurityOriginAdded",e.SecurityOriginRemoved="SecurityOriginRemoved",e.MainSecurityOriginChanged="MainSecurityOriginChanged"}(_n||(_n={})),h.register(zn,{capabilities:0,autostart:!1});var jn=Object.freeze({__proto__:null,SecurityOriginManager:zn,get Events(){return _n}});class Vn extends h{#pi;#mi;constructor(e){super(e),this.#pi="",this.#mi=new Set}updateStorageKeys(e){const t=this.#mi;this.#mi=e;for(const e of t)this.#mi.has(e)||this.dispatchEventToListeners("StorageKeyRemoved",e);for(const e of this.#mi)t.has(e)||this.dispatchEventToListeners("StorageKeyAdded",e)}storageKeys(){return[...this.#mi]}mainStorageKey(){return this.#pi}setMainStorageKey(e){this.#pi=e,this.dispatchEventToListeners("MainStorageKeyChanged",{mainStorageKey:this.#pi})}}h.register(Vn,{capabilities:0,autostart:!1});var Wn,Gn=Object.freeze({__proto__:null,StorageKeyManager:Vn,parseStorageKey:function(t){const r=t.split("^"),n={origin:e.ParsedURL.ParsedURL.extractOrigin(r[0]),components:new Map};for(let e=1;e<r.length;++e)n.components.set(r[e].charAt(0),r[e].substring(1));return n}});class Kn extends h{agent;storageAgent;#fi;#bi;framesInternal;#yi;#vi;#ki;isInterstitialShowing;mainFrame;#Ii;constructor(e){super(e);const t=e.model(X);t&&(t.addEventListener(J.RequestFinished,this.onRequestFinished,this),t.addEventListener(J.RequestUpdateDropped,this.onRequestUpdateDropped,this)),this.agent=e.pageAgent(),this.storageAgent=e.storageAgent(),this.agent.invoke_enable(),this.#fi=e.model(zn),this.#bi=e.model(Vn),this.#Ii=new Set,e.registerPageDispatcher(new $n(this)),this.framesInternal=new Map,this.#yi=!1,this.#vi=null,this.#ki=0,this.isInterstitialShowing=!1,this.mainFrame=null,this.#wi()}async#wi(){return this.agent.invoke_getResourceTree().then((e=>{this.processCachedResources(e.getError()?null:e.frameTree),this.mainFrame&&this.processPendingEvents(this.mainFrame)}))}static frameForRequest(e){const t=X.forRequest(e),r=t?t.target().model(Kn):null;return r&&e.frameId?r.frameForId(e.frameId):null}static frames(){const e=[];for(const t of z.instance().models(Kn))e.push(...t.frames());return e}static resourceForURL(e){for(const t of z.instance().models(Kn)){const r=t.mainFrame,n=r?r.resourceForURL(e):null;if(n)return n}return null}static reloadAllPages(e,t){for(const r of z.instance().models(Kn))r.target().parentTarget()?.type()!==B.Frame&&r.reloadPage(e,t)}async storageKeyForFrame(e){if(!this.framesInternal.has(e))return null;const t=await this.storageAgent.invoke_getStorageKeyForFrame({frameId:e});return"Frame tree node for given frame not found"===t.getError()?null:t.storageKey}domModel(){return this.target().model(Dn)}processCachedResources(e){e&&":"!==e.frame.url&&(this.dispatchEventToListeners(Wn.WillLoadCachedResources),this.addFramesRecursively(null,e),this.target().setInspectedURL(e.frame.url)),this.#yi=!0;const t=this.target().model(_r);t&&(t.setExecutionContextComparator(this.executionContextComparator.bind(this)),t.fireExecutionContextOrderChanged()),this.dispatchEventToListeners(Wn.CachedResourcesLoaded,this)}cachedResourcesLoaded(){return this.#yi}addFrame(e,t){this.framesInternal.set(e.id,e),e.isMainFrame()&&(this.mainFrame=e),this.dispatchEventToListeners(Wn.FrameAdded,e),this.updateSecurityOrigins(),this.updateStorageKeys()}frameAttached(e,t,r){const n=t&&this.framesInternal.get(t)||null;if(!this.#yi&&n)return null;if(this.framesInternal.has(e))return null;const s=new Qn(this,n,e,null,r||null);return t&&!n&&(s.crossTargetParentFrameId=t),s.isMainFrame()&&this.mainFrame&&this.frameDetached(this.mainFrame.id,!1),this.addFrame(s,!0),s}frameNavigated(e,t){const r=e.parentId&&this.framesInternal.get(e.parentId)||null;if(!this.#yi&&r)return;let n=this.framesInternal.get(e.id)||null;if(!n&&(n=this.frameAttached(e.id,e.parentId||null),console.assert(Boolean(n)),!n))return;this.dispatchEventToListeners(Wn.FrameWillNavigate,n),n.navigate(e),t&&(n.backForwardCacheDetails.restoredFromCache="BackForwardCacheRestore"===t),n.isMainFrame()&&this.target().setInspectedURL(n.url),this.dispatchEventToListeners(Wn.FrameNavigated,n),n.isPrimaryFrame()&&this.primaryPageChanged(n,"Navigation");const s=n.resources();for(let e=0;e<s.length;++e)this.dispatchEventToListeners(Wn.ResourceAdded,s[e]);this.updateSecurityOrigins(),this.updateStorageKeys(),n.backForwardCacheDetails.restoredFromCache&&(Dt.instance().modelRemoved(this),Dt.instance().modelAdded(this),this.#wi())}primaryPageChanged(e,t){this.processPendingEvents(e),this.dispatchEventToListeners(Wn.PrimaryPageChanged,{frame:e,type:t});const r=this.target().model(X);r&&e.isOutermostFrame()&&r.clearRequests()}documentOpened(t){this.frameNavigated(t,void 0);const r=this.framesInternal.get(t.id);if(r&&!r.getResourcesMap().get(t.url)){const n=this.createResourceFromFramePayload(t,t.url,e.ResourceType.resourceTypes.Document,t.mimeType,null,null);n.isGenerated=!0,r.addResource(n)}}frameDetached(e,t){if(!this.#yi)return;const r=this.framesInternal.get(e);if(!r)return;const n=r.sameTargetParentFrame();n?n.removeChildFrame(r,t):r.remove(t),this.updateSecurityOrigins(),this.updateStorageKeys()}onRequestFinished(e){if(!this.#yi)return;const t=e.data;if(t.failed)return;const r=t.frameId?this.framesInternal.get(t.frameId):null;r&&r.addRequest(t)}onRequestUpdateDropped(t){if(!this.#yi)return;const r=t.data,n=r.frameId;if(!n)return;const s=this.framesInternal.get(n);if(!s)return;const i=r.url;if(s.getResourcesMap().get(i))return;const o=new Un(this,null,i,s.url,n,r.loaderId,e.ResourceType.resourceTypes[r.resourceType],r.mimeType,r.lastModified,null);s.addResource(o)}frameForId(e){return this.framesInternal.get(e)||null}forAllResources(e){return!!this.mainFrame&&this.mainFrame.callForFrameResources(e)}frames(){return[...this.framesInternal.values()]}resourceForURL(e){return this.mainFrame?this.mainFrame.resourceForURL(e):null}addFramesRecursively(t,r){const n=r.frame;let s=this.framesInternal.get(n.id);s||(s=new Qn(this,t,n.id,n,null)),!t&&n.parentId&&(s.crossTargetParentFrameId=n.parentId),this.addFrame(s);for(const e of r.childFrames||[])this.addFramesRecursively(s,e);for(let t=0;t<r.resources.length;++t){const i=r.resources[t],o=this.createResourceFromFramePayload(n,i.url,e.ResourceType.resourceTypes[i.type],i.mimeType,i.lastModified||null,i.contentSize||null);s.addResource(o)}if(!s.getResourcesMap().get(n.url)){const t=this.createResourceFromFramePayload(n,n.url,e.ResourceType.resourceTypes.Document,n.mimeType,null,null);s.addResource(t)}}createResourceFromFramePayload(e,t,r,n,s,i){const o="number"==typeof s?new Date(1e3*s):null;return new Un(this,null,t,e.url,e.id,e.loaderId,r,n,o,i)}suspendReload(){this.#ki++}resumeReload(){if(this.#ki--,console.assert(this.#ki>=0,"Unbalanced call to ResourceTreeModel.resumeReload()"),!this.#ki&&this.#vi){const{ignoreCache:e,scriptToEvaluateOnLoad:t}=this.#vi;this.reloadPage(e,t)}}reloadPage(e,t){const r=this.mainFrame?.loaderId;if(!r)return;if(this.#vi||this.dispatchEventToListeners(Wn.PageReloadRequested,this),this.#ki)return void(this.#vi={ignoreCache:e,scriptToEvaluateOnLoad:t});this.#vi=null;const n=this.target().model(X);n&&n.clearRequests(),this.dispatchEventToListeners(Wn.WillReloadPage),this.agent.invoke_reload({ignoreCache:e,scriptToEvaluateOnLoad:t,loaderId:r})}navigate(e){return this.agent.invoke_navigate({url:e})}async navigationHistory(){const e=await this.agent.invoke_getNavigationHistory();return e.getError()?null:{currentIndex:e.currentIndex,entries:e.entries}}navigateToHistoryEntry(e){this.agent.invoke_navigateToHistoryEntry({entryId:e.id})}setLifecycleEventsEnabled(e){return this.agent.invoke_setLifecycleEventsEnabled({enabled:e})}async fetchAppManifest(){const e=await this.agent.invoke_getAppManifest({});return e.getError()?{url:e.url,data:null,errors:[]}:{url:e.url,data:e.data||null,errors:e.errors}}async getInstallabilityErrors(){return(await this.agent.invoke_getInstallabilityErrors()).installabilityErrors||[]}async getAppId(){return this.agent.invoke_getAppId()}executionContextComparator(e,t){function r(e){let t=e;const r=[];for(;t;)r.push(t),t=t.sameTargetParentFrame();return r.reverse()}if(e.target()!==t.target())return zr.comparator(e,t);const n=e.frameId?r(this.frameForId(e.frameId)):[],s=t.frameId?r(this.frameForId(t.frameId)):[];let i,o;for(let e=0;;e++)if(!n[e]||!s[e]||n[e]!==s[e]){i=n[e],o=s[e];break}return!i&&o?-1:!o&&i?1:i&&o?i.id.localeCompare(o.id):zr.comparator(e,t)}getSecurityOriginData(){const t=new Set;let r=null,n=null;for(const s of this.framesInternal.values()){const i=s.securityOrigin;if(i&&(t.add(i),s.isMainFrame()&&(r=i,s.unreachableUrl()))){n=new e.ParsedURL.ParsedURL(s.unreachableUrl()).securityOrigin()}}return{securityOrigins:t,mainSecurityOrigin:r,unreachableMainSecurityOrigin:n}}async getStorageKeyData(){const e=new Set;let t=null;for(const{isMainFrame:r,storageKey:n}of await Promise.all([...this.framesInternal.values()].map((e=>e.getStorageKey(!1).then((t=>({isMainFrame:e.isMainFrame(),storageKey:t})))))))r&&(t=n),n&&e.add(n);return{storageKeys:e,mainStorageKey:t}}updateSecurityOrigins(){const e=this.getSecurityOriginData();this.#fi.setMainSecurityOrigin(e.mainSecurityOrigin||"",e.unreachableMainSecurityOrigin||""),this.#fi.updateSecurityOrigins(e.securityOrigins)}async updateStorageKeys(){const e=await this.getStorageKeyData();this.#bi.setMainStorageKey(e.mainStorageKey||""),this.#bi.updateStorageKeys(e.storageKeys)}async getMainStorageKey(){return this.mainFrame?this.mainFrame.getStorageKey(!1):null}getMainSecurityOrigin(){const e=this.getSecurityOriginData();return e.mainSecurityOrigin||e.unreachableMainSecurityOrigin}onBackForwardCacheNotUsed(e){this.mainFrame&&this.mainFrame.id===e.frameId&&this.mainFrame.loaderId===e.loaderId?(this.mainFrame.setBackForwardCacheDetails(e),this.dispatchEventToListeners(Wn.BackForwardCacheDetailsUpdated,this.mainFrame)):this.#Ii.add(e)}processPendingEvents(e){if(e.isMainFrame())for(const t of this.#Ii)if(e.id===t.frameId&&e.loaderId===t.loaderId){e.setBackForwardCacheDetails(t),this.#Ii.delete(t);break}}}!function(e){e.FrameAdded="FrameAdded",e.FrameNavigated="FrameNavigated",e.FrameDetached="FrameDetached",e.FrameResized="FrameResized",e.FrameWillNavigate="FrameWillNavigate",e.PrimaryPageChanged="PrimaryPageChanged",e.ResourceAdded="ResourceAdded",e.WillLoadCachedResources="WillLoadCachedResources",e.CachedResourcesLoaded="CachedResourcesLoaded",e.DOMContentLoaded="DOMContentLoaded",e.LifecycleEvent="LifecycleEvent",e.Load="Load",e.PageReloadRequested="PageReloadRequested",e.WillReloadPage="WillReloadPage",e.InterstitialShown="InterstitialShown",e.InterstitialHidden="InterstitialHidden",e.BackForwardCacheDetailsUpdated="BackForwardCacheDetailsUpdated",e.JavaScriptDialogOpening="JavaScriptDialogOpening"}(Wn||(Wn={}));class Qn{#Un;#Si;#C;crossTargetParentFrameId;#ri;#h;#Zs;#Ci;#xi;#Ri;#Ti;#Mi;#Pi;#Li;#Ei;#Ai;#Oi;#Di;resourcesMap;backForwardCacheDetails={restoredFromCache:void 0,explanations:[],explanationsTree:void 0};constructor(e,t,r,n,i){this.#Un=e,this.#Si=t,this.#C=r,this.crossTargetParentFrameId=null,this.#ri=n?.loaderId??"",this.#h=n&&n.name,this.#Zs=n&&n.url||s.DevToolsPath.EmptyUrlString,this.#Ci=n&&n.domainAndRegistry||"",this.#xi=n&&n.securityOrigin,this.#Ti=n&&n.unreachableUrl||s.DevToolsPath.EmptyUrlString,this.#Mi=n?.adFrameStatus,this.#Pi=n&&n.secureContextType,this.#Li=n&&n.crossOriginIsolatedContextType,this.#Ei=n&&n.gatedAPIFeatures,this.#Ai=i,this.#Oi=null,this.#Di=new Set,this.resourcesMap=new Map,this.#Si&&this.#Si.#Di.add(this)}isSecureContext(){return null!==this.#Pi&&this.#Pi.startsWith("Secure")}getSecureContextType(){return this.#Pi}isCrossOriginIsolated(){return null!==this.#Li&&this.#Li.startsWith("Isolated")}getCrossOriginIsolatedContextType(){return this.#Li}getGatedAPIFeatures(){return this.#Ei}getCreationStackTraceData(){return{creationStackTrace:this.#Ai,creationStackTraceTarget:this.#Oi||this.resourceTreeModel().target()}}navigate(e){this.#ri=e.loaderId,this.#h=e.name,this.#Zs=e.url,this.#Ci=e.domainAndRegistry,this.#xi=e.securityOrigin,this.getStorageKey(!0),this.#Ti=e.unreachableUrl||s.DevToolsPath.EmptyUrlString,this.#Mi=e?.adFrameStatus,this.#Pi=e.secureContextType,this.#Li=e.crossOriginIsolatedContextType,this.#Ei=e.gatedAPIFeatures,this.backForwardCacheDetails={restoredFromCache:void 0,explanations:[],explanationsTree:void 0};const t=this.resourcesMap.get(this.#Zs);this.resourcesMap.clear(),this.removeChildFrames(),t&&t.loaderId===this.#ri&&this.addResource(t)}resourceTreeModel(){return this.#Un}get id(){return this.#C}get name(){return this.#h||""}get url(){return this.#Zs}domainAndRegistry(){return this.#Ci}async getAdScriptId(e){return(await this.#Un.agent.invoke_getAdScriptId({frameId:e})).adScriptId||null}get securityOrigin(){return this.#xi}getStorageKey(e){return this.#Ri&&!e||(this.#Ri=this.#Un.storageKeyForFrame(this.#C)),this.#Ri}unreachableUrl(){return this.#Ti}get loaderId(){return this.#ri}adFrameType(){return this.#Mi?.adFrameType||"none"}adFrameStatus(){return this.#Mi}get childFrames(){return[...this.#Di]}sameTargetParentFrame(){return this.#Si}crossTargetParentFrame(){if(!this.crossTargetParentFrameId)return null;const e=this.#Un.target().parentTarget();if(e?.type()!==B.Frame)return null;const t=e.model(Kn);return t&&t.framesInternal.get(this.crossTargetParentFrameId)||null}parentFrame(){return this.sameTargetParentFrame()||this.crossTargetParentFrame()}isMainFrame(){return!this.#Si}isOutermostFrame(){return this.#Un.target().parentTarget()?.type()!==B.Frame&&!this.#Si&&!this.crossTargetParentFrameId}isPrimaryFrame(){return!this.#Si&&this.#Un.target()===z.instance().primaryPageTarget()}removeChildFrame(e,t){this.#Di.delete(e),e.remove(t)}removeChildFrames(){const e=this.#Di;this.#Di=new Set;for(const t of e)t.remove(!1)}remove(e){this.removeChildFrames(),this.#Un.framesInternal.delete(this.id),this.#Un.dispatchEventToListeners(Wn.FrameDetached,{frame:this,isSwap:e})}addResource(e){this.resourcesMap.get(e.url)!==e&&(this.resourcesMap.set(e.url,e),this.#Un.dispatchEventToListeners(Wn.ResourceAdded,e))}addRequest(e){let t=this.resourcesMap.get(e.url());t&&t.request===e||(t=new Un(this.#Un,e,e.url(),e.documentURL,e.frameId,e.loaderId,e.resourceType(),e.mimeType,null,null),this.resourcesMap.set(t.url,t),this.#Un.dispatchEventToListeners(Wn.ResourceAdded,t))}resources(){return Array.from(this.resourcesMap.values())}resourceForURL(e){const t=this.resourcesMap.get(e);if(t)return t;for(const t of this.#Di){const r=t.resourceForURL(e);if(r)return r}return null}callForFrameResources(e){for(const t of this.resourcesMap.values())if(e(t))return!0;for(const t of this.#Di)if(t.callForFrameResources(e))return!0;return!1}displayName(){if(this.isOutermostFrame())return n.i18n.lockedString("top");const t=new e.ParsedURL.ParsedURL(this.#Zs).displayName;return t?this.#h?this.#h+" ("+t+")":t:n.i18n.lockedString("iframe")}async getOwnerDeferredDOMNode(){const e=this.parentFrame();return e?e.resourceTreeModel().domModel().getOwnerNodeForFrame(this.#C):null}async getOwnerDOMNodeOrDocument(){const e=await this.getOwnerDeferredDOMNode();return e?e.resolvePromise():this.isOutermostFrame()?this.resourceTreeModel().domModel().requestDocument():null}async highlight(){const e=this.parentFrame(),t=this.resourceTreeModel().target().parentTarget(),r=async e=>{const t=await e.getOwnerNodeForFrame(this.#C);t&&e.overlayModel().highlightInOverlay({deferredNode:t,selectorList:""},"all",!0)};if(e)return r(e.resourceTreeModel().domModel());if(t?.type()===B.Frame){const e=t.model(Dn);if(e)return r(e)}const n=await this.resourceTreeModel().domModel().requestDocument();n&&this.resourceTreeModel().domModel().overlayModel().highlightInOverlay({node:n,selectorList:""},"all",!0)}async getPermissionsPolicyState(){const e=await this.resourceTreeModel().target().pageAgent().invoke_getPermissionsPolicyState({frameId:this.#C});return e.getError()?null:e.states}async getOriginTrials(){const e=await this.resourceTreeModel().target().pageAgent().invoke_getOriginTrials({frameId:this.#C});return e.getError()?[]:e.originTrials}setCreationStackTrace(e){this.#Ai=e.creationStackTrace,this.#Oi=e.creationStackTraceTarget}setBackForwardCacheDetails(e){this.backForwardCacheDetails.restoredFromCache=!1,this.backForwardCacheDetails.explanations=e.notRestoredExplanations,this.backForwardCacheDetails.explanationsTree=e.notRestoredExplanationsTree}getResourcesMap(){return this.resourcesMap}}class $n{#Dr;constructor(e){this.#Dr=e}backForwardCacheNotUsed(e){this.#Dr.onBackForwardCacheNotUsed(e)}domContentEventFired({timestamp:e}){this.#Dr.dispatchEventToListeners(Wn.DOMContentLoaded,e)}loadEventFired({timestamp:e}){this.#Dr.dispatchEventToListeners(Wn.Load,{resourceTreeModel:this.#Dr,loadTime:e})}lifecycleEvent({frameId:e,name:t}){this.#Dr.dispatchEventToListeners(Wn.LifecycleEvent,{frameId:e,name:t})}frameAttached({frameId:e,parentFrameId:t,stack:r}){this.#Dr.frameAttached(e,t,r)}frameNavigated({frame:e,type:t}){this.#Dr.frameNavigated(e,t)}documentOpened({frame:e}){this.#Dr.documentOpened(e)}frameDetached({frameId:e,reason:t}){this.#Dr.frameDetached(e,"swap"===t)}frameStartedLoading({}){}frameStoppedLoading({}){}frameRequestedNavigation({}){}frameScheduledNavigation({}){}frameClearedScheduledNavigation({}){}navigatedWithinDocument({}){}frameResized(){this.#Dr.dispatchEventToListeners(Wn.FrameResized)}javascriptDialogOpening(e){this.#Dr.dispatchEventToListeners(Wn.JavaScriptDialogOpening,e),e.hasBrowserHandler||this.#Dr.agent.invoke_handleJavaScriptDialog({accept:!1})}javascriptDialogClosed({}){}screencastFrame({}){}screencastVisibilityChanged({}){}interstitialShown(){this.#Dr.isInterstitialShowing=!0,this.#Dr.dispatchEventToListeners(Wn.InterstitialShown)}interstitialHidden(){this.#Dr.isInterstitialShowing=!1,this.#Dr.dispatchEventToListeners(Wn.InterstitialHidden)}windowOpen({}){}compilationCacheProduced({}){}fileChooserOpened({}){}downloadWillBegin({}){}downloadProgress(){}}h.register(Kn,{capabilities:2,autostart:!0,early:!0});var Xn=Object.freeze({__proto__:null,ResourceTreeModel:Kn,get Events(){return Wn},ResourceTreeFrame:Qn,PageDispatcher:$n});class Jn extends h{#Ni;#Fi;#Bi;#Hi;constructor(t){super(t),this.#Bi=new e.Throttler.Throttler(300),this.#Ni=new Map,this.#Fi=new Map,this.#Hi=new Map,t.model(Kn)?.addEventListener(Wn.PrimaryPageChanged,this.#Ui,this),t.model(X)?.addEventListener(J.ResponseReceived,this.#_i,this),t.model(X)?.addEventListener(J.LoadingFinished,this.#qi,this)}addBlockedCookie(e,t){const r=e.key(),n=this.#Ni.get(r);this.#Ni.set(r,e),t?this.#Fi.set(e,t):this.#Fi.delete(e),n&&this.#Fi.delete(n)}removeBlockedCookie(e){this.#Ni.delete(e.key())}async#Ui(){this.#Ni.clear(),this.#Fi.clear(),await this.#zi()}getCookieToBlockedReasonsMap(){return this.#Fi}async#ji(e){const t=this.target().networkAgent(),r=new Map(await Promise.all(e.keysArray().map((r=>t.invoke_getCookies({urls:[...e.get(r).values()]}).then((({cookies:e})=>[r,e.map(F.fromProtocolCookie)])))))),n=this.#Vi(r);this.#Hi=r,n&&this.dispatchEventToListeners("CookieListUpdated")}async deleteCookie(e){await this.deleteCookies([e])}async clear(e,t){this.#Wi()||await this.#Gi();const r=e?this.#Hi.get(e)||[]:[...this.#Hi.values()].flat();if(r.push(...this.#Ni.values()),t){const e=r.filter((e=>e.matchesSecurityOrigin(t)));await this.deleteCookies(e)}else await this.deleteCookies(r)}async saveCookie(e){let t,r=e.domain();r.startsWith(".")||(r=""),e.expires()&&(t=Math.floor(Date.parse(`${e.expires()}`)/1e3));const n=o.Runtime.experiments.isEnabled("experimental-cookie-features"),s={name:e.name(),value:e.value(),url:e.url()||void 0,domain:r,path:e.path(),secure:e.secure(),httpOnly:e.httpOnly(),sameSite:e.sameSite(),expires:t,priority:e.priority(),partitionKey:e.partitionKey(),sourceScheme:n?e.sourceScheme():(i=e.sourceScheme(),"Unset"===i?i:void 0),sourcePort:n?e.sourcePort():void 0};var i;const a=await this.target().networkAgent().invoke_setCookie(s);return!(a.getError()||!a.success)&&(await this.#Gi(),a.success)}async getCookiesForDomain(e,t){this.#Wi()&&!t||await this.#Gi();return(this.#Hi.get(e)||[]).concat(Array.from(this.#Ni.values()))}async deleteCookies(e){const t=this.target().networkAgent();this.#Ni.clear(),this.#Fi.clear(),await Promise.all(e.map((e=>t.invoke_deleteCookies({name:e.name(),url:void 0,domain:e.domain(),path:e.path(),partitionKey:e.partitionKey()})))),await this.#Gi()}#Wi(){return Boolean(this.listeners?.size)}#Vi(e){if(e.size!==this.#Hi.size)return!0;for(const[t,r]of e){if(!this.#Hi.has(t))return!0;const e=this.#Hi.get(t)||[];if(r.length!==e.length)return!0;const n=e=>e.key()+" "+e.value(),s=new Set(e.map(n));for(const e of r)if(!s.has(n(e)))return!0}return!1}#Gi(){return this.#Bi.schedule((()=>this.#zi()))}#zi(){const t=new s.MapUtilities.Multimap;const r=this.target().model(Kn);if(r){const n=r.mainFrame?.unreachableUrl();if(n){const r=e.ParsedURL.ParsedURL.fromString(n);r&&t.set(r.securityOrigin(),n)}r.forAllResources((function(r){const n=e.ParsedURL.ParsedURL.fromString(r.documentURL);return n&&t.set(n.securityOrigin(),r.url),!1}))}return this.#ji(t)}#_i(){this.#Wi()&&this.#Gi()}#qi(){this.#Wi()&&this.#Gi()}}h.register(Jn,{capabilities:16,autostart:!1});var Yn=Object.freeze({__proto__:null,CookieModel:Jn});class Zn{#Ki;#Qi;#$i;#Xi;#Ji;#Yi;#Zi;constructor(e){e&&(this.#Ki=e.toLowerCase().replace(/^\./,"")),this.#Qi=[],this.#Xi=0}static parseSetCookie(e,t){return new Zn(t).parseSetCookie(e)}getCookieAttribute(e){if(!e)return null;switch(e.toLowerCase()){case"domain":return"domain";case"expires":return"expires";case"max-age":return"max-age";case"httponly":return"http-only";case"name":return"name";case"path":return"path";case"samesite":return"same-site";case"secure":return"secure";case"value":return"value";case"priority":return"priority";case"sourceport":return"source-port";case"sourcescheme":return"source-scheme";case"partitioned":return"partitioned";default:return console.error("Failed getting cookie attribute: "+e),null}}cookies(){return this.#Qi}parseSetCookie(e){if(!this.initialize(e))return null;for(let e=this.extractKeyValue();e;e=this.extractKeyValue())this.#Ji?this.#Ji.addAttribute(this.getCookieAttribute(e.key),e.value):this.addCookie(e,1),this.advanceAndCheckCookieDelimiter()&&this.flushCookie();return this.flushCookie(),this.#Qi}initialize(e){return this.#$i=e,"string"==typeof e&&(this.#Qi=[],this.#Ji=null,this.#Yi="",this.#Xi=this.#$i.length,!0)}flushCookie(){this.#Ji&&(this.#Ji.setSize(this.#Xi-this.#$i.length-this.#Zi),this.#Ji.setCookieLine(this.#Yi.replace("\n",""))),this.#Ji=null,this.#Yi=""}extractKeyValue(){if(!this.#$i||!this.#$i.length)return null;const e=/^[ \t]*([^=;\n]+)[ \t]*(?:=[ \t]*([^;\n]*))?/.exec(this.#$i);if(!e)return console.error("Failed parsing cookie header before: "+this.#$i),null;const t=new es(e[1]&&e[1].trim(),e[2]&&e[2].trim(),this.#Xi-this.#$i.length);return this.#Yi+=e[0],this.#$i=this.#$i.slice(e[0].length),t}advanceAndCheckCookieDelimiter(){if(!this.#$i)return!1;const e=/^\s*[\n;]\s*/.exec(this.#$i);return!!e&&(this.#Yi+=e[0],this.#$i=this.#$i.slice(e[0].length),null!==e[0].match("\n"))}addCookie(e,t){this.#Ji&&this.#Ji.setSize(e.position-this.#Zi),this.#Ji="string"==typeof e.value?new F(e.key,e.value,t):new F("",e.key,t),this.#Ki&&this.#Ji.addAttribute("domain",this.#Ki),this.#Zi=e.position,this.#Qi.push(this.#Ji)}}class es{key;value;position;constructor(e,t,r){this.key=e,this.value=t,this.position=r}}var ts=Object.freeze({__proto__:null,CookieParser:Zn});class rs{#eo;#to;#ro=!1;#no="";#so="";#io="";#oo="";constructor(e,t){this.#eo=e,this.#to=new ns(this.#ao.bind(this),t)}async addBase64Chunk(e){await this.#to.addBase64Chunk(e)}#ao(e){let t=0;for(let r=0;r<e.length;++r)this.#ro&&"\n"===e[r]?(this.#ro=!1,++t):(this.#ro=!1,"\r"!==e[r]&&"\n"!==e[r]||(this.#no+=e.substring(t,r),this.#lo(),this.#no="",t=r+1,this.#ro="\r"===e[r]));this.#no+=e.substring(t)}#lo(){if(0===this.#no.length){if(this.#io.length>0){const e=this.#io.slice(0,-1);this.#eo(this.#oo||"message",e,this.#so),this.#io=""}return void(this.#oo="")}let e,t=this.#no.indexOf(":");t<0?(t=this.#no.length,e=t):(e=t+1,e<this.#no.length&&" "===this.#no[e]&&++e);const r=this.#no.substring(0,t);"event"!==r?("data"===r&&(this.#io+=this.#no.substring(e),this.#io+="\n"),"id"===r&&(this.#so=this.#no.substring(e))):this.#oo=this.#no.substring(e)}}class ns{#to;#do;constructor(e,t){this.#to=new TextDecoderStream(t),this.#do=this.#to.writable.getWriter(),this.#to.readable.pipeTo(new WritableStream({write:e}))}async addBase64Chunk(e){const t=window.atob(e),r=Uint8Array.from(t,(e=>e.codePointAt(0)));await this.#do.ready,await this.#do.write(r)}}var ss=Object.freeze({__proto__:null,ServerSentEventsParser:rs});class is{#co;#ho;#uo=0;#go=[];constructor(e,t){this.#co=e,t&&(this.#uo=e.pseudoWallTime(e.startTime),this.#ho=new rs(this.#po.bind(this),e.charset()??void 0),this.#co.requestStreamingContent().then((t=>{r.StreamingContentData.isError(t)||(this.#ho?.addBase64Chunk(t.content().base64),t.addEventListener("ChunkAdded",(({data:{chunk:t}})=>{this.#uo=e.pseudoWallTime(e.endTime),this.#ho?.addBase64Chunk(t)})))})))}get eventSourceMessages(){return this.#go}onProtocolEventSourceMessageReceived(e,t,r,n){this.#mo({eventName:e,eventId:r,data:t,time:n})}#po(e,t,r){this.#mo({eventName:e,eventId:r,data:t,time:this.#uo})}#mo(e){this.#go.push(e),this.#co.dispatchEventToListeners(fs.EventSourceMessageAdded,e)}}const os={deprecatedSyntaxFoundPleaseUse:"Deprecated syntax found. Please use: <name>;dur=<duration>;desc=<description>",duplicateParameterSIgnored:'Duplicate parameter "{PH1}" ignored.',noValueFoundForParameterS:'No value found for parameter "{PH1}".',unrecognizedParameterS:'Unrecognized parameter "{PH1}".',extraneousTrailingCharacters:"Extraneous trailing characters.",unableToParseSValueS:'Unable to parse "{PH1}" value "{PH2}".'},as=n.i18n.registerUIStrings("core/sdk/ServerTiming.ts",os),ls=n.i18n.getLocalizedString.bind(void 0,as),ds={deprecratedSyntax:()=>ls(os.deprecatedSyntaxFoundPleaseUse),duplicateParameter:e=>ls(os.duplicateParameterSIgnored,{PH1:e}),noValueFoundForParameter:e=>ls(os.noValueFoundForParameterS,{PH1:e}),unrecognizedParameter:e=>ls(os.unrecognizedParameterS,{PH1:e}),extraneousTrailingCharacters:()=>ls(os.extraneousTrailingCharacters),unableToParseValue:(e,t)=>ls(os.unableToParseSValueS,{PH1:e,PH2:t})};class cs extends s.ServerTiming.ServerTiming{static parseHeaders(e){return s.ServerTiming.ServerTiming.parseHeaders(e,ds)}static createFromHeaderValue(e){return s.ServerTiming.ServerTiming.createFromHeaderValue(e,ds)}static getParserForParameter(e){return s.ServerTiming.ServerTiming.getParserForParameter(e,ds)}}var hs=Object.freeze({__proto__:null,ServerTiming:cs});const us={binary:"(binary)",secureOnly:'This cookie was blocked because it had the "`Secure`" attribute and the connection was not secure.',notOnPath:"This cookie was blocked because its path was not an exact match for or a superdirectory of the request url's path.",domainMismatch:"This cookie was blocked because neither did the request URL's domain exactly match the cookie's domain, nor was the request URL's domain a subdomain of the cookie's Domain attribute value.",sameSiteStrict:'This cookie was blocked because it had the "`SameSite=Strict`" attribute and the request was made from a different site. This includes top-level navigation requests initiated by other sites.',sameSiteLax:'This cookie was blocked because it had the "`SameSite=Lax`" attribute and the request was made from a different site and was not initiated by a top-level navigation.',sameSiteUnspecifiedTreatedAsLax:'This cookie didn\'t specify a "`SameSite`" attribute when it was stored and was defaulted to "SameSite=Lax," and was blocked because the request was made from a different site and was not initiated by a top-level navigation. The cookie had to have been set with "`SameSite=None`" to enable cross-site usage.',sameSiteNoneInsecure:'This cookie was blocked because it had the "`SameSite=None`" attribute but was not marked "Secure". Cookies without SameSite restrictions must be marked "Secure" and sent over a secure connection.',userPreferences:"This cookie was blocked due to user preferences.",thirdPartyPhaseout:"This cookie was blocked either because of Chrome flags or browser configuration. Learn more in the Issues panel.",unknownError:"An unknown error was encountered when trying to send this cookie.",schemefulSameSiteStrict:'This cookie was blocked because it had the "`SameSite=Strict`" attribute but the request was cross-site. This includes top-level navigation requests initiated by other sites. This request is considered cross-site because the URL has a different scheme than the current site.',schemefulSameSiteLax:'This cookie was blocked because it had the "`SameSite=Lax`" attribute but the request was cross-site and was not initiated by a top-level navigation. This request is considered cross-site because the URL has a different scheme than the current site.',schemefulSameSiteUnspecifiedTreatedAsLax:'This cookie didn\'t specify a "`SameSite`" attribute when it was stored, was defaulted to "`SameSite=Lax"`, and was blocked because the request was cross-site and was not initiated by a top-level navigation. This request is considered cross-site because the URL has a different scheme than the current site.',samePartyFromCrossPartyContext:"This cookie was blocked because it had the \"`SameParty`\" attribute but the request was cross-party. The request was considered cross-party because the domain of the resource's URL and the domains of the resource's enclosing frames/documents are neither owners nor members in the same First-Party Set.",nameValuePairExceedsMaxSize:"This cookie was blocked because it was too large. The combined size of the name and value must be less than or equal to 4096 characters.",thisSetcookieWasBlockedDueToUser:"This attempt to set a cookie via a `Set-Cookie` header was blocked due to user preferences.",thisSetcookieWasBlockedDueThirdPartyPhaseout:"Setting this cookie was blocked either because of Chrome flags or browser configuration. Learn more in the Issues panel.",thisSetcookieHadInvalidSyntax:"This `Set-Cookie` header had invalid syntax.",thisSetcookieHadADisallowedCharacter:"This `Set-Cookie` header contained a disallowed character (a forbidden ASCII control character, or the tab character if it appears in the middle of the cookie name, value, an attribute name, or an attribute value).",theSchemeOfThisConnectionIsNot:"The scheme of this connection is not allowed to store cookies.",anUnknownErrorWasEncounteredWhenTrying:"An unknown error was encountered when trying to store this cookie.",thisSetcookieWasBlockedBecauseItHadTheSamesiteStrictLax:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "{PH1}" attribute but came from a cross-site response which was not the response to a top-level navigation. This response is considered cross-site because the URL has a different scheme than the current site.',thisSetcookieDidntSpecifyASamesite:'This `Set-Cookie` header didn\'t specify a "`SameSite`" attribute, was defaulted to "`SameSite=Lax"`, and was blocked because it came from a cross-site response which was not the response to a top-level navigation. This response is considered cross-site because the URL has a different scheme than the current site.',thisSetcookieWasBlockedBecauseItHadTheSameparty:"This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the \"`SameParty`\" attribute but the request was cross-party. The request was considered cross-party because the domain of the resource's URL and the domains of the resource's enclosing frames/documents are neither owners nor members in the same First-Party Set.",thisSetcookieWasBlockedBecauseItHadTheSamepartyAttribute:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "`SameParty`" attribute but also had other conflicting attributes. Chrome requires cookies that use the "`SameParty`" attribute to also have the "Secure" attribute, and to not be restricted to "`SameSite=Strict`".',blockedReasonSecureOnly:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "Secure" attribute but was not received over a secure connection.',blockedReasonSameSiteStrictLax:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "{PH1}" attribute but came from a cross-site response which was not the response to a top-level navigation.',blockedReasonSameSiteUnspecifiedTreatedAsLax:'This `Set-Cookie` header didn\'t specify a "`SameSite`" attribute and was defaulted to "`SameSite=Lax,`" and was blocked because it came from a cross-site response which was not the response to a top-level navigation. The `Set-Cookie` had to have been set with "`SameSite=None`" to enable cross-site usage.',blockedReasonSameSiteNoneInsecure:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it had the "`SameSite=None`" attribute but did not have the "Secure" attribute, which is required in order to use "`SameSite=None`".',blockedReasonOverwriteSecure:"This attempt to set a cookie via a `Set-Cookie` header was blocked because it was not sent over a secure connection and would have overwritten a cookie with the Secure attribute.",blockedReasonInvalidDomain:"This attempt to set a cookie via a `Set-Cookie` header was blocked because its Domain attribute was invalid with regards to the current host url.",blockedReasonInvalidPrefix:'This attempt to set a cookie via a `Set-Cookie` header was blocked because it used the "`__Secure-`" or "`__Host-`" prefix in its name and broke the additional rules applied to cookies with these prefixes as defined in `https://tools.ietf.org/html/draft-west-cookie-prefixes-05`.',thisSetcookieWasBlockedBecauseTheNameValuePairExceedsMaxSize:"This attempt to set a cookie via a `Set-Cookie` header was blocked because the cookie was too large. The combined size of the name and value must be less than or equal to 4096 characters.",setcookieHeaderIsIgnoredIn:"Set-Cookie header is ignored in response from url: {PH1}. The combined size of the name and value must be less than or equal to 4096 characters.",exemptionReasonUserSetting:"This cookie is allowed by user preference.",exemptionReasonTPCDMetadata:"This cookie is allowed by a third-party cookie deprecation trial grace period. Learn more: goo.gle/dt-grace.",exemptionReasonTPCDDeprecationTrial:"This cookie is allowed by third-party cookie deprecation trial. Learn more: goo.gle/ps-dt.",exemptionReasonTPCDHeuristics:"This cookie is allowed by third-party cookie heuristics. Learn more: goo.gle/hbe",exemptionReasonEnterprisePolicy:"This cookie is allowed by Chrome Enterprise policy. Learn more: goo.gle/ce-3pc",exemptionReasonStorageAccessAPI:"This cookie is allowed by the Storage Access API. Learn more: goo.gle/saa",exemptionReasonTopLevelStorageAccessAPI:"This cookie is allowed by the top-level Storage Access API. Learn more: goo.gle/saa-top",exemptionReasonCorsOptIn:"This cookie is allowed by CORS opt-in. Learn more: goo.gle/cors",exemptionReasonScheme:"This cookie is allowed by the top-level url scheme"},gs=n.i18n.registerUIStrings("core/sdk/NetworkRequest.ts",us),ps=n.i18n.getLocalizedString.bind(void 0,gs);class ms extends e.ObjectWrapper.ObjectWrapper{#fo;#bo;#ei;#ti;#ri;#yo;#vo;#ko;#Io;#wo;#So;#Co;#xo;#Ro;#To;#Mo;#Po;statusCode;statusText;requestMethod;requestTime;protocol;alternateProtocolUsage;mixedContentType;#Lo;#Eo;#Ao;#Oo;#Do;#No;#Fo;#Bo;#Ho;#Uo;#_o;#qo;#zo;#jo;#Vo;#Wo;#Go;#Ko;#Qo;#$o;#Xo;connectionId;connectionReused;hasNetworkData;#Jo;#Yo;#Zo;#ea;#ta;#ra;#na;#sa;#ia;#oa;#aa;localizedFailDescription;#Zs;#la;#da;#ue;#ca;#ha;#ua;#si;#ga;#li;#h;#pa;#ma;#fa;#ba;#ya;#va;#ka;#Ia;#wa;#Sa;#Ca;#xa;#Ra;#Ta;#Ma;#Pa;#La;#Ea;#Aa;#Oa;#Da;#Na;#Fa;#Ba;#Ha;#Ua;#_a;#qa=new Map;#za;#ja;#Va;responseReceivedPromise;responseReceivedPromiseResolve;constructor(t,r,n,s,i,o,a,l){super(),this.#fo=t,this.#bo=r,this.setUrl(n),this.#ei=s,this.#ti=i,this.#ri=o,this.#vo=a,this.#yo=l,this.#ko=null,this.#Io=null,this.#wo=null,this.#So=!1,this.#Co=null,this.#xo=-1,this.#Ro=-1,this.#To=-1,this.#Mo=void 0,this.#Po=void 0,this.statusCode=0,this.statusText="",this.requestMethod="",this.requestTime=0,this.protocol="",this.alternateProtocolUsage=void 0,this.mixedContentType="none",this.#Lo=null,this.#Eo=null,this.#Ao=null,this.#Oo=null,this.#Do=null,this.#No=e.ResourceType.resourceTypes.Other,this.#Fo=null,this.#Bo=null,this.#Ho=[],this.#Uo={},this.#_o="",this.#qo=[],this.#jo=[],this.#Vo=[],this.#Wo={},this.#Go="",this.#Ko="Unknown",this.#Qo=null,this.#$o="unknown",this.#Xo=null,this.connectionId="0",this.connectionReused=!1,this.hasNetworkData=!1,this.#Jo=null,this.#Yo=Promise.resolve(null),this.#Zo=!1,this.#ea=!1,this.#ta=[],this.#ra=[],this.#na=[],this.#sa=[],this.#aa=!1,this.#ia=null,this.#oa=null,this.localizedFailDescription=null,this.#Ua=null,this.#_a=!1,this.#za=!1,this.#ja=!1}static create(e,t,r,n,s,i,o){return new ms(e,e,t,r,n,s,i,o)}static createForWebSocket(e,t,r){return new ms(e,e,t,s.DevToolsPath.EmptyUrlString,null,null,r||null)}static createWithoutBackendRequest(e,t,r,n){return new ms(e,void 0,t,r,null,null,n)}identityCompare(e){const t=this.requestId(),r=e.requestId();return t>r?1:t<r?-1:0}requestId(){return this.#fo}backendRequestId(){return this.#bo}url(){return this.#Zs}isBlobRequest(){return e.ParsedURL.schemeIs(this.#Zs,"blob:")}setUrl(t){this.#Zs!==t&&(this.#Zs=t,this.#li=new e.ParsedURL.ParsedURL(t),this.#Fa=void 0,this.#Ba=void 0,this.#h=void 0,this.#pa=void 0)}get documentURL(){return this.#ei}get parsedURL(){return this.#li}get frameId(){return this.#ti}get loaderId(){return this.#ri}setRemoteAddress(e,t){this.#Go=e+":"+t,this.dispatchEventToListeners(fs.RemoteAddressChanged,this)}remoteAddress(){return this.#Go}remoteAddressSpace(){return this.#Ko}getResponseCacheStorageCacheName(){return this.#ya}setResponseCacheStorageCacheName(e){this.#ya=e}serviceWorkerResponseSource(){return this.#va}setServiceWorkerResponseSource(e){this.#va=e}setReferrerPolicy(e){this.#Qo=e}referrerPolicy(){return this.#Qo}securityState(){return this.#$o}setSecurityState(e){this.#$o=e}securityDetails(){return this.#Xo}securityOrigin(){return this.#li.securityOrigin()}setSecurityDetails(e){this.#Xo=e}get startTime(){return this.#Ro||-1}setIssueTime(e,t){this.#xo=e,this.#ka=t,this.#Ro=e}issueTime(){return this.#xo}pseudoWallTime(e){return this.#ka?this.#ka-this.#xo+e:e}get responseReceivedTime(){return this.#la||-1}set responseReceivedTime(e){this.#la=e}getResponseRetrievalTime(){return this.#Ia}setResponseRetrievalTime(e){this.#Ia=e}get endTime(){return this.#To||-1}set endTime(e){this.timing&&this.timing.requestTime?this.#To=Math.max(e,this.responseReceivedTime):(this.#To=e,this.#la>e&&(this.#la=e)),this.dispatchEventToListeners(fs.TimingChanged,this)}get duration(){return-1===this.#To||-1===this.#Ro?-1:this.#To-this.#Ro}get latency(){return-1===this.#la||-1===this.#Ro?-1:this.#la-this.#Ro}get resourceSize(){return this.#wa||0}set resourceSize(e){this.#wa=e}get transferSize(){return this.#da||0}increaseTransferSize(e){this.#da=(this.#da||0)+e}setTransferSize(e){this.#da=e}get finished(){return this.#ue}set finished(e){this.#ue!==e&&(this.#ue=e,e&&this.dispatchEventToListeners(fs.FinishedLoading,this))}get failed(){return this.#ca}set failed(e){this.#ca=e}get canceled(){return this.#ha}set canceled(e){this.#ha=e}get preserved(){return this.#ua}set preserved(e){this.#ua=e}blockedReason(){return this.#Mo}setBlockedReason(e){this.#Mo=e}corsErrorStatus(){return this.#Po}setCorsErrorStatus(e){this.#Po=e}wasBlocked(){return Boolean(this.#Mo)}cached(){return(Boolean(this.#Sa)||Boolean(this.#Ca))&&!this.#da}cachedInMemory(){return Boolean(this.#Sa)&&!this.#da}fromPrefetchCache(){return Boolean(this.#xa)}setFromMemoryCache(){this.#Sa=!0,this.#Pa=void 0}get fromDiskCache(){return this.#Ca}setFromDiskCache(){this.#Ca=!0}setFromPrefetchCache(){this.#xa=!0}fromEarlyHints(){return Boolean(this.#Ra)}setFromEarlyHints(){this.#Ra=!0}get fetchedViaServiceWorker(){return Boolean(this.#Ta)}set fetchedViaServiceWorker(e){this.#Ta=e}get serviceWorkerRouterInfo(){return this.#Ma}set serviceWorkerRouterInfo(e){this.#Ma=e}initiatedByServiceWorker(){const e=X.forRequest(this);return!!e&&e.target().type()===B.ServiceWorker}get timing(){return this.#Pa}set timing(e){if(!e||this.#Sa)return;this.#Ro=e.requestTime;const t=e.requestTime+e.receiveHeadersEnd/1e3;((this.#la||-1)<0||this.#la>t)&&(this.#la=t),this.#Ro>this.#la&&(this.#la=this.#Ro),this.#Pa=e,this.dispatchEventToListeners(fs.TimingChanged,this)}setConnectTimingFromExtraInfo(e){this.#Ro=e.requestTime,this.dispatchEventToListeners(fs.TimingChanged,this)}get mimeType(){return this.#si}set mimeType(t){if(this.#si=t,"text/event-stream"===t&&!this.#Va){const t=this.resourceType()!==e.ResourceType.resourceTypes.EventSource;this.#Va=new is(this,t)}}get displayName(){return this.#li.displayName}name(){return this.#h||this.parseNameAndPathFromURL(),this.#h}path(){return this.#pa||this.parseNameAndPathFromURL(),this.#pa}parseNameAndPathFromURL(){if(this.#li.isDataURL())this.#h=this.#li.dataURLDisplayName(),this.#pa="";else if(this.#li.isBlobURL())this.#h=this.#li.url,this.#pa="";else if(this.#li.isAboutBlank())this.#h=this.#li.url,this.#pa="";else{this.#pa=this.#li.host+this.#li.folderPathComponents;const t=X.forRequest(this),r=t?e.ParsedURL.ParsedURL.fromString(t.target().inspectedURL()):null;this.#pa=s.StringUtilities.trimURL(this.#pa,r?r.host:""),this.#li.lastPathComponent||this.#li.queryParams?this.#h=this.#li.lastPathComponent+(this.#li.queryParams?"?"+this.#li.queryParams:""):this.#li.folderPathComponents?(this.#h=this.#li.folderPathComponents.substring(this.#li.folderPathComponents.lastIndexOf("/")+1)+"/",this.#pa=this.#pa.substring(0,this.#pa.lastIndexOf("/"))):(this.#h=this.#li.host,this.#pa="")}}get folder(){let e=this.#li.path;const t=e.indexOf("?");-1!==t&&(e=e.substring(0,t));const r=e.lastIndexOf("/");return-1!==r?e.substring(0,r):""}get pathname(){return this.#li.path}resourceType(){return this.#No}setResourceType(e){this.#No=e}get domain(){return this.#li.host}get scheme(){return this.#li.scheme}getInferredStatusText(){return this.statusText||(e=this.statusCode,n.i18n.lockedString({100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"}[e]??""));var e}redirectSource(){return this.#ko}setRedirectSource(e){this.#ko=e}preflightRequest(){return this.#Io}setPreflightRequest(e){this.#Io=e}preflightInitiatorRequest(){return this.#wo}setPreflightInitiatorRequest(e){this.#wo=e}isPreflightRequest(){return null!==this.#vo&&void 0!==this.#vo&&"preflight"===this.#vo.type}redirectDestination(){return this.#Co}setRedirectDestination(e){this.#Co=e}requestHeaders(){return this.#Vo}setRequestHeaders(e){this.#Vo=e,this.dispatchEventToListeners(fs.RequestHeadersChanged)}requestHeadersText(){return this.#La}setRequestHeadersText(e){this.#La=e,this.dispatchEventToListeners(fs.RequestHeadersChanged)}requestHeaderValue(e){return this.#Wo[e]||(this.#Wo[e]=this.computeHeaderValue(this.requestHeaders(),e)),this.#Wo[e]}requestFormData(){return this.#Yo||(this.#Yo=X.requestPostData(this)),this.#Yo}setRequestFormData(e,t){this.#Yo=e&&null===t?null:Promise.resolve(t),this.#Jo=null}filteredProtocolName(){const e=this.protocol.toLowerCase();return"h2"===e?"http/2.0":e.replace(/^http\/2(\.0)?\+/,"http/2.0+")}requestHttpVersion(){const e=this.requestHeadersText();if(!e){const e=this.requestHeaderValue("version")||this.requestHeaderValue(":version");return e||this.filteredProtocolName()}const t=e.split(/\r\n/)[0].match(/(HTTP\/\d+\.\d+)$/);return t?t[1]:"HTTP/0.9"}get responseHeaders(){return this.#Ea||[]}set responseHeaders(e){this.#Ea=e,this.#Oa=void 0,this.#Na=void 0,this.#Da=void 0,this.#Uo={},this.dispatchEventToListeners(fs.ResponseHeadersChanged)}get earlyHintsHeaders(){return this.#Aa||[]}set earlyHintsHeaders(e){this.#Aa=e}get originalResponseHeaders(){return this.#qo}set originalResponseHeaders(e){this.#qo=e,this.#zo=void 0}get setCookieHeaders(){return this.#jo}set setCookieHeaders(e){this.#jo=e}get responseHeadersText(){return this.#_o}set responseHeadersText(e){this.#_o=e,this.dispatchEventToListeners(fs.ResponseHeadersChanged)}get sortedResponseHeaders(){return void 0!==this.#Oa?this.#Oa:(this.#Oa=this.responseHeaders.slice(),this.#Oa.sort((function(e,t){return s.StringUtilities.compare(e.name.toLowerCase(),t.name.toLowerCase())})))}get sortedOriginalResponseHeaders(){return void 0!==this.#zo?this.#zo:(this.#zo=this.originalResponseHeaders.slice(),this.#zo.sort((function(e,t){return s.StringUtilities.compare(e.name.toLowerCase(),t.name.toLowerCase())})))}get overrideTypes(){const e=[];return this.hasOverriddenContent&&e.push("content"),this.hasOverriddenHeaders()&&e.push("headers"),e}get hasOverriddenContent(){return this.#za}set hasOverriddenContent(e){this.#za=e}#Wa(e){const t=[];for(const r of e)t.length&&t[t.length-1].name===r.name?t[t.length-1].value+=`, ${r.value}`:t.push({name:r.name,value:r.value});return t}hasOverriddenHeaders(){if(!this.#qo.length)return!1;const e=this.#Wa(this.sortedResponseHeaders),t=this.#Wa(this.sortedOriginalResponseHeaders);if(e.length!==t.length)return!0;for(let r=0;r<e.length;r++){if(e[r].name.toLowerCase()!==t[r].name.toLowerCase())return!0;if(e[r].value!==t[r].value)return!0}return!1}responseHeaderValue(e){return e in this.#Uo||(this.#Uo[e]=this.computeHeaderValue(this.responseHeaders,e)),this.#Uo[e]}wasIntercepted(){return this.#_a}setWasIntercepted(e){this.#_a=e}setEarlyHintsHeaders(e){this.earlyHintsHeaders=e}get responseCookies(){if(!this.#Da)if(this.#Da=Zn.parseSetCookie(this.responseHeaderValue("Set-Cookie"),this.domain)||[],this.#ia)for(const e of this.#Da)e.partitioned()&&e.setPartitionKey(this.#ia.topLevelSite,this.#ia.hasCrossSiteAncestor);else if(this.#oa)for(const e of this.#Da)e.setPartitionKeyOpaque();return this.#Da}responseLastModified(){return this.responseHeaderValue("last-modified")}allCookiesIncludingBlockedOnes(){return[...this.includedRequestCookies().map((e=>e.cookie)),...this.responseCookies,...this.blockedRequestCookies().map((e=>e.cookie)),...this.blockedResponseCookies().map((e=>e.cookie))].filter((e=>Boolean(e)))}get serverTimings(){return void 0===this.#Na&&(this.#Na=cs.parseHeaders(this.responseHeaders)),this.#Na}queryString(){if(void 0!==this.#Fa)return this.#Fa;let e=null;const t=this.url(),r=t.indexOf("?");if(-1!==r){e=t.substring(r+1);const n=e.indexOf("#");-1!==n&&(e=e.substring(0,n))}return this.#Fa=e,this.#Fa}get queryParameters(){if(this.#Ba)return this.#Ba;const e=this.queryString();return e?(this.#Ba=this.parseParameters(e),this.#Ba):null}async parseFormParameters(){const e=this.requestContentType();if(!e)return null;if(e.match(/^application\/x-www-form-urlencoded\s*(;.*)?$/i)){const e=await this.requestFormData();return e?this.parseParameters(e):null}const t=e.match(/^multipart\/form-data\s*;\s*boundary\s*=\s*(\S+)\s*$/);if(!t)return null;const r=t[1];if(!r)return null;const n=await this.requestFormData();return n?this.parseMultipartFormDataParameters(n,r):null}formParameters(){return this.#Jo||(this.#Jo=this.parseFormParameters()),this.#Jo}responseHttpVersion(){const e=this.#_o;if(!e){const e=this.responseHeaderValue("version")||this.responseHeaderValue(":version");return e||this.filteredProtocolName()}const t=e.split(/\r\n/)[0].match(/^(HTTP\/\d+\.\d+)/);return t?t[1]:"HTTP/0.9"}parseParameters(e){return e.split("&").map((function(e){const t=e.indexOf("=");return-1===t?{name:e,value:""}:{name:e.substring(0,t),value:e.substring(t+1)}}))}parseMultipartFormDataParameters(e,t){const r=s.StringUtilities.escapeForRegExp(t),n=new RegExp('^\\r\\ncontent-disposition\\s*:\\s*form-data\\s*;\\s*name="([^"]*)"(?:\\s*;\\s*filename="([^"]*)")?(?:\\r\\ncontent-type\\s*:\\s*([^\\r\\n]*))?\\r\\n\\r\\n(.*)\\r\\n$',"is");return e.split(new RegExp(`--${r}(?:--s*$)?`,"g")).reduce((function(e,t){const[r,s,i,o,a]=t.match(n)||[];if(!r)return e;const l=i||o?ps(us.binary):a;return e.push({name:s,value:l}),e}),[])}computeHeaderValue(e,t){t=t.toLowerCase();const r=[];for(let n=0;n<e.length;++n)e[n].name.toLowerCase()===t&&r.push(e[n].value);if(r.length)return"set-cookie"===t?r.join("\n"):r.join(", ")}requestContentData(){return this.#Fo||(this.#Ha?this.#Fo=this.#Ha():this.#Fo=X.requestContentData(this)),this.#Fo}setContentDataProvider(e){console.assert(!this.#Fo,"contentData can only be set once."),this.#Ha=e}requestStreamingContent(){if(this.#Bo)return this.#Bo;const e=this.finished?this.requestContentData():X.streamResponseBody(this);return this.#Bo=e.then((e=>r.ContentData.ContentData.isError(e)?e:r.StreamingContentData.StreamingContentData.from(e))),this.#Bo}contentURL(){return this.#Zs}contentType(){return this.#No}async requestContent(){return r.ContentData.ContentData.asDeferredContent(await this.requestContentData())}async searchInContent(e,t,n){if(!this.#Ha)return X.searchInRequest(this,e,t,n);const s=await this.requestContentData();return r.ContentData.ContentData.isError(s)||!s.isTextContent?[]:r.TextUtils.performSearchInContentData(s,e,t,n)}isHttpFamily(){return Boolean(this.url().match(/^https?:/i))}requestContentType(){return this.requestHeaderValue("Content-Type")}hasErrorStatusCode(){return this.statusCode>=400}setInitialPriority(e){this.#Lo=e}initialPriority(){return this.#Lo}setPriority(e){this.#Eo=e}priority(){return this.#Eo||this.#Lo||null}setSignedExchangeInfo(e){this.#Ao=e}signedExchangeInfo(){return this.#Ao}setWebBundleInfo(e){this.#Oo=e}webBundleInfo(){return this.#Oo}setWebBundleInnerRequestInfo(e){this.#Do=e}webBundleInnerRequestInfo(){return this.#Do}async populateImageSource(e){const t=await this.requestContentData();if(r.ContentData.ContentData.isError(t))return;let n=t.asDataUrl();if(null===n&&!this.#ca){(this.responseHeaderValue("cache-control")||"").includes("no-cache")||(n=this.#Zs)}null!==n&&(e.src=n)}initiator(){return this.#vo||null}hasUserGesture(){return this.#yo??null}frames(){return this.#Ho}addProtocolFrameError(e,t){this.addFrame({type:bs.Error,text:e,time:this.pseudoWallTime(t),opCode:-1,mask:!1})}addProtocolFrame(e,t,r){const n=r?bs.Send:bs.Receive;this.addFrame({type:n,text:e.payloadData,time:this.pseudoWallTime(t),opCode:e.opcode,mask:e.mask})}addFrame(e){this.#Ho.push(e),this.dispatchEventToListeners(fs.WebsocketFrameAdded,e)}eventSourceMessages(){return this.#Va?.eventSourceMessages??[]}addEventSourceMessage(e,t,r,n){this.#Va?.onProtocolEventSourceMessageReceived(t,n,r,this.pseudoWallTime(e))}markAsRedirect(e){this.#So=!0,this.#fo=`${this.#bo}:redirected.${e}`}isRedirect(){return this.#So}setRequestIdForTest(e){this.#bo=e,this.#fo=e}charset(){return this.#ga??null}setCharset(e){this.#ga=e}addExtraRequestInfo(e){this.#ta=e.blockedRequestCookies,this.#ra=e.includedRequestCookies,this.setRequestHeaders(e.requestHeaders),this.#Zo=!0,this.setRequestHeadersText(""),this.#ma=e.clientSecurityState,this.setConnectTimingFromExtraInfo(e.connectTiming),this.#aa=e.siteHasCookieInOtherPartition??!1,this.#ja=this.#ta.some((e=>e.blockedReasons.includes("ThirdPartyPhaseout")))}hasExtraRequestInfo(){return this.#Zo}blockedRequestCookies(){return this.#ta}includedRequestCookies(){return this.#ra}hasRequestCookies(){return this.#ra.length>0||this.#ta.length>0}siteHasCookieInOtherPartition(){return this.#aa}static parseStatusTextFromResponseHeadersText(e){return e.split("\r")[0].split(" ").slice(2).join(" ")}addExtraResponseInfo(e){if(this.#na=e.blockedResponseCookies,e.exemptedResponseCookies&&(this.#sa=e.exemptedResponseCookies),this.#ia=e.cookiePartitionKey?e.cookiePartitionKey:null,this.#oa=e.cookiePartitionKeyOpaque||null,this.responseHeaders=e.responseHeaders,this.originalResponseHeaders=e.responseHeaders.map((e=>({...e}))),e.responseHeadersText){if(this.responseHeadersText=e.responseHeadersText,!this.requestHeadersText()){let e=`${this.requestMethod} ${this.parsedURL.path}`;this.parsedURL.queryParams&&(e+=`?${this.parsedURL.queryParams}`),e+=" HTTP/1.1\r\n";for(const{name:t,value:r}of this.requestHeaders())e+=`${t}: ${r}\r\n`;this.setRequestHeadersText(e)}this.statusText=ms.parseStatusTextFromResponseHeadersText(e.responseHeadersText)}this.#Ko=e.resourceIPAddressSpace,e.statusCode&&(this.statusCode=e.statusCode),this.#ea=!0;const t=X.forRequest(this);if(!t)return;for(const e of this.#na)if(e.blockedReasons.includes("NameValuePairExceedsMaxSize")){const e=ps(us.setcookieHeaderIsIgnoredIn,{PH1:this.url()});t.dispatchEventToListeners(J.MessageGenerated,{message:e,requestId:this.#fo,warning:!0})}const r=t.target().model(Jn);if(r){for(const e of this.#sa)r.removeBlockedCookie(e.cookie);for(const e of this.#na){const t=e.cookie;t&&(e.blockedReasons.includes("ThirdPartyPhaseout")&&(this.#ja=!0),r.addBlockedCookie(t,e.blockedReasons.map((e=>({attribute:vs(e),uiString:ys(e)})))))}}}hasExtraResponseInfo(){return this.#ea}blockedResponseCookies(){return this.#na}exemptedResponseCookies(){return this.#sa}nonBlockedResponseCookies(){const e=this.blockedResponseCookies().map((e=>e.cookieLine));return this.responseCookies.filter((t=>{const r=e.indexOf(t.getCookieLine());return-1===r||(e[r]=null,!1)}))}responseCookiesPartitionKey(){return this.#ia}responseCookiesPartitionKeyOpaque(){return this.#oa}redirectSourceSignedExchangeInfoHasNoErrors(){return null!==this.#ko&&null!==this.#ko.#Ao&&!this.#ko.#Ao.errors}clientSecurityState(){return this.#ma}setTrustTokenParams(e){this.#fa=e}trustTokenParams(){return this.#fa}setTrustTokenOperationDoneEvent(e){this.#ba=e,this.dispatchEventToListeners(fs.TrustTokenResultAdded)}trustTokenOperationDoneEvent(){return this.#ba}setIsSameSite(e){this.#Ua=e}isSameSite(){return this.#Ua}getAssociatedData(e){return this.#qa.get(e)||null}setAssociatedData(e,t){this.#qa.set(e,t)}deleteAssociatedData(e){this.#qa.delete(e)}hasThirdPartyCookiePhaseoutIssue(){return this.#ja}addDataReceivedEvent({timestamp:e,dataLength:t,encodedDataLength:n,data:s}){this.resourceSize+=t,-1!==n&&this.increaseTransferSize(n),this.endTime=e,s&&this.#Bo?.then((e=>{r.StreamingContentData.isError(e)||e.addChunk(s)}))}waitForResponseReceived(){if(this.responseReceivedPromise)return this.responseReceivedPromise;const{promise:e,resolve:t}=s.PromiseUtilities.promiseWithResolvers();return this.responseReceivedPromise=e,this.responseReceivedPromiseResolve=t,this.responseReceivedPromise}}var fs,bs;!function(e){e.FinishedLoading="FinishedLoading",e.TimingChanged="TimingChanged",e.RemoteAddressChanged="RemoteAddressChanged",e.RequestHeadersChanged="RequestHeadersChanged",e.ResponseHeadersChanged="ResponseHeadersChanged",e.WebsocketFrameAdded="WebsocketFrameAdded",e.EventSourceMessageAdded="EventSourceMessageAdded",e.TrustTokenResultAdded="TrustTokenResultAdded"}(fs||(fs={})),function(e){e.Send="send",e.Receive="receive",e.Error="error"}(bs||(bs={}));const ys=function(e){switch(e){case"SecureOnly":return ps(us.blockedReasonSecureOnly);case"SameSiteStrict":return ps(us.blockedReasonSameSiteStrictLax,{PH1:"SameSite=Strict"});case"SameSiteLax":return ps(us.blockedReasonSameSiteStrictLax,{PH1:"SameSite=Lax"});case"SameSiteUnspecifiedTreatedAsLax":return ps(us.blockedReasonSameSiteUnspecifiedTreatedAsLax);case"SameSiteNoneInsecure":return ps(us.blockedReasonSameSiteNoneInsecure);case"UserPreferences":return ps(us.thisSetcookieWasBlockedDueToUser);case"SyntaxError":return ps(us.thisSetcookieHadInvalidSyntax);case"SchemeNotSupported":return ps(us.theSchemeOfThisConnectionIsNot);case"OverwriteSecure":return ps(us.blockedReasonOverwriteSecure);case"InvalidDomain":return ps(us.blockedReasonInvalidDomain);case"InvalidPrefix":return ps(us.blockedReasonInvalidPrefix);case"UnknownError":return ps(us.anUnknownErrorWasEncounteredWhenTrying);case"SchemefulSameSiteStrict":return ps(us.thisSetcookieWasBlockedBecauseItHadTheSamesiteStrictLax,{PH1:"SameSite=Strict"});case"SchemefulSameSiteLax":return ps(us.thisSetcookieWasBlockedBecauseItHadTheSamesiteStrictLax,{PH1:"SameSite=Lax"});case"SchemefulSameSiteUnspecifiedTreatedAsLax":return ps(us.thisSetcookieDidntSpecifyASamesite);case"SamePartyFromCrossPartyContext":return ps(us.thisSetcookieWasBlockedBecauseItHadTheSameparty);case"SamePartyConflictsWithOtherAttributes":return ps(us.thisSetcookieWasBlockedBecauseItHadTheSamepartyAttribute);case"NameValuePairExceedsMaxSize":return ps(us.thisSetcookieWasBlockedBecauseTheNameValuePairExceedsMaxSize);case"DisallowedCharacter":return ps(us.thisSetcookieHadADisallowedCharacter);case"ThirdPartyPhaseout":return ps(us.thisSetcookieWasBlockedDueThirdPartyPhaseout)}return""},vs=function(e){switch(e){case"SecureOnly":case"OverwriteSecure":return"secure";case"SameSiteStrict":case"SameSiteLax":case"SameSiteUnspecifiedTreatedAsLax":case"SameSiteNoneInsecure":case"SchemefulSameSiteStrict":case"SchemefulSameSiteLax":case"SchemefulSameSiteUnspecifiedTreatedAsLax":return"same-site";case"InvalidDomain":return"domain";case"InvalidPrefix":return"name";case"SamePartyConflictsWithOtherAttributes":case"SamePartyFromCrossPartyContext":case"NameValuePairExceedsMaxSize":case"UserPreferences":case"ThirdPartyPhaseout":case"SyntaxError":case"SchemeNotSupported":case"UnknownError":case"DisallowedCharacter":return null}return null};var ks=Object.freeze({__proto__:null,NetworkRequest:ms,get Events(){return fs},get WebSocketFrameType(){return bs},cookieExemptionReasonToUiString:function(e){switch(e){case"UserSetting":return ps(us.exemptionReasonUserSetting);case"TPCDMetadata":return ps(us.exemptionReasonTPCDMetadata);case"TPCDDeprecationTrial":return ps(us.exemptionReasonTPCDDeprecationTrial);case"TPCDHeuristics":return ps(us.exemptionReasonTPCDHeuristics);case"EnterprisePolicy":return ps(us.exemptionReasonEnterprisePolicy);case"StorageAccess":return ps(us.exemptionReasonStorageAccessAPI);case"TopLevelStorageAccess":return ps(us.exemptionReasonTopLevelStorageAccessAPI);case"CorsOptIn":return ps(us.exemptionReasonCorsOptIn);case"Scheme":return ps(us.exemptionReasonScheme)}return""},cookieBlockedReasonToUiString:function(e){switch(e){case"SecureOnly":return ps(us.secureOnly);case"NotOnPath":return ps(us.notOnPath);case"DomainMismatch":return ps(us.domainMismatch);case"SameSiteStrict":return ps(us.sameSiteStrict);case"SameSiteLax":return ps(us.sameSiteLax);case"SameSiteUnspecifiedTreatedAsLax":return ps(us.sameSiteUnspecifiedTreatedAsLax);case"SameSiteNoneInsecure":return ps(us.sameSiteNoneInsecure);case"UserPreferences":return ps(us.userPreferences);case"UnknownError":return ps(us.unknownError);case"SchemefulSameSiteStrict":return ps(us.schemefulSameSiteStrict);case"SchemefulSameSiteLax":return ps(us.schemefulSameSiteLax);case"SchemefulSameSiteUnspecifiedTreatedAsLax":return ps(us.schemefulSameSiteUnspecifiedTreatedAsLax);case"SamePartyFromCrossPartyContext":return ps(us.samePartyFromCrossPartyContext);case"NameValuePairExceedsMaxSize":return ps(us.nameValuePairExceedsMaxSize);case"ThirdPartyPhaseout":return ps(us.thirdPartyPhaseout)}return""},setCookieBlockedReasonToUiString:ys,cookieBlockedReasonToAttribute:function(e){switch(e){case"SecureOnly":return"secure";case"NotOnPath":return"path";case"DomainMismatch":return"domain";case"SameSiteStrict":case"SameSiteLax":case"SameSiteUnspecifiedTreatedAsLax":case"SameSiteNoneInsecure":case"SchemefulSameSiteStrict":case"SchemefulSameSiteLax":case"SchemefulSameSiteUnspecifiedTreatedAsLax":return"same-site";case"SamePartyFromCrossPartyContext":case"NameValuePairExceedsMaxSize":case"UserPreferences":case"ThirdPartyPhaseout":case"UnknownError":return null}return null},setCookieBlockedReasonToAttribute:vs});class Is{#Ga;#C;#Ka;#Qa;#$a;#Xa;#Ja;#h;#Vt;#u;#Ya;#Za;#el;#tl;constructor(e,t){this.#Ga=e,this.#C=t.nodeId,e.setAXNodeForAXId(this.#C,this),t.backendDOMNodeId?(e.setAXNodeForBackendDOMNodeId(t.backendDOMNodeId,this),this.#Ka=t.backendDOMNodeId,this.#Qa=new En(e.target(),t.backendDOMNodeId)):(this.#Ka=null,this.#Qa=null),this.#$a=t.ignored,this.#$a&&"ignoredReasons"in t&&(this.#Xa=t.ignoredReasons),this.#Ja=t.role||null,this.#h=t.name||null,this.#Vt=t.description||null,this.#u=t.value||null,this.#Ya=t.properties||null,this.#tl=[...new Set(t.childIds)]||null,this.#Za=t.parentId||null,t.frameId&&!t.parentId?(this.#el=t.frameId,e.setRootAXNodeForFrameId(t.frameId,this)):this.#el=null}id(){return this.#C}accessibilityModel(){return this.#Ga}ignored(){return this.#$a}ignoredReasons(){return this.#Xa||null}role(){return this.#Ja||null}coreProperties(){const e=[];return this.#h&&e.push({name:"name",value:this.#h}),this.#Vt&&e.push({name:"description",value:this.#Vt}),this.#u&&e.push({name:"value",value:this.#u}),e}name(){return this.#h||null}description(){return this.#Vt||null}value(){return this.#u||null}properties(){return this.#Ya||null}parentNode(){return this.#Za?this.#Ga.axNodeForId(this.#Za):null}isDOMNode(){return Boolean(this.#Ka)}backendDOMNodeId(){return this.#Ka}deferredDOMNode(){return this.#Qa}highlightDOMNode(){const e=this.deferredDOMNode();e&&e.highlight()}children(){if(!this.#tl)return[];const e=[];for(const t of this.#tl){const r=this.#Ga.axNodeForId(t);r&&e.push(r)}return e}numChildren(){return this.#tl?this.#tl.length:0}hasOnlyUnloadedChildren(){return!(!this.#tl||!this.#tl.length)&&this.#tl.every((e=>null===this.#Ga.axNodeForId(e)))}hasUnloadedChildren(){return!(!this.#tl||!this.#tl.length)&&this.#tl.some((e=>null===this.#Ga.axNodeForId(e)))}getFrameId(){return this.#el||this.parentNode()?.getFrameId()||null}}class ws extends h{agent;#rl;#nl;#sl;#il;#ol;constructor(e){super(e),e.registerAccessibilityDispatcher(this),this.agent=e.accessibilityAgent(),this.resumeModel(),this.#rl=new Map,this.#nl=new Map,this.#sl=new Map,this.#il=new Map,this.#ol=null}clear(){this.#ol=null,this.#rl.clear(),this.#nl.clear(),this.#sl.clear()}async resumeModel(){await this.agent.invoke_enable()}async suspendModel(){await this.agent.invoke_disable()}async requestPartialAXTree(e){const{nodes:t}=await this.agent.invoke_getPartialAXTree({nodeId:e.id,fetchRelatives:!0});if(!t)return;const r=[];for(const e of t)r.push(new Is(this,e))}loadComplete({root:e}){this.clear(),this.#ol=new Is(this,e),this.dispatchEventToListeners("TreeUpdated",{root:this.#ol})}nodesUpdated({nodes:e}){this.createNodesFromPayload(e),this.dispatchEventToListeners("TreeUpdated",{})}createNodesFromPayload(e){return e.map((e=>new Is(this,e)))}async requestRootNode(e){if(e&&this.#sl.has(e))return this.#sl.get(e);if(!e&&this.#ol)return this.#ol;const{node:t}=await this.agent.invoke_getRootAXNode({frameId:e});return t?this.createNodesFromPayload([t])[0]:void 0}async requestAXChildren(e,t){const r=this.#rl.get(e);if(!r)throw Error("Cannot request children before parent");if(!r.hasUnloadedChildren())return r.children();const n=this.#il.get(e);if(n)await n;else{const r=this.agent.invoke_getChildAXNodes({id:e,frameId:t});this.#il.set(e,r);const n=await r;n.getError()||(this.createNodesFromPayload(n.nodes),this.#il.delete(e))}return r.children()}async requestAndLoadSubTreeToNode(e){const t=[];let r=this.axNodeForDOMNode(e);for(;r;){t.push(r);const e=r.parentNode();if(!e)return t;r=e}const{nodes:n}=await this.agent.invoke_getAXNodeAndAncestors({backendNodeId:e.backendNodeId()});if(!n)return null;return this.createNodesFromPayload(n)}axNodeForId(e){return this.#rl.get(e)||null}setRootAXNodeForFrameId(e,t){this.#sl.set(e,t)}axNodeForFrameId(e){return this.#sl.get(e)??null}setAXNodeForAXId(e,t){this.#rl.set(e,t)}axNodeForDOMNode(e){return e?this.#nl.get(e.backendNodeId())??null:null}setAXNodeForBackendDOMNodeId(e,t){this.#nl.set(e,t)}getAgent(){return this.agent}}h.register(ws,{capabilities:2,autostart:!1});var Ss=Object.freeze({__proto__:null,AccessibilityNode:Is,AccessibilityModel:ws});class Cs extends h{agent;#$r;#al;constructor(t){super(t),this.agent=t.autofillAgent(),this.#al=e.Settings.Settings.instance().createSetting("show-test-addresses-in-autofill-menu-on-event",!1),t.registerAutofillDispatcher(this),this.enable()}setTestAddresses(){this.agent.invoke_setAddresses({addresses:this.#al.get()?[{fields:[{name:"ADDRESS_HOME_COUNTRY",value:"US"},{name:"NAME_FULL",value:"Jon Stewart Doe"},{name:"NAME_FIRST",value:"Jon"},{name:"NAME_MIDDLE",value:"Stewart"},{name:"NAME_LAST",value:"Doe"},{name:"COMPANY_NAME",value:"Fake Company"},{name:"ADDRESS_HOME_LINE1",value:"1600 Fake Street"},{name:"ADDRESS_HOME_LINE2",value:"Apartment 1"},{name:"ADDRESS_HOME_ZIP",value:"94043"},{name:"ADDRESS_HOME_CITY",value:"Mountain View"},{name:"ADDRESS_HOME_STATE",value:"CA"},{name:"EMAIL_ADDRESS",value:"test@example.us"},{name:"PHONE_HOME_WHOLE_NUMBER",value:"+16019521325"}]},{fields:[{name:"ADDRESS_HOME_COUNTRY",value:"BR"},{name:"NAME_FULL",value:"Joo Souza Silva"},{name:"NAME_FIRST",value:"Joo"},{name:"NAME_LAST",value:"Souza Silva"},{name:"NAME_LAST_FIRST",value:"Souza"},{name:"NAME_LAST_SECOND",value:"Silva"},{name:"COMPANY_NAME",value:"Empresa Falsa"},{name:"ADDRESS_HOME_STREET_ADDRESS",value:"Rua Inexistente, 2000\nAndar 2, Apartamento 1"},{name:"ADDRESS_HOME_STREET_LOCATION",value:"Rua Inexistente, 2000"},{name:"ADDRESS_HOME_STREET_NAME",value:"Rua Inexistente"},{name:"ADDRESS_HOME_HOUSE_NUMBER",value:"2000"},{name:"ADDRESS_HOME_SUBPREMISE",value:"Andar 2, Apartamento 1"},{name:"ADDRESS_HOME_APT_NUM",value:"1"},{name:"ADDRESS_HOME_FLOOR",value:"2"},{name:"ADDRESS_HOME_APT",value:"Apartamento 1"},{name:"ADDRESS_HOME_APT_TYPE",value:"Apartamento"},{name:"ADDRESS_HOME_APT_NUM",value:"1"},{name:"ADDRESS_HOME_DEPENDENT_LOCALITY",value:"Santa Efignia"},{name:"ADDRESS_HOME_LANDMARK",value:"Prximo  estao Santa Efignia"},{name:"ADDRESS_HOME_OVERFLOW",value:"Andar 2, Apartamento 1"},{name:"ADDRESS_HOME_ZIP",value:"30260-080"},{name:"ADDRESS_HOME_CITY",value:"Belo Horizonte"},{name:"ADDRESS_HOME_STATE",value:"MG"},{name:"EMAIL_ADDRESS",value:"teste@exemplo.us"},{name:"PHONE_HOME_WHOLE_NUMBER",value:"+553121286800"}]},{fields:[{name:"ADDRESS_HOME_COUNTRY",value:"MX"},{name:"NAME_FULL",value:"Juan Francisco Garca Flores"},{name:"NAME_FIRST",value:"Juan Francisco"},{name:"NAME_LAST",value:"Garca Flores"},{name:"NAME_LAST_FIRST",value:"Garca"},{name:"NAME_LAST_SECOND",value:"Flores"},{name:"COMPANY_NAME",value:"Empresa Falsa"},{name:"ADDRESS_HOME_STREET_ADDRESS",value:"C. Falsa 445\nPiso 2, Apartamento 1\nEntre calle Volcn y calle Montes Blancos, cerca de la estacin de metro"},{name:"ADDRESS_HOME_STREET_LOCATION",value:"C. Falsa 445"},{name:"ADDRESS_HOME_STREET_NAME",value:"C. Falsa"},{name:"ADDRESS_HOME_HOUSE_NUMBER",value:"445"},{name:"ADDRESS_HOME_SUBPREMISE",value:"Piso 2, Apartamento 1"},{name:"ADDRESS_HOME_FLOOR",value:"2"},{name:"ADDRESS_HOME_APT",value:"Apartamento 1"},{name:"ADDRESS_HOME_APT_TYPE",value:"Apartamento"},{name:"ADDRESS_HOME_APT_NUM",value:"1"},{name:"ADDRESS_HOME_DEPENDENT_LOCALITY",value:"Lomas de Chapultepec"},{name:"ADDRESS_HOME_OVERFLOW",value:"Entre calle Volcn y calle Montes Celestes, cerca de la estacin de metro"},{name:"ADDRESS_HOME_BETWEEN_STREETS_OR_LANDMARK",value:"Entre calle Volcn y calle Montes Blancos, cerca de la estacin de metro"},{name:"ADDRESS_HOME_LANDMARK",value:"Cerca de la estacin de metro"},{name:"ADDRESS_HOME_BETWEEN_STREETS",value:"Entre calle Volcn y calle Montes Blancos"},{name:"ADDRESS_HOME_BETWEEN_STREETS_1",value:"calle Volcn"},{name:"ADDRESS_HOME_BETWEEN_STREETS_2",value:"calle Montes Blancos"},{name:"ADDRESS_HOME_ADMIN_LEVEL2",value:"Miguel Hidalgo"},{name:"ADDRESS_HOME_ZIP",value:"11001"},{name:"ADDRESS_HOME_CITY",value:"Ciudad de Mxico"},{name:"ADDRESS_HOME_STATE",value:"Distrito Federal"},{name:"EMAIL_ADDRESS",value:"ejemplo@ejemplo.mx"},{name:"PHONE_HOME_WHOLE_NUMBER",value:"+525553428400"}]},{fields:[{name:"ADDRESS_HOME_COUNTRY",value:"DE"},{name:"NAME_FULL",value:"Gottfried Wilhelm Leibniz"},{name:"NAME_FIRST",value:"Gottfried"},{name:"NAME_MIDDLE",value:"Wilhelm"},{name:"NAME_LAST",value:"Leibniz"},{name:"COMPANY_NAME",value:"Erfundenes Unternehmen"},{name:"ADDRESS_HOME_LINE1",value:"Erfundene Strae 33"},{name:"ADDRESS_HOME_LINE2",value:"Wohnung 1"},{name:"ADDRESS_HOME_ZIP",value:"80732"},{name:"ADDRESS_HOME_CITY",value:"Mnchen"},{name:"EMAIL_ADDRESS",value:"test@beispiel.de"},{name:"PHONE_HOME_WHOLE_NUMBER",value:"+4930303986300"}]}]:[]})}enable(){!o.Runtime.experiments.isEnabled("autofill-view")||this.#$r||a.InspectorFrontendHost.isUnderTest()||(this.agent.invoke_enable(),this.setTestAddresses(),this.#$r=!0)}disable(){this.#$r&&!a.InspectorFrontendHost.isUnderTest()&&(this.#$r=!1,this.agent.invoke_disable())}addressFormFilled(e){this.dispatchEventToListeners("AddressFormFilled",{autofillModel:this,event:e})}}h.register(Cs,{capabilities:2,autostart:!0});var xs=Object.freeze({__proto__:null,AutofillModel:Cs});class Rs{name;#ll;enabledInternal;constructor(e,t){this.#ll=e,this.name=t,this.enabledInternal=!1}category(){return this.#ll}enabled(){return this.enabledInternal}setEnabled(e){this.enabledInternal=e}}var Ts=Object.freeze({__proto__:null,CategorizedBreakpoint:Rs});class Ms{onMessage;#dl;#cl;#hl;#Nt;constructor(){this.onMessage=null,this.#dl=null,this.#cl="",this.#hl=0,this.#Nt=[a.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(a.InspectorFrontendHostAPI.Events.DispatchMessage,this.dispatchMessage,this),a.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(a.InspectorFrontendHostAPI.Events.DispatchMessageChunk,this.dispatchMessageChunk,this)]}setOnMessage(e){this.onMessage=e}setOnDisconnect(e){this.#dl=e}sendRawMessage(e){this.onMessage&&a.InspectorFrontendHost.InspectorFrontendHostInstance.sendMessageToBackend(e)}dispatchMessage(e){this.onMessage&&this.onMessage.call(null,e.data)}dispatchMessageChunk(e){const{messageChunk:t,messageSize:r}=e.data;r&&(this.#cl="",this.#hl=r),this.#cl+=t,this.#cl.length===this.#hl&&this.onMessage&&(this.onMessage.call(null,this.#cl),this.#cl="",this.#hl=0)}async disconnect(){const t=this.#dl;e.EventTarget.removeEventListeners(this.#Nt),this.#dl=null,this.onMessage=null,t&&t.call(null,"force disconnect")}}class Ps{#ul;onMessage;#dl;#gl;#pl;#ml;constructor(e,t){this.#ul=new WebSocket(e),this.#ul.onerror=this.onError.bind(this),this.#ul.onopen=this.onOpen.bind(this),this.#ul.onmessage=e=>{this.onMessage&&this.onMessage.call(null,e.data)},this.#ul.onclose=this.onClose.bind(this),this.onMessage=null,this.#dl=null,this.#gl=t,this.#pl=!1,this.#ml=[]}setOnMessage(e){this.onMessage=e}setOnDisconnect(e){this.#dl=e}onError(){this.#gl&&this.#gl.call(null),this.#dl&&this.#dl.call(null,"connection failed"),this.close()}onOpen(){if(this.#pl=!0,this.#ul){this.#ul.onerror=console.error;for(const e of this.#ml)this.#ul.send(e)}this.#ml=[]}onClose(){this.#gl&&this.#gl.call(null),this.#dl&&this.#dl.call(null,"websocket closed"),this.close()}close(e){this.#ul&&(this.#ul.onerror=null,this.#ul.onopen=null,this.#ul.onclose=e||null,this.#ul.onmessage=null,this.#ul.close(),this.#ul=null),this.#gl=null}sendRawMessage(e){this.#pl&&this.#ul?this.#ul.send(e):this.#ml.push(e)}disconnect(){return new Promise((e=>{this.close((()=>{this.#dl&&this.#dl.call(null,"force disconnect"),e()}))}))}}class Ls{onMessage;#dl;constructor(){this.onMessage=null,this.#dl=null}setOnMessage(e){this.onMessage=e}setOnDisconnect(e){this.#dl=e}sendRawMessage(e){window.setTimeout(this.respondWithError.bind(this,e),0)}respondWithError(e){const t=JSON.parse(e),r={message:"This is a stub connection, can't dispatch message.",code:l.InspectorBackend.DevToolsStubErrorCode,data:t};this.onMessage&&this.onMessage.call(null,{id:t.id,error:r})}async disconnect(){this.#dl&&this.#dl.call(null,"force disconnect"),this.#dl=null,this.onMessage=null}}class Es{#fl;#bl;onMessage;#dl;constructor(e,t){this.#fl=e,this.#bl=t,this.onMessage=null,this.#dl=null}setOnMessage(e){this.onMessage=e}setOnDisconnect(e){this.#dl=e}getOnDisconnect(){return this.#dl}sendRawMessage(e){const t=JSON.parse(e);t.sessionId||(t.sessionId=this.#bl),this.#fl.sendRawMessage(JSON.stringify(t))}getSessionId(){return this.#bl}async disconnect(){this.#dl&&this.#dl.call(null,"force disconnect"),this.#dl=null,this.onMessage=null}}function As(e){const t=o.Runtime.Runtime.queryParam("ws"),r=o.Runtime.Runtime.queryParam("wss");if(t||r){return new Ps(t?`ws://${t}`:`wss://${r}`,e)}return a.InspectorFrontendHost.InspectorFrontendHostInstance.isHostedMode()?new Ls:new Ms}var Os=Object.freeze({__proto__:null,MainConnection:Ms,WebSocketConnection:Ps,StubConnection:Ls,ParallelConnection:Es,initMainConnection:async function(e,t){l.InspectorBackend.Connection.setFactory(As.bind(null,t)),await e(),a.InspectorFrontendHost.InspectorFrontendHostInstance.connectionReady()}});const Ds={main:"Main"},Ns=n.i18n.registerUIStrings("core/sdk/ChildTargetManager.ts",Ds),Fs=n.i18n.getLocalizedString.bind(void 0,Ns);class Bs extends h{#yl;#vl;#kl;#Il=new Map;#wl=new Map;#Sl=new Map;#Cl=new Map;#xl=null;constructor(e){super(e),this.#yl=e.targetManager(),this.#vl=e,this.#kl=e.targetAgent(),e.registerTargetDispatcher(this);const t=this.#yl.browserTarget();t?t!==e&&t.targetAgent().invoke_autoAttachRelated({targetId:e.id(),waitForDebuggerOnStart:!0}):this.#kl.invoke_setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),e.parentTarget()?.type()===B.Frame||a.InspectorFrontendHost.isUnderTest()||(this.#kl.invoke_setDiscoverTargets({discover:!0}),this.#kl.invoke_setRemoteLocations({locations:[{host:"localhost",port:9229}]}))}static install(e){Bs.attachCallback=e,h.register(Bs,{capabilities:32,autostart:!0})}childTargets(){return Array.from(this.#wl.values())}async suspendModel(){await this.#kl.invoke_setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:!1,flatten:!0})}async resumeModel(){await this.#kl.invoke_setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0})}dispose(){for(const e of this.#wl.keys())this.detachedFromTarget({sessionId:e,targetId:void 0})}targetCreated({targetInfo:e}){this.#Il.set(e.targetId,e),this.fireAvailableTargetsChanged(),this.dispatchEventToListeners("TargetCreated",e)}targetInfoChanged({targetInfo:e}){this.#Il.set(e.targetId,e);const t=this.#Sl.get(e.targetId);if(t)if("prerender"!==t.targetInfo()?.subtype||e.subtype)t.updateTargetInfo(e);else{const r=t.model(Kn);t.updateTargetInfo(e),r&&r.mainFrame&&r.primaryPageChanged(r.mainFrame,"Activation"),t.setName(Fs(Ds.main))}this.fireAvailableTargetsChanged(),this.dispatchEventToListeners("TargetInfoChanged",e)}targetDestroyed({targetId:e}){this.#Il.delete(e),this.fireAvailableTargetsChanged(),this.dispatchEventToListeners("TargetDestroyed",e)}targetCrashed({targetId:e}){this.#Il.delete(e);const t=this.#Sl.get(e);t&&t.dispose("targetCrashed event from CDP"),this.fireAvailableTargetsChanged(),this.dispatchEventToListeners("TargetDestroyed",e)}fireAvailableTargetsChanged(){z.instance().dispatchEventToListeners("AvailableTargetsChanged",[...this.#Il.values()])}async getParentTargetId(){return this.#xl||(this.#xl=(await this.#vl.targetAgent().invoke_getTargetInfo({})).targetInfo.targetId),this.#xl}async getTargetInfo(){return(await this.#vl.targetAgent().invoke_getTargetInfo({})).targetInfo}async attachedToTarget({sessionId:t,targetInfo:r,waitingForDebugger:n}){if(this.#xl===r.targetId)return;let s=B.Browser,i="";if("worker"===r.type&&r.title&&r.title!==r.url)i=r.title;else if(!["page","iframe","webview"].includes(r.type)){if(["^chrome://print/$","^chrome://file-manager/","^chrome://feedback/","^chrome://.*\\.top-chrome/$","^chrome://view-cert/$","^devtools://"].some((e=>r.url.match(e))))s=B.Frame;else{const t=e.ParsedURL.ParsedURL.fromString(r.url);i=t?t.lastPathComponentWithFragment():"#"+ ++Bs.lastAnonymousTargetId}}"iframe"===r.type||"webview"===r.type||"background_page"===r.type||"app"===r.type||"popup_page"===r.type||"page"===r.type?s=B.Frame:"worker"===r.type?s=B.Worker:"worklet"===r.type?s=B.Worklet:"shared_worker"===r.type?s=B.SharedWorker:"shared_storage_worklet"===r.type?s=B.SharedStorageWorklet:"service_worker"===r.type?s=B.ServiceWorker:"auction_worklet"===r.type&&(s=B.AuctionWorklet);const o=this.#yl.createTarget(r.targetId,i,s,this.#vl,t,void 0,void 0,r);this.#wl.set(t,o),this.#Sl.set(o.id(),o),Bs.attachCallback&&await Bs.attachCallback({target:o,waitingForDebugger:n}),n&&o.runtimeAgent().invoke_runIfWaitingForDebugger()}detachedFromTarget({sessionId:e}){if(this.#Cl.has(e))this.#Cl.delete(e);else{const t=this.#wl.get(e);t&&(t.dispose("target terminated"),this.#wl.delete(e),this.#Sl.delete(t.id()))}}receivedMessageFromTarget({}){}async createParallelConnection(e){const t=await this.getParentTargetId(),{connection:r,sessionId:n}=await this.createParallelConnectionAndSessionForTarget(this.#vl,t);return r.setOnMessage(e),this.#Cl.set(n,r),{connection:r,sessionId:n}}async createParallelConnectionAndSessionForTarget(e,t){const r=e.targetAgent(),n=e.router(),s=(await r.invoke_attachToTarget({targetId:t,flatten:!0})).sessionId,i=new Es(n.connection(),s);return n.registerSession(e,s,i),i.setOnDisconnect((()=>{n.unregisterSession(s),r.invoke_detachFromTarget({sessionId:s})})),{connection:i,sessionId:s}}targetInfos(){return Array.from(this.#Il.values())}static lastAnonymousTargetId=0;static attachCallback}var Hs=Object.freeze({__proto__:null,ChildTargetManager:Bs});const Us={couldNotLoadContentForSS:"Could not load content for {PH1} ({PH2})"},_s=n.i18n.registerUIStrings("core/sdk/CompilerSourceMappingContentProvider.ts",Us),qs=n.i18n.getLocalizedString.bind(void 0,_s);var zs,js=Object.freeze({__proto__:null,CompilerSourceMappingContentProvider:class{#Rl;#Tl;#Ml;constructor(e,t,r){this.#Rl=e,this.#Tl=t,this.#Ml=r}contentURL(){return this.#Rl}contentType(){return this.#Tl}async requestContent(){const e=await this.requestContentData();return r.ContentData.ContentData.asDeferredContent(e)}async requestContentData(){try{const{content:e}=await tr.instance().loadResource(this.#Rl,this.#Ml);return new r.ContentData.ContentData(e,!1,this.#Tl.canonicalMimeType())}catch(e){const t=qs(Us.couldNotLoadContentForSS,{PH1:this.#Rl,PH2:e.message});return console.error(t),{error:t}}}async searchInContent(e,t,n){const s=await this.requestContentData();return r.TextUtils.performSearchInContentData(s,e,t,n)}}});!function(e){e.Result="result",e.Command="command",e.System="system",e.QueryObjectResult="queryObjectResult"}(zs||(zs={}));const Vs={profileD:"Profile {PH1}"},Ws=n.i18n.registerUIStrings("core/sdk/CPUProfilerModel.ts",Vs),Gs=n.i18n.getLocalizedString.bind(void 0,Ws);class Ks extends h{#Pl;#Ll;#El;#Al;#Ol;#Dl;registeredConsoleProfileMessages=[];constructor(e){super(e),this.#Pl=!1,this.#Ll=1,this.#El=new Map,this.#Al=e.profilerAgent(),this.#Ol=null,e.registerProfilerDispatcher(this),this.#Al.invoke_enable(),this.#Dl=e.model(rn)}runtimeModel(){return this.#Dl.runtimeModel()}debuggerModel(){return this.#Dl}consoleProfileStarted({id:e,location:t,title:r}){r||(r=Gs(Vs.profileD,{PH1:this.#Ll++}),this.#El.set(e,r));const n=this.createEventDataFrom(e,t,r);this.dispatchEventToListeners("ConsoleProfileStarted",n)}consoleProfileFinished({id:e,location:t,profile:r,title:n}){n||(n=this.#El.get(e),this.#El.delete(e));const s={...this.createEventDataFrom(e,t,n),cpuProfile:r};this.registeredConsoleProfileMessages.push(s),this.dispatchEventToListeners("ConsoleProfileFinished",s)}createEventDataFrom(e,t,r){const n=ln.fromPayload(this.#Dl,t);return{id:this.target().id()+"."+e,scriptLocation:n,title:r||"",cpuProfilerModel:this}}isRecordingProfile(){return this.#Pl}startRecording(){this.#Pl=!0;return this.#Al.invoke_setSamplingInterval({interval:100}),this.#Al.invoke_start()}stopRecording(){return this.#Pl=!1,this.#Al.invoke_stop().then((e=>e.profile||null))}startPreciseCoverage(e,t){this.#Ol=t;return this.#Al.invoke_startPreciseCoverage({callCount:!1,detailed:e,allowTriggeredUpdates:!0})}async takePreciseCoverage(){const e=await this.#Al.invoke_takePreciseCoverage();return{timestamp:e&&e.timestamp||0,coverage:e&&e.result||[]}}stopPreciseCoverage(){return this.#Ol=null,this.#Al.invoke_stopPreciseCoverage()}preciseCoverageDeltaUpdate({timestamp:e,occasion:t,result:r}){this.#Ol&&this.#Ol(e,t,r)}}h.register(Ks,{capabilities:4,autostart:!0});var Qs=Object.freeze({__proto__:null,CPUProfilerModel:Ks});class $s extends h{#Nl;constructor(e){super(e),e.registerLogDispatcher(this),this.#Nl=e.logAgent(),this.#Nl.invoke_enable(),a.InspectorFrontendHost.isUnderTest()||this.#Nl.invoke_startViolationsReport({config:[{name:"longTask",threshold:200},{name:"longLayout",threshold:30},{name:"blockedEvent",threshold:100},{name:"blockedParser",threshold:-1},{name:"handler",threshold:150},{name:"recurringHandler",threshold:50},{name:"discouragedAPIUse",threshold:-1}]})}entryAdded({entry:e}){this.dispatchEventToListeners("EntryAdded",{logModel:this,entry:e})}requestClear(){this.#Nl.invoke_clear()}}h.register($s,{capabilities:8,autostart:!0});var Xs=Object.freeze({__proto__:null,LogModel:$s});const Js={navigatedToS:"Navigated to {PH1}",bfcacheNavigation:"Navigation to {PH1} was restored from back/forward cache (see https://web.dev/bfcache/)",profileSStarted:"Profile ''{PH1}'' started.",profileSFinished:"Profile ''{PH1}'' finished.",failedToSaveToTempVariable:"Failed to save to temp variable."},Ys=n.i18n.registerUIStrings("core/sdk/ConsoleModel.ts",Js),Zs=n.i18n.getLocalizedString.bind(void 0,Ys);class ei extends h{#Fl;#Bl;#Hl;#Ul;#_l;#ql;#zl;#jl;constructor(t){super(t),this.#Fl=[],this.#Bl=new s.MapUtilities.Multimap,this.#Hl=new Map,this.#Ul=0,this.#_l=0,this.#ql=0,this.#zl=0,this.#jl=new WeakMap;const r=t.model(Kn);if(!r||r.cachedResourcesLoaded())return void this.initTarget(t);const n=r.addEventListener(Wn.CachedResourcesLoaded,(()=>{e.EventTarget.removeEventListeners([n]),this.initTarget(t)}))}initTarget(e){const t=[],r=e.model(Ks);r&&(t.push(r.addEventListener("ConsoleProfileStarted",this.consoleProfileStarted.bind(this,r))),t.push(r.addEventListener("ConsoleProfileFinished",this.consoleProfileFinished.bind(this,r))));const n=e.model(Kn);n&&e.parentTarget()?.type()!==B.Frame&&t.push(n.addEventListener(Wn.PrimaryPageChanged,this.primaryPageChanged,this));const s=e.model(_r);s&&(t.push(s.addEventListener(Hr.ExceptionThrown,this.exceptionThrown.bind(this,s))),t.push(s.addEventListener(Hr.ExceptionRevoked,this.exceptionRevoked.bind(this,s))),t.push(s.addEventListener(Hr.ConsoleAPICalled,this.consoleAPICalled.bind(this,s))),e.parentTarget()?.type()!==B.Frame&&t.push(s.debuggerModel().addEventListener(on.GlobalObjectCleared,this.clearIfNecessary,this)),t.push(s.addEventListener(Hr.QueryObjectRequested,this.queryObjectRequested.bind(this,s)))),this.#jl.set(e,t)}targetRemoved(t){const r=t.model(_r);r&&this.#Hl.delete(r),e.EventTarget.removeEventListeners(this.#jl.get(t)||[])}async evaluateCommandInConsole(t,r,n,s){const i=await t.evaluate({expression:n,objectGroup:"console",includeCommandLineAPI:s,silent:!1,returnByValue:!1,generatePreview:!0,replMode:!0,allowUnsafeEvalBlockedByCSP:!1},e.Settings.Settings.instance().moduleSetting("console-user-activation-eval").get(),!1);a.userMetrics.actionTaken(a.UserMetrics.Action.ConsoleEvaluated),"error"in i||(await e.Console.Console.instance().showPromise(),this.dispatchEventToListeners(ti.CommandEvaluated,{result:i.object,commandMessage:r,exceptionDetails:i.exceptionDetails}))}addCommandMessage(e,t){const r=new ni(e.runtimeModel,"javascript",null,t,{type:zs.Command});return r.setExecutionContextId(e.id),this.addMessage(r),r}addMessage(t){t.setPageLoadSequenceNumber(this.#zl),t.source===e.Console.FrontendMessageSource.ConsoleAPI&&"clear"===t.type&&this.clearIfNecessary(),this.#Fl.push(t),this.#Bl.set(t.timestamp,t);const r=t.runtimeModel(),n=t.getExceptionId();if(n&&r){let e=this.#Hl.get(r);e||(e=new Map,this.#Hl.set(r,e)),e.set(n,t)}this.incrementErrorWarningCount(t),this.dispatchEventToListeners(ti.MessageAdded,t)}exceptionThrown(e,t){const r=t.data,n=function(e){if(!e)return;return{requestId:e.requestId||void 0,issueId:e.issueId||void 0}}(r.details.exceptionMetaData),s=ni.fromException(e,r.details,void 0,r.timestamp,void 0,n);s.setExceptionId(r.details.exceptionId),this.addMessage(s)}exceptionRevoked(e,t){const r=t.data,n=this.#Hl.get(e),s=n?n.get(r):null;s&&(this.#_l--,s.level="verbose",this.dispatchEventToListeners(ti.MessageUpdated,s))}consoleAPICalled(t,r){const n=r.data;let s="info";"debug"===n.type?s="verbose":"error"===n.type||"assert"===n.type?s="error":"warning"===n.type?s="warning":"info"!==n.type&&"log"!==n.type||(s="info");let i="";n.args.length&&n.args[0].unserializableValue?i=n.args[0].unserializableValue:n.args.length&&("object"!=typeof n.args[0].value&&void 0!==n.args[0].value||null===n.args[0].value)?i=String(n.args[0].value):n.args.length&&n.args[0].description&&(i=n.args[0].description);const o=n.stackTrace&&n.stackTrace.callFrames.length?n.stackTrace.callFrames[0]:null,a={type:n.type,url:o?.url,line:o?.lineNumber,column:o?.columnNumber,parameters:n.args,stackTrace:n.stackTrace,timestamp:n.timestamp,executionContextId:n.executionContextId,context:n.context},l=new ni(t,e.Console.FrontendMessageSource.ConsoleAPI,s,i,a);for(const e of this.#Bl.get(l.timestamp).values())if(l.isEqual(e))return;this.addMessage(l)}queryObjectRequested(t,r){const{objects:n,executionContextId:s}=r.data,i={type:zs.QueryObjectResult,parameters:[n],executionContextId:s},o=new ni(t,e.Console.FrontendMessageSource.ConsoleAPI,"info","",i);this.addMessage(o)}clearIfNecessary(){e.Settings.Settings.instance().moduleSetting("preserve-console-log").get()||this.clear(),++this.#zl}primaryPageChanged(t){if(e.Settings.Settings.instance().moduleSetting("preserve-console-log").get()){const{frame:r}=t.data;r.backForwardCacheDetails.restoredFromCache?e.Console.Console.instance().log(Zs(Js.bfcacheNavigation,{PH1:r.url})):e.Console.Console.instance().log(Zs(Js.navigatedToS,{PH1:r.url}))}}consoleProfileStarted(e,t){const{data:r}=t;this.addConsoleProfileMessage(e,"profile",r.scriptLocation,Zs(Js.profileSStarted,{PH1:r.title}))}consoleProfileFinished(e,t){const{data:r}=t;this.addConsoleProfileMessage(e,"profileEnd",r.scriptLocation,Zs(Js.profileSFinished,{PH1:r.title}))}addConsoleProfileMessage(t,r,n,s){const i=n.script(),o=[{functionName:"",scriptId:n.scriptId,url:i?i.contentURL():"",lineNumber:n.lineNumber,columnNumber:n.columnNumber||0}];this.addMessage(new ni(t.runtimeModel(),e.Console.FrontendMessageSource.ConsoleAPI,"info",s,{type:r,stackTrace:{callFrames:o}}))}incrementErrorWarningCount(e){if("violation"!==e.source)switch(e.level){case"warning":this.#Ul++;break;case"error":this.#_l++}else this.#ql++}messages(){return this.#Fl}static allMessagesUnordered(){const e=[];for(const t of z.instance().targets()){const r=t.model(ei)?.messages()||[];e.push(...r)}return e}static requestClearMessages(){for(const e of z.instance().models($s))e.requestClear();for(const e of z.instance().models(_r))e.discardConsoleEntries();for(const e of z.instance().targets())e.model(ei)?.clear()}clear(){this.#Fl=[],this.#Bl.clear(),this.#Hl.clear(),this.#_l=0,this.#Ul=0,this.#ql=0,this.dispatchEventToListeners(ti.ConsoleCleared)}errors(){return this.#_l}static allErrors(){let e=0;for(const t of z.instance().targets())e+=t.model(ei)?.errors()||0;return e}warnings(){return this.#Ul}static allWarnings(){let e=0;for(const t of z.instance().targets())e+=t.model(ei)?.warnings()||0;return e}violations(){return this.#ql}static allViolations(){let e=0;for(const t of z.instance().targets())e+=t.model(ei)?.violations()||0;return e}async saveToTempVariable(t,r){if(!r||!t)return void a(null);const n=t,s=await n.globalObject("",!1);if("error"in s||Boolean(s.exceptionDetails)||!s.object)return void a("object"in s&&s.object||null);const i=s.object,o=await i.callFunction((function(e){const t="temp";let r=1;for(;t+r in this;)++r;const n=t+r;return this[n]=e,n}),[Ft.toCallArgument(r)]);if(i.release(),o.wasThrown||!o.object||"string"!==o.object.type)a(o.object||null);else{const e=o.object.value,t=this.addCommandMessage(n,e);this.evaluateCommandInConsole(n,t,e,!1)}function a(t){let r=Zs(Js.failedToSaveToTempVariable);t&&(r=r+" "+t.description),e.Console.Console.instance().error(r)}o.object&&o.object.release()}}var ti;function ri(e,t){if(!e!=!t)return!1;if(!e||!t)return!0;const r=e.callFrames,n=t.callFrames;if(r.length!==n.length)return!1;for(let e=0,t=r.length;e<t;++e)if(r[e].scriptId!==n[e].scriptId||r[e].functionName!==n[e].functionName||r[e].lineNumber!==n[e].lineNumber||r[e].columnNumber!==n[e].columnNumber)return!1;return ri(e.parent,t.parent)}!function(e){e.ConsoleCleared="ConsoleCleared",e.MessageAdded="MessageAdded",e.MessageUpdated="MessageUpdated",e.CommandEvaluated="CommandEvaluated"}(ti||(ti={}));class ni{#Jr;source;level;messageText;type;url;line;column;parameters;stackTrace;timestamp;#Vl;scriptId;workerId;context;#Wl=null;#zl=void 0;#Gl=void 0;#Kl;category;stackFrameWithBreakpoint=null;#Ql=null;constructor(e,t,r,n,s){if(this.#Jr=e,this.source=t,this.level=r,this.messageText=n,this.type=s?.type||"log",this.url=s?.url,this.line=s?.line||0,this.column=s?.column||0,this.parameters=s?.parameters,this.stackTrace=s?.stackTrace,this.timestamp=s?.timestamp||Date.now(),this.#Vl=s?.executionContextId||0,this.scriptId=s?.scriptId,this.workerId=s?.workerId,this.#Kl=s?.affectedResources,this.category=s?.category,!this.#Vl&&this.#Jr&&(this.scriptId?this.#Vl=this.#Jr.executionContextIdForScriptId(this.scriptId):this.stackTrace&&(this.#Vl=this.#Jr.executionContextForStackTrace(this.stackTrace))),s?.context){const e=s?.context.match(/[^#]*/);this.context=e?.[0]}if(this.stackTrace){const{callFrame:e,type:t}=ni.#$l(this.stackTrace);this.stackFrameWithBreakpoint=e,this.#Ql=t}}getAffectedResources(){return this.#Kl}setPageLoadSequenceNumber(e){this.#zl=e}static fromException(e,t,r,n,s,i){const o={type:r,url:s||t.url,line:t.lineNumber,column:t.columnNumber,parameters:t.exception?[Ft.fromLocalObject(t.text),t.exception]:void 0,stackTrace:t.stackTrace,timestamp:n,executionContextId:t.executionContextId,scriptId:t.scriptId,affectedResources:i};return new ni(e,"javascript","error",_r.simpleTextFromException(t),o)}runtimeModel(){return this.#Jr}target(){return this.#Jr?this.#Jr.target():null}setOriginatingMessage(e){this.#Wl=e,this.#Vl=e.#Vl}originatingMessage(){return this.#Wl}setExecutionContextId(e){this.#Vl=e}getExecutionContextId(){return this.#Vl}getExceptionId(){return this.#Gl}setExceptionId(e){this.#Gl=e}isGroupMessage(){return"startGroup"===this.type||"startGroupCollapsed"===this.type||"endGroup"===this.type}isGroupStartMessage(){return"startGroup"===this.type||"startGroupCollapsed"===this.type}isErrorOrWarning(){return"warning"===this.level||"error"===this.level}isGroupable(){const t="error"===this.level&&("javascript"===this.source||"network"===this.source);return this.source!==e.Console.FrontendMessageSource.ConsoleAPI&&this.type!==zs.Command&&this.type!==zs.Result&&this.type!==zs.System&&!t}groupCategoryKey(){return[this.source,this.level,this.type,this.#zl].join(":")}isEqual(e){if(!e)return!1;if(this.parameters){if(!e.parameters||this.parameters.length!==e.parameters.length)return!1;for(let t=0;t<e.parameters.length;++t){const r=e.parameters[t],n=this.parameters[t];if("string"==typeof r||"string"==typeof n)return!1;if("object"===r.type&&"error"!==r.subtype&&(!r.objectId||r.objectId!==n.objectId||e.timestamp!==this.timestamp))return!1;if(n.type!==r.type||n.value!==r.value||n.description!==r.description)return!1}}return this.runtimeModel()===e.runtimeModel()&&this.source===e.source&&this.type===e.type&&this.level===e.level&&this.line===e.line&&this.url===e.url&&this.scriptId===e.scriptId&&this.messageText===e.messageText&&this.#Vl===e.#Vl&&(t=this.#Kl,r=e.#Kl,t?.requestId===r?.requestId)&&ri(this.stackTrace,e.stackTrace);var t,r}get originatesFromLogpoint(){return"LOGPOINT"===this.#Ql}get originatesFromConditionalBreakpoint(){return"CONDITIONAL_BREAKPOINT"===this.#Ql}static#$l({callFrames:e}){const t=[pn,gn],r=e.findLastIndex((({url:e})=>t.includes(e)));if(-1===r||r===e.length-1)return{callFrame:null,type:null};const n=e[r].url===gn?"LOGPOINT":"CONDITIONAL_BREAKPOINT";return{callFrame:e[r+1],type:n}}}h.register(ei,{capabilities:4,autostart:!0});const si=new Map([["xml","xml"],["javascript","javascript"],["network","network"],[e.Console.FrontendMessageSource.ConsoleAPI,"console-api"],["storage","storage"],["appcache","appcache"],["rendering","rendering"],[e.Console.FrontendMessageSource.CSS,"css"],["security","security"],["deprecation","deprecation"],["worker","worker"],["violation","violation"],["intervention","intervention"],["recommendation","recommendation"],["other","other"],[e.Console.FrontendMessageSource.IssuePanel,"issue-panel"]]);var ii=Object.freeze({__proto__:null,ConsoleModel:ei,get Events(){return ti},ConsoleMessage:ni,MessageSourceDisplayName:si,get FrontendMessageType(){return zs}});class oi extends t.CPUProfileDataModel.CPUProfileDataModel{}var ai=Object.freeze({__proto__:null,CPUProfileDataModel:oi});class li extends h{#Xl;#Jl;#it;#Yl;#Zl;#ed;#td;#rd;#nd;#sd;constructor(t){super(t),this.#Xl=t.emulationAgent(),this.#Jl=t.deviceOrientationAgent(),this.#it=t.model(Rr),this.#Yl=t.model(Cn),this.#Yl&&this.#Yl.addEventListener("InspectModeWillBeToggled",(()=>{this.updateTouch()}),this);const r=e.Settings.Settings.instance().moduleSetting("java-script-disabled");r.addChangeListener((async()=>await this.#Xl.invoke_setScriptExecutionDisabled({value:r.get()}))),r.get()&&this.#Xl.invoke_setScriptExecutionDisabled({value:!0});const n=e.Settings.Settings.instance().moduleSetting("emulation.touch");n.addChangeListener((()=>{const e=n.get();this.overrideEmulateTouch("force"===e)}));const s=e.Settings.Settings.instance().moduleSetting("emulation.idle-detection");s.addChangeListener((async()=>{const e=s.get();if("none"===e)return void await this.clearIdleOverride();const t=JSON.parse(e);await this.setIdleOverride(t)}));const i=e.Settings.Settings.instance().moduleSetting("emulated-css-media"),o=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-color-gamut"),a=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-color-scheme"),l=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-forced-colors"),d=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-contrast"),c=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-reduced-data"),h=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-reduced-transparency"),u=e.Settings.Settings.instance().moduleSetting("emulated-css-media-feature-prefers-reduced-motion");this.#Zl=new Map([["type",i.get()],["color-gamut",o.get()],["prefers-color-scheme",a.get()],["forced-colors",l.get()],["prefers-contrast",d.get()],["prefers-reduced-data",c.get()],["prefers-reduced-motion",u.get()],["prefers-reduced-transparency",h.get()]]),i.addChangeListener((()=>{this.#Zl.set("type",i.get()),this.updateCssMedia()})),o.addChangeListener((()=>{this.#Zl.set("color-gamut",o.get()),this.updateCssMedia()})),a.addChangeListener((()=>{this.#Zl.set("prefers-color-scheme",a.get()),this.updateCssMedia()})),l.addChangeListener((()=>{this.#Zl.set("forced-colors",l.get()),this.updateCssMedia()})),d.addChangeListener((()=>{this.#Zl.set("prefers-contrast",d.get()),this.updateCssMedia()})),c.addChangeListener((()=>{this.#Zl.set("prefers-reduced-data",c.get()),this.updateCssMedia()})),u.addChangeListener((()=>{this.#Zl.set("prefers-reduced-motion",u.get()),this.updateCssMedia()})),h.addChangeListener((()=>{this.#Zl.set("prefers-reduced-transparency",h.get()),this.updateCssMedia()})),this.updateCssMedia();const g=e.Settings.Settings.instance().moduleSetting("emulate-auto-dark-mode");g.addChangeListener((()=>{const e=g.get();a.setDisabled(e),a.set(e?"dark":""),this.emulateAutoDarkMode(e)})),g.get()&&(a.setDisabled(!0),a.set("dark"),this.emulateAutoDarkMode(!0));const p=e.Settings.Settings.instance().moduleSetting("emulated-vision-deficiency");p.addChangeListener((()=>this.emulateVisionDeficiency(p.get()))),p.get()&&this.emulateVisionDeficiency(p.get());const m=e.Settings.Settings.instance().moduleSetting("local-fonts-disabled");m.addChangeListener((()=>this.setLocalFontsDisabled(m.get()))),m.get()&&this.setLocalFontsDisabled(m.get());const f=e.Settings.Settings.instance().moduleSetting("avif-format-disabled"),b=e.Settings.Settings.instance().moduleSetting("webp-format-disabled"),y=()=>{const e=[];f.get()&&e.push("avif"),b.get()&&e.push("webp"),this.setDisabledImageTypes(e)};f.addChangeListener(y),b.addChangeListener(y),(f.get()||b.get())&&y(),this.#rd=!0,this.#ed=!1,this.#td=!1,this.#nd=!1,this.#sd={enabled:!1,configuration:"mobile"}}setTouchEmulationAllowed(e){this.#rd=e}supportsDeviceEmulation(){return this.target().hasAllCapabilities(4096)}async resetPageScaleFactor(){await this.#Xl.invoke_resetPageScaleFactor()}async emulateDevice(e){e?await this.#Xl.invoke_setDeviceMetricsOverride(e):await this.#Xl.invoke_clearDeviceMetricsOverride()}overlayModel(){return this.#Yl}async emulateLocation(e){if(e)if(e.unavailable)await Promise.all([this.#Xl.invoke_setGeolocationOverride({}),this.#Xl.invoke_setTimezoneOverride({timezoneId:""}),this.#Xl.invoke_setLocaleOverride({locale:""}),this.#Xl.invoke_setUserAgentOverride({userAgent:ae.instance().currentUserAgent()})]);else{function t(e,t){const r=t.getError();return r?Promise.reject({type:e,message:r}):Promise.resolve()}await Promise.all([this.#Xl.invoke_setGeolocationOverride({latitude:e.latitude,longitude:e.longitude,accuracy:di.defaultGeoMockAccuracy}).then((e=>t("emulation-set-location",e))),this.#Xl.invoke_setTimezoneOverride({timezoneId:e.timezoneId}).then((e=>t("emulation-set-timezone",e))),this.#Xl.invoke_setLocaleOverride({locale:e.locale}).then((e=>t("emulation-set-locale",e))),this.#Xl.invoke_setUserAgentOverride({userAgent:ae.instance().currentUserAgent(),acceptLanguage:e.locale}).then((e=>t("emulation-set-user-agent",e)))])}else await Promise.all([this.#Xl.invoke_clearGeolocationOverride(),this.#Xl.invoke_setTimezoneOverride({timezoneId:""}),this.#Xl.invoke_setLocaleOverride({locale:""}),this.#Xl.invoke_setUserAgentOverride({userAgent:ae.instance().currentUserAgent()})])}async emulateDeviceOrientation(e){e?await this.#Jl.invoke_setDeviceOrientationOverride({alpha:e.alpha,beta:e.beta,gamma:e.gamma}):await this.#Jl.invoke_clearDeviceOrientationOverride()}async setIdleOverride(e){await this.#Xl.invoke_setIdleOverride(e)}async clearIdleOverride(){await this.#Xl.invoke_clearIdleOverride()}async emulateCSSMedia(e,t){await this.#Xl.invoke_setEmulatedMedia({media:e,features:t}),this.#it&&this.#it.mediaQueryResultChanged()}async emulateAutoDarkMode(e){e&&(this.#Zl.set("prefers-color-scheme","dark"),await this.updateCssMedia()),await this.#Xl.invoke_setAutoDarkModeOverride({enabled:e||void 0})}async emulateVisionDeficiency(e){await this.#Xl.invoke_setEmulatedVisionDeficiency({type:e})}setLocalFontsDisabled(e){this.#it&&this.#it.setLocalFontsEnabled(!e)}setDisabledImageTypes(e){this.#Xl.invoke_setDisabledImageTypes({imageTypes:e})}async setCPUThrottlingRate(e){await this.#Xl.invoke_setCPUThrottlingRate({rate:e})}async setHardwareConcurrency(e){if(e<1)throw new Error("hardwareConcurrency must be a positive value");await this.#Xl.invoke_setHardwareConcurrencyOverride({hardwareConcurrency:e})}async emulateTouch(e,t){this.#ed=e&&this.#rd,this.#td=t&&this.#rd,await this.updateTouch()}async overrideEmulateTouch(e){this.#nd=e&&this.#rd,await this.updateTouch()}async updateTouch(){let e={enabled:this.#ed,configuration:this.#td?"mobile":"desktop"};this.#nd&&(e={enabled:!0,configuration:"mobile"}),this.#Yl&&this.#Yl.inspectModeEnabled()&&(e={enabled:!1,configuration:"mobile"}),(this.#sd.enabled||e.enabled)&&(this.#sd.enabled&&e.enabled&&this.#sd.configuration===e.configuration||(this.#sd=e,await this.#Xl.invoke_setTouchEmulationEnabled({enabled:e.enabled,maxTouchPoints:1}),await this.#Xl.invoke_setEmitTouchEventsForMouse({enabled:e.enabled,configuration:e.configuration})))}async updateCssMedia(){const e=this.#Zl.get("type")??"",t=[{name:"color-gamut",value:this.#Zl.get("color-gamut")??""},{name:"prefers-color-scheme",value:this.#Zl.get("prefers-color-scheme")??""},{name:"forced-colors",value:this.#Zl.get("forced-colors")??""},{name:"prefers-contrast",value:this.#Zl.get("prefers-contrast")??""},{name:"prefers-reduced-data",value:this.#Zl.get("prefers-reduced-data")??""},{name:"prefers-reduced-motion",value:this.#Zl.get("prefers-reduced-motion")??""},{name:"prefers-reduced-transparency",value:this.#Zl.get("prefers-reduced-transparency")??""}];return this.emulateCSSMedia(e,t)}}class di{latitude;longitude;timezoneId;locale;unavailable;constructor(e,t,r,n,s){this.latitude=e,this.longitude=t,this.timezoneId=r,this.locale=n,this.unavailable=s}static parseSetting(e){if(e){const[t,r,n,s]=e.split(":"),[i,o]=t.split("@");return new di(parseFloat(i),parseFloat(o),r,n,Boolean(s))}return new di(0,0,"","",!1)}static parseUserInput(e,t,r,n){if(!e&&!t)return null;const{valid:s}=di.latitudeValidator(e),{valid:i}=di.longitudeValidator(t);if(!s&&!i)return null;const o=s?parseFloat(e):-1,a=i?parseFloat(t):-1;return new di(o,a,r,n,!1)}static latitudeValidator(e){const t=parseFloat(e);return{valid:/^([+-]?[\d]+(\.\d+)?|[+-]?\.\d+)$/.test(e)&&t>=-90&&t<=90,errorMessage:void 0}}static longitudeValidator(e){const t=parseFloat(e);return{valid:/^([+-]?[\d]+(\.\d+)?|[+-]?\.\d+)$/.test(e)&&t>=-180&&t<=180,errorMessage:void 0}}static timezoneIdValidator(e){return{valid:""===e||/[a-zA-Z]/.test(e),errorMessage:void 0}}static localeValidator(e){return{valid:""===e||/[a-zA-Z]{2}/.test(e),errorMessage:void 0}}toSetting(){return`${this.latitude}@${this.longitude}:${this.timezoneId}:${this.locale}:${this.unavailable||""}`}static defaultGeoMockAccuracy=150}class ci{alpha;beta;gamma;constructor(e,t,r){this.alpha=e,this.beta=t,this.gamma=r}static parseSetting(e){if(e){const t=JSON.parse(e);return new ci(t.alpha,t.beta,t.gamma)}return new ci(0,0,0)}static parseUserInput(e,t,r){if(!e&&!t&&!r)return null;const{valid:n}=ci.alphaAngleValidator(e),{valid:s}=ci.betaAngleValidator(t),{valid:i}=ci.gammaAngleValidator(r);if(!n&&!s&&!i)return null;const o=n?parseFloat(e):-1,a=s?parseFloat(t):-1,l=i?parseFloat(r):-1;return new ci(o,a,l)}static angleRangeValidator(e,t){const r=parseFloat(e);return{valid:/^([+-]?[\d]+(\.\d+)?|[+-]?\.\d+)$/.test(e)&&r>=t.minimum&&r<t.maximum,errorMessage:void 0}}static alphaAngleValidator(e){return ci.angleRangeValidator(e,{minimum:0,maximum:360})}static betaAngleValidator(e){return ci.angleRangeValidator(e,{minimum:-180,maximum:180})}static gammaAngleValidator(e){return ci.angleRangeValidator(e,{minimum:-90,maximum:90})}toSetting(){return JSON.stringify(this)}}h.register(li,{capabilities:256,autostart:!0});var hi=Object.freeze({__proto__:null,EmulationModel:li,Location:di,DeviceOrientation:ci});let ui;class gi extends e.ObjectWrapper.ObjectWrapper{#id;#od;#ad;constructor(){super(),this.#id=pi.NoThrottling,z.instance().observeModels(li,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return ui&&!t||(ui=new gi),ui}cpuThrottlingRate(){return this.#id}setCPUThrottlingRate(e){this.#id=e;for(const e of z.instance().models(li))e.setCPUThrottlingRate(this.#id);this.dispatchEventToListeners("RateChanged",this.#id)}setHardwareConcurrency(e){this.#od=e;for(const t of z.instance().models(li))t.setHardwareConcurrency(e);this.dispatchEventToListeners("HardwareConcurrencyChanged",this.#od)}hasPrimaryPageTargetSet(){try{return null!==z.instance().primaryPageTarget()}catch{return!1}}async getHardwareConcurrency(){const e=z.instance().primaryPageTarget(),t=this.#ad;if(!e)return new Promise(t?e=>{this.#ad=r=>{e(r),t(r)}}:e=>{this.#ad=e});const r=await e.runtimeAgent().invoke_evaluate({expression:"navigator.hardwareConcurrency",returnByValue:!0,silent:!0,throwOnSideEffect:!0}),n=r.getError();if(n)throw new Error(n);const{result:s,exceptionDetails:i}=r;if(i)throw new Error(i.text);return s.value}modelAdded(e){if(this.#id!==pi.NoThrottling&&e.setCPUThrottlingRate(this.#id),void 0!==this.#od&&e.setHardwareConcurrency(this.#od),this.#ad){const e=this.#ad;this.#ad=void 0,this.getHardwareConcurrency().then(e)}}modelRemoved(e){}}var pi;!function(e){e[e.NoThrottling=1]="NoThrottling",e[e.MidTierMobile=4]="MidTierMobile",e[e.LowEndMobile=6]="LowEndMobile",e[e.ExtraSlow=20]="ExtraSlow"}(pi||(pi={}));var mi=Object.freeze({__proto__:null,CPUThrottlingManager:gi,throttlingManager:function(){return gi.instance()},get CPUThrottlingRates(){return pi}});class fi extends h{agent;#Jr;#Er;#ld;#dd;suspended=!1;constructor(t){super(t),this.agent=t.domdebuggerAgent(),this.#Jr=t.model(_r),this.#Er=t.model(Dn),this.#Er.addEventListener(Mn.DocumentUpdated,this.documentUpdated,this),this.#Er.addEventListener(Mn.NodeRemoved,this.nodeRemoved,this),this.#ld=[],this.#dd=e.Settings.Settings.instance().createLocalSetting("dom-breakpoints",[]),this.#Er.existingDocument()&&this.documentUpdated()}runtimeModel(){return this.#Jr}async suspendModel(){this.suspended=!0}async resumeModel(){this.suspended=!1}async eventListeners(e){if(console.assert(e.runtimeModel()===this.#Jr),!e.objectId)return[];const t=await this.agent.invoke_getEventListeners({objectId:e.objectId}),r=[];for(const n of t.listeners||[]){const t=this.#Jr.debuggerModel().createRawLocationByScriptId(n.scriptId,n.lineNumber,n.columnNumber);t&&r.push(new vi(this,e,n.type,n.useCapture,n.passive,n.once,n.handler?this.#Jr.createRemoteObject(n.handler):null,n.originalHandler?this.#Jr.createRemoteObject(n.originalHandler):null,t,null))}return r}retrieveDOMBreakpoints(){this.#Er.requestDocument()}domBreakpoints(){return this.#ld.slice()}hasDOMBreakpoint(e,t){return this.#ld.some((r=>r.node===e&&r.type===t))}setDOMBreakpoint(e,t){for(const r of this.#ld)if(r.node===e&&r.type===t)return this.toggleDOMBreakpoint(r,!0),r;const r=new yi(this,e,t,!0);return this.#ld.push(r),this.saveDOMBreakpoints(),this.enableDOMBreakpoint(r),this.dispatchEventToListeners("DOMBreakpointAdded",r),r}removeDOMBreakpoint(e,t){this.removeDOMBreakpoints((r=>r.node===e&&r.type===t))}removeAllDOMBreakpoints(){this.removeDOMBreakpoints((e=>!0))}toggleDOMBreakpoint(e,t){t!==e.enabled&&(e.enabled=t,t?this.enableDOMBreakpoint(e):this.disableDOMBreakpoint(e),this.dispatchEventToListeners("DOMBreakpointToggled",e))}enableDOMBreakpoint(e){e.node.id&&(this.agent.invoke_setDOMBreakpoint({nodeId:e.node.id,type:e.type}),e.node.setMarker(bi,!0))}disableDOMBreakpoint(e){e.node.id&&(this.agent.invoke_removeDOMBreakpoint({nodeId:e.node.id,type:e.type}),e.node.setMarker(bi,!!this.nodeHasBreakpoints(e.node)||null))}nodeHasBreakpoints(e){for(const t of this.#ld)if(t.node===e&&t.enabled)return!0;return!1}resolveDOMBreakpointData(e){const t=e.type,r=this.#Er.nodeForId(e.nodeId);if(!t||!r)return null;let n=null,s=!1;return"subtree-modified"===t&&(s=e.insertion||!1,n=this.#Er.nodeForId(e.targetNodeId)),{type:t,node:r,targetNode:n,insertion:s}}currentURL(){const e=this.#Er.existingDocument();return e?e.documentURL:s.DevToolsPath.EmptyUrlString}async documentUpdated(){if(this.suspended)return;const e=this.#ld;this.#ld=[],this.dispatchEventToListeners("DOMBreakpointsRemoved",e);const t=await this.#Er.requestDocument(),r=t?t.documentURL:s.DevToolsPath.EmptyUrlString;for(const e of this.#dd.get())e.url===r&&this.#Er.pushNodeByPathToFrontend(e.path).then(n.bind(this,e));function n(e,t){const r=t?this.#Er.nodeForId(t):null;if(!r)return;const n=new yi(this,r,e.type,e.enabled);this.#ld.push(n),e.enabled&&this.enableDOMBreakpoint(n),this.dispatchEventToListeners("DOMBreakpointAdded",n)}}removeDOMBreakpoints(e){const t=[],r=[];for(const n of this.#ld)e(n)?(t.push(n),n.enabled&&(n.enabled=!1,this.disableDOMBreakpoint(n))):r.push(n);t.length&&(this.#ld=r,this.saveDOMBreakpoints(),this.dispatchEventToListeners("DOMBreakpointsRemoved",t))}nodeRemoved(e){if(this.suspended)return;const{node:t}=e.data,r=t.children()||[];this.removeDOMBreakpoints((e=>e.node===t||-1!==r.indexOf(e.node)))}saveDOMBreakpoints(){const e=this.currentURL(),t=this.#dd.get().filter((t=>t.url!==e));for(const r of this.#ld)t.push({url:e,path:r.node.path(),type:r.type,enabled:r.enabled});this.#dd.set(t)}}const bi="breakpoint-marker";class yi{domDebuggerModel;node;type;enabled;constructor(e,t,r,n){this.domDebuggerModel=e,this.node=t,this.type=r,this.enabled=n}}class vi{#cd;#hd;#g;#ud;#gd;#pd;#md;#fd;#Mn;#bd;#yd;#vd;constructor(e,t,r,n,i,o,a,l,d,c,h){this.#cd=e,this.#hd=t,this.#g=r,this.#ud=n,this.#gd=i,this.#pd=o,this.#md=a,this.#fd=l||a,this.#Mn=d;const u=d.script();this.#bd=u?u.contentURL():s.DevToolsPath.EmptyUrlString,this.#yd=c,this.#vd=h||"Raw"}domDebuggerModel(){return this.#cd}type(){return this.#g}useCapture(){return this.#ud}passive(){return this.#gd}once(){return this.#pd}handler(){return this.#md}location(){return this.#Mn}sourceURL(){return this.#bd}originalHandler(){return this.#fd}canRemove(){return Boolean(this.#yd)||"FrameworkUser"!==this.#vd}remove(){if(!this.canRemove())return Promise.resolve(void 0);if("FrameworkUser"!==this.#vd){function e(e,t,r){this.removeEventListener(e,t,r),this["on"+e]&&(this["on"+e]=void 0)}return this.#hd.callFunction(e,[Ft.toCallArgument(this.#g),Ft.toCallArgument(this.#fd),Ft.toCallArgument(this.#ud)]).then((()=>{}))}if(this.#yd){function t(e,t,r,n){this.call(null,e,t,r,n)}return this.#yd.callFunction(t,[Ft.toCallArgument(this.#g),Ft.toCallArgument(this.#fd),Ft.toCallArgument(this.#ud),Ft.toCallArgument(this.#gd)]).then((()=>{}))}return Promise.resolve(void 0)}canTogglePassive(){return"FrameworkUser"!==this.#vd}togglePassive(){return this.#hd.callFunction((function(e,t,r,n){this.removeEventListener(e,t,{capture:r}),this.addEventListener(e,t,{capture:r,passive:!n})}),[Ft.toCallArgument(this.#g),Ft.toCallArgument(this.#fd),Ft.toCallArgument(this.#ud),Ft.toCallArgument(this.#gd)]).then((()=>{}))}origin(){return this.#vd}markAsFramework(){this.#vd="Framework"}isScrollBlockingType(){return"touchstart"===this.#g||"touchmove"===this.#g||"mousewheel"===this.#g||"wheel"===this.#g}}class ki extends Rs{#g;constructor(e,t){super(e,t),this.#g=t}type(){return this.#g}}class Ii extends Rs{eventTargetNames;constructor(e,t,r){super(r,e),this.eventTargetNames=t}setEnabled(e){if(this.enabled()!==e){super.setEnabled(e);for(const e of z.instance().models(fi))this.updateOnModel(e)}}updateOnModel(e){for(const t of this.eventTargetNames)this.enabled()?e.agent.invoke_setEventListenerBreakpoint({eventName:this.name,targetName:t}):e.agent.invoke_removeEventListenerBreakpoint({eventName:this.name,targetName:t})}static listener="listener:"}let wi;class Si{#kd;#Id;#wd;#Sd;constructor(){this.#kd=e.Settings.Settings.instance().createLocalSetting("xhr-breakpoints",[]),this.#Id=new Map;for(const e of this.#kd.get())this.#Id.set(e.url,e.enabled);this.#wd=[],this.#wd.push(new ki("trusted-type-violation","trustedtype-sink-violation")),this.#wd.push(new ki("trusted-type-violation","trustedtype-policy-violation")),this.#Sd=[],this.createEventListenerBreakpoints("media",["play","pause","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange","loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","waiting"],["audio","video"]),this.createEventListenerBreakpoints("picture-in-picture",["enterpictureinpicture","leavepictureinpicture"],["video"]),this.createEventListenerBreakpoints("picture-in-picture",["resize"],["PictureInPictureWindow"]),this.createEventListenerBreakpoints("picture-in-picture",["enter"],["documentPictureInPicture"]),this.createEventListenerBreakpoints("clipboard",["copy","cut","paste","beforecopy","beforecut","beforepaste"],["*"]),this.createEventListenerBreakpoints("control",["resize","scroll","scrollend","scrollsnapchange","scrollsnapchanging","zoom","focus","blur","select","change","submit","reset"],["*"]),this.createEventListenerBreakpoints("device",["deviceorientation","devicemotion"],["*"]),this.createEventListenerBreakpoints("dom-mutation",["DOMActivate","DOMFocusIn","DOMFocusOut","DOMAttrModified","DOMCharacterDataModified","DOMNodeInserted","DOMNodeInsertedIntoDocument","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMSubtreeModified","DOMContentLoaded"],["*"]),this.createEventListenerBreakpoints("drag-drop",["drag","dragstart","dragend","dragenter","dragover","dragleave","drop"],["*"]),this.createEventListenerBreakpoints("keyboard",["keydown","keyup","keypress","input"],["*"]),this.createEventListenerBreakpoints("load",["load","beforeunload","unload","abort","error","hashchange","popstate","navigate","navigatesuccess","navigateerror","currentchange","navigateto","navigatefrom","finish","dispose"],["*"]),this.createEventListenerBreakpoints("mouse",["auxclick","click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout","mouseenter","mouseleave","mousewheel","wheel","contextmenu"],["*"]),this.createEventListenerBreakpoints("pointer",["pointerover","pointerout","pointerenter","pointerleave","pointerdown","pointerup","pointermove","pointercancel","gotpointercapture","lostpointercapture","pointerrawupdate"],["*"]),this.createEventListenerBreakpoints("touch",["touchstart","touchmove","touchend","touchcancel"],["*"]),this.createEventListenerBreakpoints("worker",["message","messageerror"],["*"]),this.createEventListenerBreakpoints("xhr",["readystatechange","load","loadstart","loadend","abort","error","progress","timeout"],["xmlhttprequest","xmlhttprequestupload"]),z.instance().observeModels(fi,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return wi&&!t||(wi=new Si),wi}cspViolationBreakpoints(){return this.#wd.slice()}createEventListenerBreakpoints(e,t,r){for(const n of t)this.#Sd.push(new Ii(n,r,e))}resolveEventListenerBreakpoint({eventName:e,targetName:t}){const r="listener:";if(!e.startsWith(r))return null;e=e.substring(9),t=(t||"*").toLowerCase();let n=null;for(const r of this.#Sd)e&&r.name===e&&-1!==r.eventTargetNames.indexOf(t)&&(n=r),!n&&e&&r.name===e&&-1!==r.eventTargetNames.indexOf("*")&&(n=r);return n}eventListenerBreakpoints(){return this.#Sd.slice()}updateCSPViolationBreakpoints(){const e=this.#wd.filter((e=>e.enabled())).map((e=>e.type()));for(const t of z.instance().models(fi))this.updateCSPViolationBreakpointsForModel(t,e)}updateCSPViolationBreakpointsForModel(e,t){e.agent.invoke_setBreakOnCSPViolation({violationTypes:t})}xhrBreakpoints(){return this.#Id}saveXHRBreakpoints(){const e=[];for(const t of this.#Id.keys())e.push({url:t,enabled:this.#Id.get(t)||!1});this.#kd.set(e)}addXHRBreakpoint(e,t){if(this.#Id.set(e,t),t)for(const t of z.instance().models(fi))t.agent.invoke_setXHRBreakpoint({url:e});this.saveXHRBreakpoints()}removeXHRBreakpoint(e){const t=this.#Id.get(e);if(this.#Id.delete(e),t)for(const t of z.instance().models(fi))t.agent.invoke_removeXHRBreakpoint({url:e});this.saveXHRBreakpoints()}toggleXHRBreakpoint(e,t){this.#Id.set(e,t);for(const r of z.instance().models(fi))t?r.agent.invoke_setXHRBreakpoint({url:e}):r.agent.invoke_removeXHRBreakpoint({url:e});this.saveXHRBreakpoints()}modelAdded(e){for(const t of this.#Id.keys())this.#Id.get(t)&&e.agent.invoke_setXHRBreakpoint({url:t});for(const t of this.#Sd)t.enabled()&&t.updateOnModel(e);const t=this.#wd.filter((e=>e.enabled())).map((e=>e.type()));this.updateCSPViolationBreakpointsForModel(e,t)}modelRemoved(e){}}h.register(fi,{capabilities:2,autostart:!1});var Ci=Object.freeze({__proto__:null,DOMDebuggerModel:fi,DOMBreakpoint:yi,EventListener:vi,CSPViolationBreakpoint:ki,DOMEventListenerBreakpoint:Ii,DOMDebuggerManager:Si});class xi extends h{agent;constructor(e){super(e),this.agent=e.eventBreakpointsAgent()}}class Ri extends Rs{setEnabled(e){if(this.enabled()!==e){super.setEnabled(e);for(const e of z.instance().models(xi))this.updateOnModel(e)}}updateOnModel(e){this.enabled()?e.agent.invoke_setInstrumentationBreakpoint({eventName:this.name}):e.agent.invoke_removeInstrumentationBreakpoint({eventName:this.name})}static instrumentationPrefix="instrumentation:"}let Ti;class Mi{#Sd=[];constructor(){this.createInstrumentationBreakpoints("auction-worklet",["beforeBidderWorkletBiddingStart","beforeBidderWorkletReportingStart","beforeSellerWorkletScoringStart","beforeSellerWorkletReportingStart"]),this.createInstrumentationBreakpoints("animation",["requestAnimationFrame","cancelAnimationFrame","requestAnimationFrame.callback"]),this.createInstrumentationBreakpoints("canvas",["canvasContextCreated","webglErrorFired","webglWarningFired"]),this.createInstrumentationBreakpoints("geolocation",["Geolocation.getCurrentPosition","Geolocation.watchPosition"]),this.createInstrumentationBreakpoints("notification",["Notification.requestPermission"]),this.createInstrumentationBreakpoints("parse",["Element.setInnerHTML","Document.write"]),this.createInstrumentationBreakpoints("script",["scriptFirstStatement","scriptBlockedByCSP"]),this.createInstrumentationBreakpoints("shared-storage-worklet",["sharedStorageWorkletScriptFirstStatement"]),this.createInstrumentationBreakpoints("timer",["setTimeout","clearTimeout","setTimeout.callback","setInterval","clearInterval","setInterval.callback"]),this.createInstrumentationBreakpoints("window",["DOMWindow.close"]),this.createInstrumentationBreakpoints("web-audio",["audioContextCreated","audioContextClosed","audioContextResumed","audioContextSuspended"]),z.instance().observeModels(xi,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return Ti&&!t||(Ti=new Mi),Ti}createInstrumentationBreakpoints(e,t){for(const r of t)this.#Sd.push(new Ri(e,r))}eventListenerBreakpoints(){return this.#Sd.slice()}resolveEventListenerBreakpoint({eventName:e}){if(!e.startsWith(Ri.instrumentationPrefix))return null;const t=e.substring(Ri.instrumentationPrefix.length);return this.#Sd.find((e=>e.name===t))||null}modelAdded(e){for(const t of this.#Sd)t.enabled()&&t.updateOnModel(e)}modelRemoved(e){}}h.register(xi,{capabilities:524288,autostart:!1});var Pi=Object.freeze({__proto__:null,EventBreakpointsModel:xi,EventBreakpointsManager:Mi}),Li=Object.freeze({__proto__:null});let Ei;class Ai extends e.ObjectWrapper.ObjectWrapper{#Cd;#xd;#L;#Rd;constructor(){super(),this.#Cd=new Map,this.#xd=new Map,this.#L=new Set,z.instance().observeModels(_r,this),this.#Rd=0}static instance({forceNew:e}={forceNew:!1}){return Ei&&!e||(Ei=new Ai),Ei}observeIsolates(e){if(this.#L.has(e))throw new Error("Observer can only be registered once");this.#L.size||this.poll(),this.#L.add(e);for(const t of this.#Cd.values())e.isolateAdded(t)}unobserveIsolates(e){this.#L.delete(e),this.#L.size||++this.#Rd}modelAdded(e){this.modelAddedInternal(e)}async modelAddedInternal(e){this.#xd.set(e,null);const t=await e.isolateId();if(!this.#xd.has(e))return;if(!t)return void this.#xd.delete(e);this.#xd.set(e,t);let r=this.#Cd.get(t);if(r||(r=new Ni(t),this.#Cd.set(t,r)),r.modelsInternal.add(e),1===r.modelsInternal.size)for(const e of this.#L)e.isolateAdded(r);else for(const e of this.#L)e.isolateChanged(r)}modelRemoved(e){const t=this.#xd.get(e);if(this.#xd.delete(e),!t)return;const r=this.#Cd.get(t);if(r)if(r.modelsInternal.delete(e),r.modelsInternal.size)for(const e of this.#L)e.isolateChanged(r);else{for(const e of this.#L)e.isolateRemoved(r);this.#Cd.delete(t)}}isolateByModel(e){return this.#Cd.get(this.#xd.get(e)||"")||null}isolates(){return this.#Cd.values()}async poll(){const e=this.#Rd;for(;e===this.#Rd;)await Promise.all(Array.from(this.isolates(),(e=>e.update()))),await new Promise((e=>window.setTimeout(e,Di)))}}const Oi=12e4,Di=2e3;class Ni{#C;modelsInternal;#Td;#Md;constructor(e){this.#C=e,this.modelsInternal=new Set,this.#Td=0;const t=Oi/Di;this.#Md=new Fi(t)}id(){return this.#C}models(){return this.modelsInternal}runtimeModel(){return this.modelsInternal.values().next().value||null}heapProfilerModel(){const e=this.runtimeModel();return e&&e.heapProfilerModel()}async update(){const e=this.runtimeModel(),t=e&&await e.heapUsage();t&&(this.#Td=t.usedSize,this.#Md.add(this.#Td),Ai.instance().dispatchEventToListeners("MemoryChanged",this))}samplesCount(){return this.#Md.count()}usedHeapSize(){return this.#Td}usedHeapSizeGrowRate(){return this.#Md.fitSlope()}}class Fi{#Pd;#Ld;#Hn;#Ed;#Ad;#Od;#Dd;#Nd;#Fd;constructor(e){this.#Pd=0|e,this.reset()}reset(){this.#Ld=Date.now(),this.#Hn=0,this.#Ed=[],this.#Ad=[],this.#Od=0,this.#Dd=0,this.#Nd=0,this.#Fd=0}count(){return this.#Ed.length}add(e,t){const r="number"==typeof t?t:Date.now()-this.#Ld,n=e;if(this.#Ed.length===this.#Pd){const e=this.#Ed[this.#Hn],t=this.#Ad[this.#Hn];this.#Od-=e,this.#Dd-=t,this.#Nd-=e*e,this.#Fd-=e*t}this.#Od+=r,this.#Dd+=n,this.#Nd+=r*r,this.#Fd+=r*n,this.#Ed[this.#Hn]=r,this.#Ad[this.#Hn]=n,this.#Hn=(this.#Hn+1)%this.#Pd}fitSlope(){const e=this.count();return e<2?0:(this.#Fd-this.#Od*this.#Dd/e)/(this.#Nd-this.#Od*this.#Od/e)}}var Bi=Object.freeze({__proto__:null,IsolateManager:Ai,MemoryTrendWindowMs:Oi,Isolate:Ni,MemoryTrend:Fi});class Hi extends h{#Bd=!1;#$r=!1;constructor(e){super(e),this.ensureEnabled()}async ensureEnabled(){if(this.#$r)return;this.#$r=!0,this.target().registerAuditsDispatcher(this);const e=this.target().auditsAgent();await e.invoke_enable()}issueAdded(e){this.dispatchEventToListeners("IssueAdded",{issuesModel:this,inspectorIssue:e.issue})}dispose(){super.dispose(),this.#Bd=!0}getTargetIfNotDisposed(){return this.#Bd?null:this.target()}}h.register(Hi,{capabilities:32768,autostart:!0});var Ui=Object.freeze({__proto__:null,IssuesModel:Hi});var _i=Object.freeze({__proto__:null,StickyPositionConstraint:class{#Hd;#Ud;#_d;#qd;constructor(e,t){this.#Hd=t.stickyBoxRect,this.#Ud=t.containingBlockRect,this.#_d=null,e&&t.nearestLayerShiftingStickyBox&&(this.#_d=e.layerById(t.nearestLayerShiftingStickyBox)),this.#qd=null,e&&t.nearestLayerShiftingContainingBlock&&(this.#qd=e.layerById(t.nearestLayerShiftingContainingBlock))}stickyBoxRect(){return this.#Hd}containingBlockRect(){return this.#Ud}nearestLayerShiftingStickyBox(){return this.#_d}nearestLayerShiftingContainingBlock(){return this.#qd}},LayerTreeBase:class{#e;#Er;layersById;#zd;#jd;#Vd;#Wd;constructor(e){this.#e=e,this.#Er=e?e.model(Dn):null,this.layersById=new Map,this.#zd=null,this.#jd=null,this.#Vd=new Map}target(){return this.#e}root(){return this.#zd}setRoot(e){this.#zd=e}contentRoot(){return this.#jd}setContentRoot(e){this.#jd=e}forEachLayer(e,t){return!(!t&&!(t=this.root()))&&(e(t)||t.children().some(this.forEachLayer.bind(this,e)))}layerById(e){return this.layersById.get(e)||null}async resolveBackendNodeIds(e){if(!e.size||!this.#Er)return;const t=await this.#Er.pushNodesByBackendIdsToFrontend(e);if(t)for(const e of t.keys())this.#Vd.set(e,t.get(e)||null)}backendNodeIdToNode(){return this.#Vd}setViewportSize(e){this.#Wd=e}viewportSize(){return this.#Wd}nodeForId(e){return this.#Er?this.#Er.nodeForId(e):null}}});class qi{id;url;startTime;loadTime;contentLoadTime;mainRequest;constructor(e){this.id=++qi.lastIdentifier,this.url=e.url(),this.startTime=e.startTime,this.mainRequest=e}static forRequest(e){return zi.get(e)||null}bindRequest(e){zi.set(e,this)}static lastIdentifier=0}const zi=new WeakMap;var ji=Object.freeze({__proto__:null,PageLoad:qi});class Vi extends h{layerTreeAgent;constructor(e){super(e),this.layerTreeAgent=e.layerTreeAgent()}async loadSnapshotFromFragments(e){const{snapshotId:t}=await this.layerTreeAgent.invoke_loadSnapshot({tiles:e});return t?new Wi(this,t):null}loadSnapshot(e){const t={x:0,y:0,picture:e};return this.loadSnapshotFromFragments([t])}async makeSnapshot(e){const{snapshotId:t}=await this.layerTreeAgent.invoke_makeSnapshot({layerId:e});return t?new Wi(this,t):null}}class Wi{#Gd;#so;#Kd;constructor(e,t){this.#Gd=e,this.#so=t,this.#Kd=1}release(){console.assert(this.#Kd>0,"release is already called on the object"),--this.#Kd||this.#Gd.layerTreeAgent.invoke_releaseSnapshot({snapshotId:this.#so})}addReference(){++this.#Kd,console.assert(this.#Kd>0,"Referencing a dead object")}async replay(e,t,r){return(await this.#Gd.layerTreeAgent.invoke_replaySnapshot({snapshotId:this.#so,fromStep:t,toStep:r,scale:e||1})).dataURL}async profile(e){return(await this.#Gd.layerTreeAgent.invoke_profileSnapshot({snapshotId:this.#so,minRepeatCount:5,minDuration:1,clipRect:e||void 0})).timings}async commandLog(){const e=await this.#Gd.layerTreeAgent.invoke_snapshotCommandLog({snapshotId:this.#so});return e.commandLog?e.commandLog.map(((e,t)=>new Gi(e,t))):null}}class Gi{method;params;commandIndex;constructor(e,t){this.method=e.method,this.params=e.params,this.commandIndex=t}}h.register(Vi,{capabilities:2,autostart:!1});var Ki=Object.freeze({__proto__:null,PaintProfilerModel:Vi,PaintProfilerSnapshot:Wi,PaintProfilerLogItem:Gi});class Qi extends h{#xs;#Qd;#$d;constructor(e){super(e),this.#xs=e.performanceAgent(),this.#Qd=new Map([["TaskDuration","CumulativeTime"],["ScriptDuration","CumulativeTime"],["LayoutDuration","CumulativeTime"],["RecalcStyleDuration","CumulativeTime"],["LayoutCount","CumulativeCount"],["RecalcStyleCount","CumulativeCount"]]),this.#$d=new Map}enable(){return this.#xs.invoke_enable({})}disable(){return this.#xs.invoke_disable()}async requestMetrics(){const e=await this.#xs.invoke_getMetrics()||[],t=new Map,r=performance.now();for(const n of e.metrics){let e,i=this.#$d.get(n.name);switch(i||(i={lastValue:void 0,lastTimestamp:void 0},this.#$d.set(n.name,i)),this.#Qd.get(n.name)){case"CumulativeTime":e=i.lastTimestamp&&i.lastValue?s.NumberUtilities.clamp(1e3*(n.value-i.lastValue)/(r-i.lastTimestamp),0,1):0,i.lastValue=n.value,i.lastTimestamp=r;break;case"CumulativeCount":e=i.lastTimestamp&&i.lastValue?Math.max(0,1e3*(n.value-i.lastValue)/(r-i.lastTimestamp)):0,i.lastValue=n.value,i.lastTimestamp=r;break;default:e=n.value}t.set(n.name,e)}return{metrics:t,timestamp:r}}}h.register(Qi,{capabilities:2,autostart:!1});var $i=Object.freeze({__proto__:null,PerformanceMetricsModel:Qi});class Xi extends h{agent;loaderIds=[];targetJustAttached=!0;lastPrimaryPageModel=null;documents=new Map;constructor(e){super(e),e.registerPreloadDispatcher(new Ji(this)),this.agent=e.preloadAgent(),this.agent.invoke_enable();const t=e.targetInfo();void 0!==t&&"prerender"===t.subtype&&(this.lastPrimaryPageModel=z.instance().primaryPageTarget()?.model(Xi)||null),z.instance().addModelListener(Kn,Wn.PrimaryPageChanged,this.onPrimaryPageChanged,this)}dispose(){super.dispose(),z.instance().removeModelListener(Kn,Wn.PrimaryPageChanged,this.onPrimaryPageChanged,this),this.agent.invoke_disable()}ensureDocumentPreloadingData(e){void 0===this.documents.get(e)&&this.documents.set(e,new Yi)}currentLoaderId(){if(this.targetJustAttached)return null;if(0===this.loaderIds.length)throw new Error("unreachable");return this.loaderIds[this.loaderIds.length-1]}currentDocument(){const e=this.currentLoaderId();return null===e?null:this.documents.get(e)||null}getRuleSetById(e){return this.currentDocument()?.ruleSets.getById(e)||null}getAllRuleSets(){return this.currentDocument()?.ruleSets.getAll()||[]}getPreloadCountsByRuleSetId(){const e=new Map;for(const{value:t}of this.getPreloadingAttempts(null))for(const r of[null,...t.ruleSetIds]){void 0===e.get(r)&&e.set(r,new Map);const n=e.get(r);i(n);const s=n.get(t.status)||0;n.set(t.status,s+1)}return e}getPreloadingAttemptById(e){const t=this.currentDocument();return null===t?null:t.preloadingAttempts.getById(e,t.sources)||null}getPreloadingAttempts(e){const t=this.currentDocument();return null===t?[]:t.preloadingAttempts.getAll(e,t.sources)}getPreloadingAttemptsOfPreviousPage(){if(this.loaderIds.length<=1)return[];const e=this.documents.get(this.loaderIds[this.loaderIds.length-2]);return void 0===e?[]:e.preloadingAttempts.getAll(null,e.sources)}onPrimaryPageChanged(e){const{frame:t,type:r}=e.data;if(null===this.lastPrimaryPageModel&&"Activation"===r)return;if(null!==this.lastPrimaryPageModel&&"Activation"!==r)return;if(null!==this.lastPrimaryPageModel&&"Activation"===r){this.loaderIds=this.lastPrimaryPageModel.loaderIds;for(const[e,t]of this.lastPrimaryPageModel.documents.entries())this.ensureDocumentPreloadingData(e),this.documents.get(e)?.mergePrevious(t)}this.lastPrimaryPageModel=null;const n=t.loaderId;this.loaderIds.push(n),this.loaderIds=this.loaderIds.slice(-2),this.ensureDocumentPreloadingData(n);for(const e of this.documents.keys())this.loaderIds.includes(e)||this.documents.delete(e);this.dispatchEventToListeners("ModelUpdated")}onRuleSetUpdated(e){const t=e.ruleSet,r=t.loaderId;null===this.currentLoaderId()&&(this.loaderIds=[r],this.targetJustAttached=!1),this.ensureDocumentPreloadingData(r),this.documents.get(r)?.ruleSets.upsert(t),this.dispatchEventToListeners("ModelUpdated")}onRuleSetRemoved(e){const t=e.id;for(const e of this.documents.values())e.ruleSets.delete(t);this.dispatchEventToListeners("ModelUpdated")}onPreloadingAttemptSourcesUpdated(e){const t=e.loaderId;this.ensureDocumentPreloadingData(t);const r=this.documents.get(t);void 0!==r&&(r.sources.update(e.preloadingAttemptSources),r.preloadingAttempts.maybeRegisterNotTriggered(r.sources),r.preloadingAttempts.cleanUpRemovedAttempts(r.sources),this.dispatchEventToListeners("ModelUpdated"))}onPrefetchStatusUpdated(e){if("PrefetchEvictedAfterCandidateRemoved"===e.prefetchStatus)return;const t=e.key.loaderId;this.ensureDocumentPreloadingData(t);const r={action:"Prefetch",key:e.key,status:eo(e.status),prefetchStatus:e.prefetchStatus||null,requestId:e.requestId};this.documents.get(t)?.preloadingAttempts.upsert(r),this.dispatchEventToListeners("ModelUpdated")}onPrerenderStatusUpdated(e){const t=e.key.loaderId;this.ensureDocumentPreloadingData(t);const r={action:"Prerender",key:e.key,status:eo(e.status),prerenderStatus:e.prerenderStatus||null,disallowedMojoInterface:e.disallowedMojoInterface||null,mismatchedHeaders:e.mismatchedHeaders||null};this.documents.get(t)?.preloadingAttempts.upsert(r),this.dispatchEventToListeners("ModelUpdated")}onPreloadEnabledStateUpdated(e){this.dispatchEventToListeners("WarningsUpdated",e)}}h.register(Xi,{capabilities:2,autostart:!1});class Ji{model;constructor(e){this.model=e}ruleSetUpdated(e){this.model.onRuleSetUpdated(e)}ruleSetRemoved(e){this.model.onRuleSetRemoved(e)}preloadingAttemptSourcesUpdated(e){this.model.onPreloadingAttemptSourcesUpdated(e)}prefetchStatusUpdated(e){this.model.onPrefetchStatusUpdated(e)}prerenderStatusUpdated(e){this.model.onPrerenderStatusUpdated(e)}preloadEnabledStateUpdated(e){this.model.onPreloadEnabledStateUpdated(e)}}class Yi{ruleSets=new Zi;preloadingAttempts=new ro;sources=new no;mergePrevious(e){if(!this.ruleSets.isEmpty()||!this.sources.isEmpty())throw new Error("unreachable");this.ruleSets=e.ruleSets,this.preloadingAttempts.mergePrevious(e.preloadingAttempts),this.sources=e.sources}}class Zi{map=new Map;isEmpty(){return 0===this.map.size}getById(e){return this.map.get(e)||null}getAll(){return Array.from(this.map.entries()).map((([e,t])=>({id:e,value:t})))}upsert(e){this.map.set(e.id,e)}delete(e){this.map.delete(e)}}function eo(e){switch(e){case"Pending":return"Pending";case"Running":return"Running";case"Ready":return"Ready";case"Success":return"Success";case"Failure":return"Failure";case"NotSupported":return"NotSupported"}throw new Error("unreachable")}function to(e){let t,r;switch(e.action){case"Prefetch":t="Prefetch";break;case"Prerender":t="Prerender"}switch(e.targetHint){case void 0:r="undefined";break;case"Blank":r="Blank";break;case"Self":r="Self"}return`${e.loaderId}:${t}:${e.url}:${r}`}class ro{map=new Map;enrich(e,t){let r=[],n=[];return null!==t&&(r=t.ruleSetIds,n=t.nodeIds),{...e,ruleSetIds:r,nodeIds:n}}getById(e,t){const r=this.map.get(e)||null;return null===r?null:this.enrich(r,t.getById(e))}getAll(e,t){return[...this.map.entries()].map((([e,r])=>({id:e,value:this.enrich(r,t.getById(e))}))).filter((({value:t})=>!e||t.ruleSetIds.includes(e)))}upsert(e){const t=to(e.key);this.map.set(t,e)}maybeRegisterNotTriggered(e){for(const[t,{key:r}]of e.entries()){if(void 0!==this.map.get(t))continue;let e;switch(r.action){case"Prefetch":e={action:"Prefetch",key:r,status:"NotTriggered",prefetchStatus:null,requestId:""};break;case"Prerender":e={action:"Prerender",key:r,status:"NotTriggered",prerenderStatus:null,disallowedMojoInterface:null,mismatchedHeaders:null}}this.map.set(t,e)}}cleanUpRemovedAttempts(e){const t=Array.from(this.map.keys()).filter((t=>!e.getById(t)));for(const e of t)this.map.delete(e)}mergePrevious(e){for(const[t,r]of this.map.entries())e.map.set(t,r);this.map=e.map}}class no{map=new Map;entries(){return this.map.entries()}isEmpty(){return 0===this.map.size}getById(e){return this.map.get(e)||null}update(e){this.map=new Map(e.map((e=>[to(e.key),e])))}}var so=Object.freeze({__proto__:null,PreloadingModel:Xi});class io extends h{#xs;#Xd;#Jd;constructor(e){super(e),this.#xs=e.pageAgent(),this.#Xd=null,this.#Jd=null,e.registerPageDispatcher(this)}startScreencast(e,t,r,n,s,i,o){this.#Xd=i,this.#Jd=o,this.#xs.invoke_startScreencast({format:e,quality:t,maxWidth:r,maxHeight:n,everyNthFrame:s})}stopScreencast(){this.#Xd=null,this.#Jd=null,this.#xs.invoke_stopScreencast()}async captureScreenshot(e,t,r,n){const s={format:e,quality:t,fromSurface:!0};switch(r){case"fromClip":s.captureBeyondViewport=!0,s.clip=n;break;case"fullpage":s.captureBeyondViewport=!0;break;case"fromViewport":s.captureBeyondViewport=!1;break;default:throw new Error("Unexpected or unspecified screnshotMode")}await Cn.muteHighlight();const i=await this.#xs.invoke_captureScreenshot(s);return await Cn.unmuteHighlight(),i.data}async fetchLayoutMetrics(){const e=await this.#xs.invoke_getLayoutMetrics();return e.getError()?null:{viewportX:e.cssVisualViewport.pageX,viewportY:e.cssVisualViewport.pageY,viewportScale:e.cssVisualViewport.scale,contentWidth:e.cssContentSize.width,contentHeight:e.cssContentSize.height}}screencastFrame({data:e,metadata:t,sessionId:r}){this.#xs.invoke_screencastFrameAck({sessionId:r}),this.#Xd&&this.#Xd.call(null,e,t)}screencastVisibilityChanged({visible:e}){this.#Jd&&this.#Jd.call(null,e)}backForwardCacheNotUsed(e){}domContentEventFired(e){}loadEventFired(e){}lifecycleEvent(e){}navigatedWithinDocument(e){}frameAttached(e){}frameNavigated(e){}documentOpened(e){}frameDetached(e){}frameStartedLoading(e){}frameStoppedLoading(e){}frameRequestedNavigation(e){}frameScheduledNavigation(e){}frameClearedScheduledNavigation(e){}frameResized(){}javascriptDialogOpening(e){}javascriptDialogClosed(e){}interstitialShown(){}interstitialHidden(){}windowOpen(e){}fileChooserOpened(e){}compilationCacheProduced(e){}downloadWillBegin(e){}downloadProgress(){}prefetchStatusUpdated(e){}prerenderStatusUpdated(e){}}h.register(io,{capabilities:64,autostart:!1});var oo=Object.freeze({__proto__:null,ScreenCaptureModel:io});class ao extends h{enabled=!1;storageAgent;storageKeyManager;bucketsById=new Map;trackedStorageKeys=new Set;constructor(e){super(e),e.registerStorageDispatcher(this),this.storageAgent=e.storageAgent(),this.storageKeyManager=e.model(Vn)}getBuckets(){return new Set(this.bucketsById.values())}getBucketsForStorageKey(e){const t=[...this.bucketsById.values()];return new Set(t.filter((({bucket:t})=>t.storageKey===e)))}getDefaultBucketForStorageKey(e){return[...this.bucketsById.values()].find((({bucket:t})=>t.storageKey===e&&void 0===t.name))??null}getBucketById(e){return this.bucketsById.get(e)??null}getBucketByName(e,t){if(!t)return this.getDefaultBucketForStorageKey(e);return[...this.bucketsById.values()].find((({bucket:r})=>r.storageKey===e&&r.name===t))??null}deleteBucket(e){this.storageAgent.invoke_deleteStorageBucket({bucket:e})}enable(){if(!this.enabled){if(this.storageKeyManager){this.storageKeyManager.addEventListener("StorageKeyAdded",this.storageKeyAdded,this),this.storageKeyManager.addEventListener("StorageKeyRemoved",this.storageKeyRemoved,this);for(const e of this.storageKeyManager.storageKeys())this.addStorageKey(e)}this.enabled=!0}}storageKeyAdded(e){this.addStorageKey(e.data)}storageKeyRemoved(e){this.removeStorageKey(e.data)}addStorageKey(e){if(this.trackedStorageKeys.has(e))throw new Error("Can't call addStorageKey for a storage key if it has already been added.");this.trackedStorageKeys.add(e),this.storageAgent.invoke_setStorageBucketTracking({storageKey:e,enable:!0})}removeStorageKey(e){if(!this.trackedStorageKeys.has(e))throw new Error("Can't call removeStorageKey for a storage key if it hasn't already been added.");const t=this.getBucketsForStorageKey(e);for(const e of t)this.bucketRemoved(e);this.trackedStorageKeys.delete(e),this.storageAgent.invoke_setStorageBucketTracking({storageKey:e,enable:!1})}bucketAdded(e){this.bucketsById.set(e.id,e),this.dispatchEventToListeners("BucketAdded",{model:this,bucketInfo:e})}bucketRemoved(e){this.bucketsById.delete(e.id),this.dispatchEventToListeners("BucketRemoved",{model:this,bucketInfo:e})}bucketChanged(e){this.dispatchEventToListeners("BucketChanged",{model:this,bucketInfo:e})}bucketInfosAreEqual(e,t){return e.bucket.storageKey===t.bucket.storageKey&&e.id===t.id&&e.bucket.name===t.bucket.name&&e.expiration===t.expiration&&e.quota===t.quota&&e.persistent===t.persistent&&e.durability===t.durability}storageBucketCreatedOrUpdated({bucketInfo:e}){const t=this.getBucketById(e.id);t?this.bucketInfosAreEqual(t,e)||this.bucketChanged(e):this.bucketAdded(e)}storageBucketDeleted({bucketId:e}){const t=this.getBucketById(e);if(!t)throw new Error(`Received an event that Storage Bucket '${e}' was deleted, but it wasn't in the StorageBucketsModel.`);this.bucketRemoved(t)}attributionReportingTriggerRegistered(e){}interestGroupAccessed(e){}interestGroupAuctionEventOccurred(e){}interestGroupAuctionNetworkRequestCreated(e){}indexedDBListUpdated(e){}indexedDBContentUpdated(e){}cacheStorageListUpdated(e){}cacheStorageContentUpdated(e){}sharedStorageAccessed(e){}attributionReportingSourceRegistered(e){}}h.register(ao,{capabilities:8192,autostart:!1});var lo=Object.freeze({__proto__:null,StorageBucketsModel:ao});const co={serviceworkercacheagentError:"`ServiceWorkerCacheAgent` error deleting cache entry {PH1} in cache: {PH2}"},ho=n.i18n.registerUIStrings("core/sdk/ServiceWorkerCacheModel.ts",co),uo=n.i18n.getLocalizedString.bind(void 0,ho);class go extends h{cacheAgent;#Yd;#Zd;#ec=new Map;#tc=new Set;#rc=new Set;#nc=new e.Throttler.Throttler(2e3);#$r=!1;#sc=!1;constructor(e){super(e),e.registerStorageDispatcher(this),this.cacheAgent=e.cacheStorageAgent(),this.#Yd=e.storageAgent(),this.#Zd=e.model(ao)}enable(){if(!this.#$r){this.#Zd.addEventListener("BucketAdded",this.storageBucketAdded,this),this.#Zd.addEventListener("BucketRemoved",this.storageBucketRemoved,this);for(const e of this.#Zd.getBuckets())this.addStorageBucket(e.bucket);this.#$r=!0}}clearForStorageKey(e){for(const[t,r]of this.#ec.entries())r.storageKey===e&&(this.#ec.delete(t),this.cacheRemoved(r));for(const t of this.#Zd.getBucketsForStorageKey(e))this.loadCacheNames(t.bucket)}refreshCacheNames(){for(const e of this.#ec.values())this.cacheRemoved(e);this.#ec.clear();const e=this.#Zd.getBuckets();for(const t of e)this.loadCacheNames(t.bucket)}async deleteCache(e){const t=await this.cacheAgent.invoke_deleteCache({cacheId:e.cacheId});t.getError()?console.error(`ServiceWorkerCacheAgent error deleting cache ${e.toString()}: ${t.getError()}`):(this.#ec.delete(e.cacheId),this.cacheRemoved(e))}async deleteCacheEntry(t,r){const n=await this.cacheAgent.invoke_deleteEntry({cacheId:t.cacheId,request:r});n.getError()&&e.Console.Console.instance().error(uo(co.serviceworkercacheagentError,{PH1:t.toString(),PH2:String(n.getError())}))}loadCacheData(e,t,r,n,s){this.requestEntries(e,t,r,n,s)}loadAllCacheData(e,t,r){this.requestAllEntries(e,t,r)}caches(){const e=new Array;for(const t of this.#ec.values())e.push(t);return e}dispose(){for(const e of this.#ec.values())this.cacheRemoved(e);this.#ec.clear(),this.#$r&&(this.#Zd.removeEventListener("BucketAdded",this.storageBucketAdded,this),this.#Zd.removeEventListener("BucketRemoved",this.storageBucketRemoved,this))}addStorageBucket(e){this.loadCacheNames(e),this.#tc.has(e.storageKey)||(this.#tc.add(e.storageKey),this.#Yd.invoke_trackCacheStorageForStorageKey({storageKey:e.storageKey}))}removeStorageBucket(e){let t=0;for(const[r,n]of this.#ec.entries())e.storageKey===n.storageKey&&t++,n.inBucket(e)&&(t--,this.#ec.delete(r),this.cacheRemoved(n));0===t&&(this.#tc.delete(e.storageKey),this.#Yd.invoke_untrackCacheStorageForStorageKey({storageKey:e.storageKey}))}async loadCacheNames(e){const t=await this.cacheAgent.invoke_requestCacheNames({storageBucket:e});t.getError()||this.updateCacheNames(e,t.caches)}updateCacheNames(e,t){const r=new Set,n=new Map,s=new Map;for(const e of t){const t=e.storageBucket??this.#Zd.getDefaultBucketForStorageKey(e.storageKey)?.bucket;if(!t)continue;const s=new po(this,t,e.cacheName,e.cacheId);r.add(s.cacheId),this.#ec.has(s.cacheId)||(n.set(s.cacheId,s),this.#ec.set(s.cacheId,s))}this.#ec.forEach((function(t){t.inBucket(e)&&!r.has(t.cacheId)&&(s.set(t.cacheId,t),this.#ec.delete(t.cacheId))}),this),n.forEach(this.cacheAdded,this),s.forEach(this.cacheRemoved,this)}storageBucketAdded({data:{bucketInfo:{bucket:e}}}){this.addStorageBucket(e)}storageBucketRemoved({data:{bucketInfo:{bucket:e}}}){this.removeStorageBucket(e)}cacheAdded(e){this.dispatchEventToListeners("CacheAdded",{model:this,cache:e})}cacheRemoved(e){this.dispatchEventToListeners("CacheRemoved",{model:this,cache:e})}async requestEntries(e,t,r,n,s){const i=await this.cacheAgent.invoke_requestEntries({cacheId:e.cacheId,skipCount:t,pageSize:r,pathFilter:n});i.getError()?console.error("ServiceWorkerCacheAgent error while requesting entries: ",i.getError()):s(i.cacheDataEntries,i.returnCount)}async requestAllEntries(e,t,r){const n=await this.cacheAgent.invoke_requestEntries({cacheId:e.cacheId,pathFilter:t});n.getError()?console.error("ServiceWorkerCacheAgent error while requesting entries: ",n.getError()):r(n.cacheDataEntries,n.returnCount)}cacheStorageListUpdated({bucketId:e}){const t=this.#Zd.getBucketById(e)?.bucket;t&&(this.#rc.add(t),this.#nc.schedule((()=>{const e=Array.from(this.#rc,(e=>this.loadCacheNames(e)));return this.#rc.clear(),Promise.all(e)}),this.#sc?"AsSoonAsPossible":"Default"))}cacheStorageContentUpdated({bucketId:e,cacheName:t}){const r=this.#Zd.getBucketById(e)?.bucket;r&&this.dispatchEventToListeners("CacheStorageContentUpdated",{storageBucket:r,cacheName:t})}attributionReportingTriggerRegistered(e){}indexedDBListUpdated(e){}indexedDBContentUpdated(e){}interestGroupAuctionEventOccurred(e){}interestGroupAccessed(e){}interestGroupAuctionNetworkRequestCreated(e){}sharedStorageAccessed(e){}storageBucketCreatedOrUpdated(e){}storageBucketDeleted(e){}setThrottlerSchedulesAsSoonAsPossibleForTest(){this.#sc=!0}attributionReportingSourceRegistered(e){}}class po{#Un;storageKey;storageBucket;cacheName;cacheId;constructor(e,t,r,n){this.#Un=e,this.storageBucket=t,this.storageKey=t.storageKey,this.cacheName=r,this.cacheId=n}inBucket(e){return this.storageKey===e.storageKey&&this.storageBucket.name===e.name}equals(e){return this.cacheId===e.cacheId}toString(){return this.storageKey+this.cacheName}async requestCachedResponse(e,t){const r=await this.#Un.cacheAgent.invoke_requestCachedResponse({cacheId:this.cacheId,requestURL:e,requestHeaders:t});return r.getError()?null:r.response}}h.register(go,{capabilities:8192,autostart:!1});var mo=Object.freeze({__proto__:null,ServiceWorkerCacheModel:go,Cache:po});const fo={running:"running",starting:"starting",stopped:"stopped",stopping:"stopping",activated:"activated",activating:"activating",installed:"installed",installing:"installing",new:"new",redundant:"redundant",sSS:"{PH1} #{PH2} ({PH3})"},bo=n.i18n.registerUIStrings("core/sdk/ServiceWorkerManager.ts",fo),yo=n.i18n.getLocalizedString.bind(void 0,bo),vo=n.i18n.getLazilyComputedLocalizedString.bind(void 0,bo);class ko extends h{#xs;#ic;#$r;#oc;serviceWorkerNetworkRequestsPanelStatus;constructor(t){super(t),t.registerServiceWorkerDispatcher(new Io(this)),this.#xs=t.serviceWorkerAgent(),this.#ic=new Map,this.#$r=!1,this.enable(),this.#oc=e.Settings.Settings.instance().createSetting("service-worker-update-on-reload",!1),this.#oc.get()&&this.forceUpdateSettingChanged(),this.#oc.addChangeListener(this.forceUpdateSettingChanged,this),new Ro(t,this),this.serviceWorkerNetworkRequestsPanelStatus={isOpen:!1,openedAt:0}}async enable(){this.#$r||(this.#$r=!0,await this.#xs.invoke_enable())}async disable(){this.#$r&&(this.#$r=!1,this.#ic.clear(),await this.#xs.invoke_enable())}registrations(){return this.#ic}hasRegistrationForURLs(e){for(const t of this.#ic.values())if(e.filter((e=>e&&e.startsWith(t.scopeURL))).length===e.length)return!0;return!1}findVersion(e){for(const t of this.registrations().values()){const r=t.versions.get(e);if(r)return r}return null}deleteRegistration(e){const t=this.#ic.get(e);if(t){if(t.isRedundant())return this.#ic.delete(e),void this.dispatchEventToListeners("RegistrationDeleted",t);t.deleting=!0;for(const e of t.versions.values())this.stopWorker(e.id);this.unregister(t.scopeURL)}}async updateRegistration(e){const t=this.#ic.get(e);t&&await this.#xs.invoke_updateRegistration({scopeURL:t.scopeURL})}async deliverPushMessage(t,r){const n=this.#ic.get(t);if(!n)return;const s=e.ParsedURL.ParsedURL.extractOrigin(n.scopeURL);await this.#xs.invoke_deliverPushMessage({origin:s,registrationId:t,data:r})}async dispatchSyncEvent(t,r,n){const s=this.#ic.get(t);if(!s)return;const i=e.ParsedURL.ParsedURL.extractOrigin(s.scopeURL);await this.#xs.invoke_dispatchSyncEvent({origin:i,registrationId:t,tag:r,lastChance:n})}async dispatchPeriodicSyncEvent(t,r){const n=this.#ic.get(t);if(!n)return;const s=e.ParsedURL.ParsedURL.extractOrigin(n.scopeURL);await this.#xs.invoke_dispatchPeriodicSyncEvent({origin:s,registrationId:t,tag:r})}async unregister(e){await this.#xs.invoke_unregister({scopeURL:e})}async startWorker(e){await this.#xs.invoke_startWorker({scopeURL:e})}async skipWaiting(e){await this.#xs.invoke_skipWaiting({scopeURL:e})}async stopWorker(e){await this.#xs.invoke_stopWorker({versionId:e})}async inspectWorker(e){await this.#xs.invoke_inspectWorker({versionId:e})}workerRegistrationUpdated(e){for(const t of e){let e=this.#ic.get(t.registrationId);e?(e.update(t),e.shouldBeRemoved()?(this.#ic.delete(e.id),this.dispatchEventToListeners("RegistrationDeleted",e)):this.dispatchEventToListeners("RegistrationUpdated",e)):(e=new xo(t),this.#ic.set(t.registrationId,e),this.dispatchEventToListeners("RegistrationUpdated",e))}}workerVersionUpdated(e){const t=new Set;for(const r of e){const e=this.#ic.get(r.registrationId);e&&(e.updateVersion(r),t.add(e))}for(const e of t)e.shouldBeRemoved()?(this.#ic.delete(e.id),this.dispatchEventToListeners("RegistrationDeleted",e)):this.dispatchEventToListeners("RegistrationUpdated",e)}workerErrorReported(e){const t=this.#ic.get(e.registrationId);t&&(t.errors.push(e),this.dispatchEventToListeners("RegistrationErrorAdded",{registration:t,error:e}))}forceUpdateOnReloadSetting(){return this.#oc}forceUpdateSettingChanged(){const e=this.#oc.get();this.#xs.invoke_setForceUpdateOnPageLoad({forceUpdateOnPageLoad:e})}}class Io{#q;constructor(e){this.#q=e}workerRegistrationUpdated({registrations:e}){this.#q.workerRegistrationUpdated(e)}workerVersionUpdated({versions:e}){this.#q.workerVersionUpdated(e)}workerErrorReported({errorMessage:e}){this.#q.workerErrorReported(e)}}class wo{runningStatus;status;lastUpdatedTimestamp;previousState;constructor(e,t,r,n){this.runningStatus=e,this.status=t,this.lastUpdatedTimestamp=n,this.previousState=r}}class So{condition;source;id;constructor(e,t,r){this.condition=e,this.source=t,this.id=r}}class Co{id;scriptURL;parsedURL;securityOrigin;scriptLastModified;scriptResponseTime;controlledClients;targetId;routerRules;currentState;registration;constructor(e,t){this.registration=e,this.update(t)}update(t){this.id=t.versionId,this.scriptURL=t.scriptURL;const r=new e.ParsedURL.ParsedURL(t.scriptURL);this.securityOrigin=r.securityOrigin(),this.currentState=new wo(t.runningStatus,t.status,this.currentState,Date.now()),this.scriptLastModified=t.scriptLastModified,this.scriptResponseTime=t.scriptResponseTime,t.controlledClients?this.controlledClients=t.controlledClients.slice():this.controlledClients=[],this.targetId=t.targetId||null,this.routerRules=null,t.routerRules&&(this.routerRules=this.parseJSONRules(t.routerRules))}isStartable(){return!this.registration.isDeleted&&this.isActivated()&&this.isStopped()}isStoppedAndRedundant(){return"stopped"===this.runningStatus&&"redundant"===this.status}isStopped(){return"stopped"===this.runningStatus}isStarting(){return"starting"===this.runningStatus}isRunning(){return"running"===this.runningStatus}isStopping(){return"stopping"===this.runningStatus}isNew(){return"new"===this.status}isInstalling(){return"installing"===this.status}isInstalled(){return"installed"===this.status}isActivating(){return"activating"===this.status}isActivated(){return"activated"===this.status}isRedundant(){return"redundant"===this.status}get status(){return this.currentState.status}get runningStatus(){return this.currentState.runningStatus}mode(){return this.isNew()||this.isInstalling()?"installing":this.isInstalled()?"waiting":this.isActivating()||this.isActivated()?"active":"redundant"}parseJSONRules(e){try{const t=JSON.parse(e);if(!Array.isArray(t))return console.error("Parse error: `routerRules` in ServiceWorkerVersion should be an array"),null;const r=[];for(const e of t){const{condition:t,source:n,id:s}=e;if(void 0===t||void 0===n||void 0===s)return console.error("Parse error: Missing some fields of `routerRules` in ServiceWorkerVersion"),null;r.push(new So(JSON.stringify(t),JSON.stringify(n),s))}return r}catch(e){return console.error("Parse error: Invalid `routerRules` in ServiceWorkerVersion"),null}}}!function(e){e.RunningStatus={running:vo(fo.running),starting:vo(fo.starting),stopped:vo(fo.stopped),stopping:vo(fo.stopping)},e.Status={activated:vo(fo.activated),activating:vo(fo.activating),installed:vo(fo.installed),installing:vo(fo.installing),new:vo(fo.new),redundant:vo(fo.redundant)}}(Co||(Co={}));class xo{#ac;id;scopeURL;securityOrigin;isDeleted;versions;deleting;errors;constructor(e){this.update(e),this.versions=new Map,this.deleting=!1,this.errors=[]}update(t){this.#ac=Symbol("fingerprint"),this.id=t.registrationId,this.scopeURL=t.scopeURL;const r=new e.ParsedURL.ParsedURL(t.scopeURL);this.securityOrigin=r.securityOrigin(),this.isDeleted=t.isDeleted}fingerprint(){return this.#ac}versionsByMode(){const e=new Map;for(const t of this.versions.values())e.set(t.mode(),t);return e}updateVersion(e){this.#ac=Symbol("fingerprint");let t=this.versions.get(e.versionId);return t?(t.update(e),t):(t=new Co(this,e),this.versions.set(e.versionId,t),t)}isRedundant(){for(const e of this.versions.values())if(!e.isStoppedAndRedundant())return!1;return!0}shouldBeRemoved(){return this.isRedundant()&&(!this.errors.length||this.deleting)}canBeRemoved(){return this.isDeleted||this.deleting}clearErrors(){this.#ac=Symbol("fingerprint"),this.errors=[]}}class Ro{#Rr;#lc;#dc;constructor(e,t){this.#Rr=e,this.#lc=t,this.#dc=new Map,t.addEventListener("RegistrationUpdated",this.registrationsUpdated,this),t.addEventListener("RegistrationDeleted",this.registrationsUpdated,this),z.instance().addModelListener(_r,Hr.ExecutionContextCreated,this.executionContextCreated,this)}registrationsUpdated(){this.#dc.clear();const e=this.#lc.registrations().values();for(const t of e)for(const e of t.versions.values())e.targetId&&this.#dc.set(e.targetId,e);this.updateAllContextLabels()}executionContextCreated(e){const t=e.data,r=this.serviceWorkerTargetId(t.target());r&&this.updateContextLabel(t,this.#dc.get(r)||null)}serviceWorkerTargetId(e){return e.parentTarget()!==this.#Rr||e.type()!==B.ServiceWorker?null:e.id()}updateAllContextLabels(){for(const e of z.instance().targets()){const t=this.serviceWorkerTargetId(e);if(!t)continue;const r=this.#dc.get(t)||null,n=e.model(_r),s=n?n.executionContexts():[];for(const e of s)this.updateContextLabel(e,r)}}updateContextLabel(t,r){if(!r)return void t.setLabel("");const n=e.ParsedURL.ParsedURL.fromString(t.origin),s=n?n.lastPathComponentWithFragment():t.name,i=Co.Status[r.status];t.setLabel(yo(fo.sSS,{PH1:s,PH2:r.id,PH3:i()}))}}h.register(ko,{capabilities:16384,autostart:!0});var To=Object.freeze({__proto__:null,ServiceWorkerManager:ko,ServiceWorkerVersionState:wo,ServiceWorkerRouterRule:So,get ServiceWorkerVersion(){return Co},ServiceWorkerRegistration:xo});var Mo=Object.freeze({__proto__:null,TraceObject:class{traceEvents;metadata;constructor(e,t={}){this.traceEvents=e,this.metadata=t}}});class Po extends h{#xs;constructor(e){super(e),this.#xs=e.webAuthnAgent(),e.registerWebAuthnDispatcher(new Lo(this))}setVirtualAuthEnvEnabled(e){return e?this.#xs.invoke_enable({enableUI:!0}):this.#xs.invoke_disable()}async addAuthenticator(e){return(await this.#xs.invoke_addVirtualAuthenticator({options:e})).authenticatorId}async removeAuthenticator(e){await this.#xs.invoke_removeVirtualAuthenticator({authenticatorId:e})}async setAutomaticPresenceSimulation(e,t){await this.#xs.invoke_setAutomaticPresenceSimulation({authenticatorId:e,enabled:t})}async getCredentials(e){return(await this.#xs.invoke_getCredentials({authenticatorId:e})).credentials}async removeCredential(e,t){await this.#xs.invoke_removeCredential({authenticatorId:e,credentialId:t})}credentialAdded(e){this.dispatchEventToListeners("CredentialAdded",e)}credentialAsserted(e){this.dispatchEventToListeners("CredentialAsserted",e)}}class Lo{#Un;constructor(e){this.#Un=e}credentialAdded(e){this.#Un.credentialAdded(e)}credentialAsserted(e){this.#Un.credentialAsserted(e)}}h.register(Po,{capabilities:65536,autostart:!1});var Eo=Object.freeze({__proto__:null,WebAuthnModel:Po});export{Ss as AccessibilityModel,xs as AutofillModel,ai as CPUProfileDataModel,Qs as CPUProfilerModel,mi as CPUThrottlingManager,Ge as CSSContainerQuery,ue as CSSFontFace,Qe as CSSLayer,Tt as CSSMatchedStyles,Ye as CSSMedia,A as CSSMetadata,Nr as CSSModel,nt as CSSProperty,Ue as CSSPropertyParser,qe as CSSQuery,ft as CSSRule,et as CSSScope,it as CSSStyleDeclaration,At as CSSStyleSheetHeader,at as CSSSupports,Ts as CategorizedBreakpoint,Hs as ChildTargetManager,js as CompilerSourceMappingContentProvider,Os as Connections,ii as ConsoleModel,H as Cookie,Yn as CookieModel,ts as CookieParser,Ci as DOMDebuggerModel,Hn as DOMModel,mn as DebuggerModel,hi as EmulationModel,Pi as EventBreakpointsModel,Li as FrameAssociated,Nt as FrameManager,Ur as HeapProfilerModel,$t as IOModel,Bi as IsolateManager,Ui as IssuesModel,_i as LayerTreeBase,Xs as LogModel,ce as NetworkManager,ks as NetworkRequest,bn as OverlayColorGenerator,Pn as OverlayModel,vn as OverlayPersistentHighlighter,ji as PageLoad,nr as PageResourceLoader,Ki as PaintProfiler,$i as PerformanceMetricsModel,so as PreloadingModel,D as ProfileTreeModel,Kt as RemoteObject,qn as Resource,Xn as ResourceTreeModel,jr as RuntimeModel,u as SDKModel,oo as ScreenCaptureModel,Jr as Script,jn as SecurityOriginManager,ss as ServerSentEventProtocol,hs as ServerTiming,mo as ServiceWorkerCacheModel,To as ServiceWorkerManager,wr as SourceMap,xr as SourceMapManager,cr as SourceMapScopes,gr as SourceMapScopesInfo,lo as StorageBucketsModel,Gn as StorageKeyManager,_ as Target,j as TargetManager,Mo as TraceObject,Eo as WebAuthnModel};
